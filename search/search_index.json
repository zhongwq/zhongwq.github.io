{
    "docs": [
        {
            "location": "/", 
            "text": "Zhong Wenqian\n\n\nA student major in Software Engineering in SYSU(Sun Yat-sen University).\n\n\nContact me\n\n\n\n\nEmail: \n\n\nGithub: \nzhongwq@github", 
            "title": "Home"
        }, 
        {
            "location": "/#zhong-wenqian", 
            "text": "A student major in Software Engineering in SYSU(Sun Yat-sen University).", 
            "title": "Zhong Wenqian"
        }, 
        {
            "location": "/#contact-me", 
            "text": "Email:   Github:  zhongwq@github", 
            "title": "Contact me"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb01-GUI\u4e95\u5b57\u68cb/", 
            "text": "\u5b66\u4e60\u7b14\u8bb01-GUI\u4e95\u5b57\u68cb\n\n\n1. \u7b80\u7b54\u9898\n\n\n\n\n\n\n\u89e3\u91ca \u6e38\u620f\u5bf9\u8c61\uff08GameObjects\uff09 \u548c \u8d44\u6e90\uff08Assets\uff09\u7684\u533a\u522b\u4e0e\u8054\u7cfb\u3002\n\n\n\n\n\u8d44\u6e90(Assets)\u662f\u5305\u542b\u5728\u6e38\u620f\u6587\u4ef6\u4e2d\uff0c\u4e3a\u6e38\u620f\u5bf9\u8c61\u6240\u4f7f\u7528\u7684\uff0c\u4e00\u4e2a\u8d44\u6e90\u53ef\u4ee5\u88ab\u4e00\u4e2a\u6216\u591a\u4e2a\u5bf9\u8c61\u4f7f\u7528\u3002\u800c\u5bf9\u8c61\u51fa\u73b0\u5728\u6e38\u620f\u573a\u666f(Scene)\u4e2d\uff0c\u662fComponents\u3001\u8d44\u6e90\u6574\u5408\u5728\u4e00\u8d77\u7684\u7ed3\u679c\u3002\n\n\n\n\n\n\n\n\n\u4e0b\u8f7d\u51e0\u4e2a\u6e38\u620f\u6848\u4f8b\uff0c\u5206\u522b\u603b\u7ed3\u8d44\u6e90\u3001\u5bf9\u8c61\u7ec4\u7ec7\u7684\u7ed3\u6784\n\n\n\n\n\u5206\u6790\u4e0b\u8f7d\u7684\u6e38\u620f\u6848\u4f8b\n\n\n1.\u8d44\u6e90\u6587\u4ef6\u5939\u901a\u5e38\u6709\u5bf9\u8c61\u3001\u6750\u8d28\u3001\u573a\u666f\u3001\u58f0\u97f3\u3001\u9884\u8bbe\u3001\u8d34\u56fe\u3001\u811a\u672c\u3001\u52a8\u4f5c\uff0c\u5728\u8fd9\u4e9b\u6587\u4ef6\u5939\u4e0b\u53ef\u4ee5\u7ee7\u7eed\u5212\u5206\u3002\n\n\n2.\u5bf9\u8c61\u4e2d\u4e00\u822c\u6709\u73a9\u5bb6\u3001\u654c\u4eba\u3001\u73af\u5883\u3001\u6444\u50cf\u673a\u548c\u97f3\u4e50\u7b49\u865a\u62df\u7236\u7c7b\uff0c\u8fd9\u4e9b\u7236\u7c7b\u672c\u8eab\u6ca1\u6709\u5b9e\u4f53\uff0c\u4f46\u4ed6\u4eec\u7684\u5b50\u7c7b\u5305\u542b\u4e86\u6e38\u620f\u4e2d\u4f1a\u51fa\u73b0\u7684\u5bf9\u8c61\u3002\n\n\n\n\n\n\n\n\n\u7f16\u5199\u4e00\u4e2a\u4ee3\u7801\uff0c\u4f7f\u7528 debug \u8bed\u53e5\u6765\u9a8c\u8bc1 MonoBehaviour \u57fa\u672c\u884c\u4e3a\u6216\u4e8b\u4ef6\u89e6\u53d1\u7684\u6761\u4ef6\n\n\n\n\n\u57fa\u672c\u884c\u4e3a\u5305\u62ec Awake() Start() Update() FixedUpdate() LateUpdate()\n\n\n\u5e38\u7528\u4e8b\u4ef6\u5305\u62ec OnGUI() OnDisable() OnEnable()\n\n\n\n\n\n\n\n\npublic\n \nclass\n \ntestBasicBehaviour\n \n:\n \nMonoBehaviour\n \n{\n\n    \nvoid\n \nAwake\n()\n \n{\n\n        \nDebug\n.\nLog\n \n(\nonAwake\n);\n\n    \n}\n\n    \nvoid\n \nStart\n \n()\n \n{\n\n        \nDebug\n.\nLog\n \n(\nonStart\n);\n\n    \n}\n\n    \nvoid\n \nUpdate\n \n()\n \n{\n\n        \nDebug\n.\nLog\n \n(\nonUpdate\n);\n\n    \n}\n\n    \nvoid\n \nFixedUpdate\n()\n \n{\n\n        \nDebug\n.\nLog\n \n(\nonFixedUpdate\n);\n\n    \n}\n\n    \nvoid\n \nLateUpdate\n()\n \n{\n\n        \nDebug\n.\nLog\n \n(\nonLateUpdate\n);\n\n    \n}\n\n    \nvoid\n \nOnGUI\n()\n \n{\n\n        \nDebug\n.\nLog\n \n(\nonGUI\n);\n\n    \n}\n\n    \nvoid\n \nReset\n()\n \n{\n\n        \nDebug\n.\nLog\n \n(\nonReset\n);\n\n    \n}\n\n    \nvoid\n \nOnDisable\n()\n \n{\n\n        \nDebug\n.\nLog\n \n(\nonDisable\n);\n\n    \n}\n\n    \nvoid\n \nOnDestroy\n()\n \n{\n\n        \nDebug\n.\nLog\n \n(\nonDestroy\n);\n\n    \n}\n\n\n}\n\n\n\n\n\n\n\n\n\n\n\u67e5\u627e\u811a\u672c\u624b\u518c\uff0c\u4e86\u89e3 GameObject\uff0cTransform\uff0cComponent \u5bf9\u8c61\n\n\n\n\n\n\n\u5206\u522b\u7ffb\u8bd1\u5b98\u65b9\u5bf9\u4e09\u4e2a\u5bf9\u8c61\u7684\u63cf\u8ff0\uff08Description\uff09\n\n\n\n\n\n\n\u6e38\u620f\u5bf9\u8c61\u5728Unity\u4e2d\u662f\u4ee3\u8868\u7740\u6e38\u620f\u7269\u4ef6\u3001\u9053\u5177\u4ee5\u53ca\u6e38\u620f\u573a\u666f\u7684\u57fa\u672c\u5bf9\u8c61\u3002\u5b83\u4eec\u672c\u8eab\u6ca1\u6709\u5b8c\u6210\u592a\u591a\u5185\u5bb9\uff0c\u4f46\u5b83\u4eec\u5145\u5f53\u7740\u7ec4\u4ef6\u7684\u5bb9\u5668\uff0c\u8ba9\u5f00\u53d1\u8005\u5b9e\u73b0\u771f\u6b63\u7684\u529f\u80fd\u3002\n\n\nTransform\u5c5e\u6027\u5b9a\u4e49\u4e86\u7ec4\u4ef6\u7684\u4f4d\u7f6e\uff0c\u65cb\u8f6c\u89d2\u5ea6\uff0c\u5404\u4e2a\u65b9\u5411\u7684\u5927\u5c0f\u6bd4\u4f8b\uff08\u7f29\u653e\uff09\u3002\u6bcf\u4e00\u4e2a\u6e38\u620f\u5bf9\u8c61(GameObject)\u90fd\u6709\u7740\u4e00\u4e2aTransform\u3002\n\n\n\u7ec4\u4ef6\u662f\u6e38\u620f\u4e2d\u7269\u4f53\u548c\u884c\u4e3a\u7684\u87ba\u6bcd\u548c\u87ba\u6813, \u5b83\u4eec\u662f\u6bcf\u4e2a\u6e38\u620f\u5bf9\u8c61\u7684\u529f\u80fd\u5757\u3002\u4e00\u4e2a\u6e38\u620f\u5bf9\u8c61\u662f\u8bb8\u591a\u4e0d\u540c\u7684\u7ec4\u4ef6\u7684\u5bb9\u5668\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6240\u6709\u7684\u6e38\u620f\u5bf9\u8c61\u81ea\u52a8\u62e5\u6709Transform\u7ec4\u4ef6\u3002\u8fd9\u662f\u56e0\u4e3aTransform\u7ec4\u4ef6\u51b3\u5b9a\u4e86\u6e38\u620f\u5bf9\u8c61\u7684\u4f4d\u7f6e\uff0c\u4ee5\u53ca\u5b83\u5982\u4f55\u65cb\u8f6c\u548c\u7f29\u653e\u3002\u6ca1\u6709Transform\u7ec4\u4ef6\u7684\u6e38\u620f\u5bf9\u8c61\uff0c\u4e0d\u4f1a\u5728World\u4e2d\u5b58\u5728\u3002\n\n\n\n\n\n\n\n\n\n\n\u63cf\u8ff0\u4e0b\u56fe\u4e2d table \u5bf9\u8c61\uff08\u5b9e\u4f53\uff09\u7684\u5c5e\u6027\u3001table \u7684 Transform \u7684\u5c5e\u6027\u3001 table \u7684 \u90e8\u4ef6\n\n\n\n\n\n\u8be5table\u5bf9\u8c61\u7684\u5c5e\u6027\uff08component\uff09\u6709\u5982\u4e0b:\n    \n 1. Transform\u63cf\u8ff0\u4e86table\u5bf9\u8c61\u7684\u4f4d\u7f6e\uff0c\u65cb\u8f6c\u89d2\u5ea6\uff0c\u7f29\u653e, \u56fe\u4e2d\u7684\u5c5e\u6027\u4e3a,\u4f4d\u7f6e(0,0,0), \u65cb\u8f6c(0,0,0),\u6bd4\u4f8b\u4e3a(100%, 100%, 100%);\n\n\n\n\n\n\nMesh Filter\u7f51\u683c\u8fc7\u6ee4\u5668\u63cf\u8ff0\u4e86\u51e0\u4f55\u4f53\u7684\u5f62\u72b6,\u56fe\u4e2dtable\u4e3aCube\uff08\u7acb\u65b9\u4f53\uff09\n\n\n\n\n\n\nBox Colider\u5219\u63cf\u8ff0\u4e86\u7269\u4f53\u7684\u78b0\u649e\u8303\u56f4\uff0c\u56fe\u4e2d\u7684\u78b0\u649e\u8303\u56f4\u4e3a\u4ee5(0,0,0),(1,0,0),(0,1,0),(1,1,0),(0,0,1),(1,0,1),(0,1,1),(1,1,1)\u4e3a\u9876\u70b9\u7684\u4e00\u4e2a\u6b63\u65b9\u4f53\n\n\n\n\n\n\nMesh Renderer\u7f51\u683c\u6e32\u67d3\u5668\u5219\u4ece\u7f51\u683c\u8fc7\u6ee4\u5668\u4e2d\u83b7\u5f97\u51e0\u4f55\u4f53\u7684\u5f62\u72b6\u7136\u540e\u6839\u636e\u8981\u6c42\u8fdb\u884c\u6e32\u67d3\u3002\u56fe\u4e2d\u7684\u5c5e\u6027\u4e3a Cast Shadows(\u6295\u5c04\u9634\u5f71\u65b9\u5f0f)\u5f00\u542f,\u63a5\u53d7\u9634\u5f71 Motion Vectors\uff08\u8fd0\u52a8\u5411\u91cf\u751f\u6210\u65b9\u5f0f\uff09\u4e3aPerObject Motion\uff08\u4f1a\u6e32\u67d3\u51fa\u4e00\u4e2a\u201c\u6bcf\u4e2a\u5bf9\u8c61\u201d\u8fd0\u52a8\u5411\u91cf\u901a\u9053\uff09\uff0c\u6750\u8d28\u4e3a\u9ed8\u8ba4\u6750\u8d28\uff0cLight Probes\uff08\u5149\u63a2\u5934\u63d2\u503c\u65b9\u5f0f\uff09\u4ee5\u53caReflection Probes\uff08\u53cd\u5c04\u63a2\u5934\u90fd\u4e3a\u6df7\u5408\uff09\uff0cAnchor Override\u4e3a\u5f53\u4f7f\u7528\u5149\u63a2\u5934\u6216\u53cd\u5c04\u63a2\u5934\u7cfb\u7edf\u65f6\uff0c\u7528\u6765\u51b3\u5b9a\u63d2\u503c\u4f4d\u7f6e\u7684Transform\uff0c\u56fe\u4e2d\u672a\u5b9a\u4e49\u8be5Transform\u3002\n\n\n\n\n\n\n\n\n\n\n\n\n\u7528 UML \u56fe\u63cf\u8ff0 \u4e09\u8005\u7684\u5173\u7cfb\uff08\u8bf7\u4f7f\u7528 UMLet 14.1.1 stand-alone\u7248\u672c\u51fa\u56fe\uff09\n\n\n\n\n\n\n\n\n\n\n\n\u6574\u7406\u76f8\u5173\u5b66\u4e60\u8d44\u6599\uff0c\u7f16\u5199\u7b80\u5355\u4ee3\u7801\u9a8c\u8bc1\u4ee5\u4e0b\u6280\u672f\u7684\u5b9e\u73b0\uff1a(\u67e5\u627e\u5bf9\u8c61\u3001\u6dfb\u52a0\u5b50\u5bf9\u8c61\u3001\u904d\u5386\u5bf9\u8c61\u6811\u3001\u6e05\u9664\u6240\u6709\u5b50\u5bf9\u8c61)\n\n\n\n\n\n\n//\u67e5\u627e\u5bf9\u8c61\n\n\npublic\n \nstatic\n \nGameObject\n \nFind\n(\nstring\n \nname\n)\n//\u901a\u8fc7\u540d\u5b57\u67e5\u627e\n\n\npublic\n \nstatic\n \nGameObject\n \nFindWithTag\n(\nstring\n \ntag\n)\n//\u901a\u8fc7\u6807\u7b7e\u67e5\u627e\u5355\u4e2a\u5bf9\u8c61\n\n\npublic\n \nstatic\n \nGameObject\n[]\n \nFindGameObjectsWithTag\n(\nstring\n \ntag\n)\n//\u901a\u8fc7\u6807\u7b7e\u67e5\u627e\u591a\u4e2a\u5bf9\u8c61\n\n\n//\u6dfb\u52a0\u5b50\u5bf9\u8c61\n\n\npublic\n \nstatic\n \nGameObect\n \nCreatePrimitive\n(\nPrimitiveTypetype\n)\n\n\n//\u904d\u5386\u5bf9\u8c61\u6811\n\n\nforeach\n \n(\nTransform\n \nchild\n \nin\n \ntransform\n)\n \n{\n\n     \nDebug\n.\nLog\n(\nchild\n.\ngameObject\n.\nname\n);\n\n\n}\n\n\n//\u6e05\u9664\u6240\u6709\u5b50\u5bf9\u8c61\n\n\nforeach\n \n(\nTransform\n \nchild\n \nin\n \ntransform\n)\n \n{\n\n      \nDestroy\n(\nchild\n.\ngameObject\n);\n\n\n}\n\n\n\n\n\n\n\n\n\n\n\u9884\u8bbe\uff08Prefabs\uff09\u6709\u4ec0\u4e48\u597d\u5904\uff1f\u4e0e\u5bf9\u8c61\u514b\u9686 (clone or copy or Instantiate of Unity Object) \u5173\u7cfb\uff1f\n\n\n\n\nUnity\u901a\u8fc7\u9884\u8bbe\uff08Prefabs\uff09\u5b8c\u6574\u5730\u50a8\u5b58\u4e86\u5bf9\u8c61\u7684\u7ec4\u4ef6\u3001\u5c5e\u6027\u7b49\u5185\u5bb9\uff0c\u65b9\u4fbf\u5f00\u53d1\u8005\u521b\u5efa\u5177\u6709\u76f8\u540c\u5c5e\u6027\u7684\u5bf9\u8c61,\u65b9\u4fbf\u4e86\u5bf9\u8c61\u7684\u590d\u7528\u3002\u5bf9\u8c61\u514b\u9686\u4e0e\u9884\u8bbe\u4e0d\u540c\u7684\u5730\u65b9\u5c31\u5728\u4e8e\uff0c\u9884\u8bbe\u4e0e\u5b9e\u4f8b\u5316\u7684\u5bf9\u8c61\u662f\u4e00\u81f4\u7684\uff0c\u9884\u8bbe\u53d1\u751f\u53d8\u5316\uff0c\u6240\u6709\u901a\u8fc7\u5176\u5b9e\u4f8b\u5316\u7684\u5bf9\u8c61\u90fd\u4f1a\u4ea7\u751f\u53d8\u5316\uff0c\u800c\u5bf9\u8c61\u514b\u9686\u672c\u4f53\u548c\u514b\u9686\u51fa\u7684\u5bf9\u8c61\u4e0d\u540c\uff0c\u5176\u4e0d\u53d7\u672c\u4f53\u6539\u53d8\u5f71\u54cd\u3002\n\n\n\n\n\n\n\n\n\u5c1d\u8bd5\u89e3\u91ca\u7ec4\u5408\u6a21\u5f0f\uff08Composite Pattern / \u4e00\u79cd\u8bbe\u8ba1\u6a21\u5f0f\uff09\u3002\u4f7f\u7528 BroadcastMessage() \u65b9\u6cd5\n\n\n\n\n\u5411\u5b50\u5bf9\u8c61\u53d1\u9001\u6d88\u606f\n\n\n\n\n\n\n\u7ec4\u5408\u6a21\u5f0f\u5141\u8bb8\u7528\u6237\u5c06\u5bf9\u8c61\u7ec4\u5408\u6210\u6811\u5f62\u7ed3\u6784\u6765\u8868\u73b0\u201d\u90e8\u5206-\u6574\u4f53\u201c\u7684\u5c42\u6b21\u7ed3\u6784\uff0c\u4f7f\u5f97\u5ba2\u6237\u4ee5\u4e00\u81f4\u7684\u65b9\u5f0f\u5904\u7406\u5355\u4e2a\u5bf9\u8c61\u4ee5\u53ca\u5bf9\u8c61\u7684\u7ec4\u5408\u3002\u7ec4\u5408\u6a21\u5f0f\u5b9e\u73b0\u7684\u6700\u5173\u952e\u7684\u5730\u65b9\u662f\u2014\u2014\u7b80\u5355\u5bf9\u8c61\u548c\u590d\u5408\u5bf9\u8c61\u5fc5\u987b\u5b9e\u73b0\u76f8\u540c\u7684\u63a5\u53e3\u3002\u8fd9\u5c31\u662f\u7ec4\u5408\u6a21\u5f0f\u80fd\u591f\u5c06\u7ec4\u5408\u5bf9\u8c61\u548c\u7b80\u5355\u5bf9\u8c61\u8fdb\u884c\u4e00\u81f4\u5904\u7406\u7684\u539f\u56e0\u3002\n\n\n\n\n\n\n\n\n//\u7236\u5bf9\u8c61\n\n\npublic\n \nclass\n \nchild\n:\n \nMonoBehaviour\n \n{\n\n    \nvoid\n \nStart\n \n()\n \n{\n\n        \nthis\n.\nBroadcastMessage\n(\ngetMessage\n,\n \ntest\n);\n\n    \n}\n\n\n    \nvoid\n \ngetMessage\n(\nstring\n \nmsg\n)\n \n{\n\n        \nDebug\n.\nLog\n(\nGet msg: \n \n+\n \nmsg\n);\n\n    \n}\n\n\n}\n\n\n//\u5b50\u5bf9\u8c61\n\n\npublic\n \nclass\n \nchild\n:\n \nMonoBehaviour\n \n{\n\n    \nvoid\n \ngetMessage\n(\nstring\n \nmsg\n)\n \n{\n\n        \nDebug\n.\nLog\n(\nGet msg: \n \n+\n \nmsg\n);\n\n    \n}\n\n\n}\n\n\n\n\n\n\n2.\u7f16\u7a0b\u5b9e\u8df5\uff0c\u5c0f\u6e38\u620f\n\n\n\n\n\n\n\u5b9e\u8df5\u90e8\u5206\u9009\u62e9\u7684\u6e38\u620f\u5185\u5bb9\u4e3a: \u4e95\u5b57\u68cb\n\n\n\u9996\u5148\uff0c\u6839\u636e\u8001\u5e08\u7684\u53ea\u80fd\u4f7f\u7528IMGUI\u6784\u5efaUI\u7684\u8981\u6c42\uff0c\u5b66\u4e60\u4e86OnGUI\u7684\u7528\u6cd5\uff0c\u5f97\u77e5OnGUI\u5c31\u662f\u4e00\u4e2aUnity\u63d0\u4f9b\u7684\u7528\u4e8e\u7ed8\u5236\u6bcf\u4e00\u5e27\u754c\u9762\u7684\u51fd\u6570\uff0c\u548cUpdate\u4e00\u6837\u5728\u6bcf\u4e00\u5e27\u90fd\u4f1a\u88ab\u8c03\u7528\u3002\u7406\u89e3\u539f\u7406\u4e4b\u540e\u5c31\u5341\u5206\u7b80\u5355\u4e86\uff0c\u6211\u4eec\u53ea\u9700\u8981\u7ef4\u62a4\u597d\u68cb\u76d8\u7684\u72b6\u6001\uff0c\u8bb0\u5f55\u597d\u68cb\u76d8\u7684\u6570\u636e\uff0c\u7136\u540e\u901a\u8fc7GUI\u51fd\u6570\u628a\u5f53\u524d\u7684\u68cb\u76d8\u6e32\u67d3\u51fa\u6765\u5c31\u53ef\u4ee5\u4e86\uff0c\u7f16\u7a0b\u96be\u5ea6\u5e76\u4e0d\u5927\uff0c\u6240\u4ee5\u9996\u5148\u5728\u7c7b\u4e2d\u5b9a\u4e49\u597d\u9700\u8981\u7528\u5230\u7684\u6570\u636e\uff0c\u5e76\u5b8c\u6210\u521d\u59cb\u5316\u7684\u51fd\u6570\n\n\n\n\n\n\nprivate\n \nint\n[,]\n \ngameBoxStatus\n \n=\n \nnew\n \nint\n[\n3\n,\n \n3\n];\n \n//\u7528\u4e8e\u4fdd\u5b58\u68cb\u76d8\u6570\u636e\n\n\nprivate\n \nint\n \ngameStatus\n \n=\n \n0\n;\n \n//\u8bb0\u5f55\u6e38\u620f\u72b6\u6001\n\n\nprivate\n \nint\n \nterm\n \n=\n \n1\n;\n \n//\u8bb0\u5f55\u5f53\u524d\u8f6e\u5230\u54ea\u4e2a\u73a9\u5bb6\n\n\n\nvoid\n \ninitialGameInfo\n \n()\n \n{\n\n    \ngameStatus\n \n=\n \n0\n;\n\n    \nterm\n \n=\n \n1\n;\n\n    \nfor\n \n(\nint\n \ni\n \n=\n \n0\n;\n \ni\n \n \n3\n;\n \ni\n++)\n\n        \nfor\n \n(\nint\n \nj\n \n=\n \n0\n;\n \nj\n \n \n3\n;\n \nj\n++)\n\n            \ngameBoxStatus\n[\ni\n,\nj\n]\n \n=\n \n0\n;\n\n\n}\n\n\n\n\n\n\n\u5199\u597d\u8fd9\u4e2a\u4e4b\u540e\u5c31\u662fOnGUI\u90e8\u5206\u7684\u5f00\u53d1\u4e86,\u5176\u5b9e\u5173\u952e\u7684\u5c31\u662f\u6839\u636e\u4e8c\u7ef4\u6570\u7ec4\u4e2d\u7684\u6570\u636e\u7528\u4e00\u4e2a\u4e24\u91cd\u5faa\u73af\u6e32\u67d3\u51fa\u68cb\u76d8\uff0cOnGUI\u4ee3\u7801\u5982\u4e0b\n\n\nvoid\n \nOnGUI\n \n()\n \n{\n\n    \nGUIStyle\n \nheaderStyle\n \n=\n \nnew\n \nGUIStyle\n \n();\n\n    \nheaderStyle\n.\nnormal\n.\ntextColor\n \n=\n \nnew\n \nColor\n \n(\n255\n,\n \n255\n,\n \n255\n);\n\n    \nheaderStyle\n.\nfontSize\n \n=\n \n40\n;\n\n    \nGUIStyle\n \ngameInfoStyle\n \n=\n \nnew\n \nGUIStyle\n \n();\n\n    \ngameInfoStyle\n.\nnormal\n.\ntextColor\n \n=\n \nnew\n \nColor\n \n(\n255\n,\n \n255\n,\n \n255\n);\n\n    \ngameInfoStyle\n.\nfontSize\n \n=\n \n25\n;\n\n    \nGUI\n.\nLabel\n(\nnew\n \nRect\n(\n300\n,\n60\n,\n200\n,\n100\n),\n \nSimple Chess Game\n,\n \nheaderStyle\n);\n\n\n    \n/**\n\n\n    * gameStatus == 0, \u4ee3\u8868\u6e38\u620f\u72b6\u6001\u4e3a\u9009\u62e9\u8c01\u5148\u4e0b\u7684\u72b6\u6001\uff0c\u672a\u5f00\u59cb\u6e38\u620f;\n\n\n    * gameStatus == 1, \u4ee3\u8868\u6e38\u620f\u5df2\u5f00\u59cb\uff0c\u6e32\u67d3\u51fa\u68cb\u76d8\n\n\n    * gameStatus == 3, \u4ee3\u8868\u6e38\u620f\u5df2\u7ecf\u7ed3\u675f\uff0c\u6e32\u67d3\u51fa\u6e38\u620f\u7ed3\u679c\n\n\n    */\n\n\n    \nif\n \n(\ngameStatus\n \n==\n \n0\n)\n \n{\n\n        \nGUI\n.\nLabel\n \n(\nnew\n \nRect\n \n(\nxpos\n,\n \nypos\n,\n \n100\n,\n \n50\n),\n \nWho first?\n,\n \ngameInfoStyle\n);\n\n        \nif\n \n(\nGUI\n.\nButton\n \n(\nnew\n \nRect\n \n(\nxpos\n,\n \nypos\n \n+\n \n60\n,\n \n100\n,\n \n50\n),\n \nO\n))\n \n{\n\n            \nterm\n \n=\n \n1\n;\n\n            \ngameStatus\n \n=\n \n1\n;\n\n        \n}\n\n        \nif\n \n(\nGUI\n.\nButton\n \n(\nnew\n \nRect\n \n(\nxpos\n,\n \nypos\n \n+\n \n120\n,\n \n100\n,\n \n50\n),\n \nX\n))\n \n{\n\n            \nterm\n \n=\n \n2\n;\n\n            \ngameStatus\n \n=\n \n1\n;\n\n        \n}\n\n    \n}\n \nelse\n \nif\n \n(\ngameStatus\n \n==\n \n1\n)\n \n{\n\n        \nif\n \n(\nGUI\n.\nButton\n \n(\nnew\n \nRect\n \n(\nxpos\n+\n25\n,\n \nypos\n \n+\n \n180\n,\n \n100\n,\n \n50\n),\n \nReset\n))\n\n            \ninitialGameInfo\n \n();\n\n        \nint\n \nresult\n \n=\n \ncheckWin\n \n();\n//\u68c0\u67e5\u662f\u5426\u4ea7\u751f\u6e38\u620f\u7ed3\u679c\n\n        \nif\n \n(\nresult\n \n==\n \n1\n)\n \n{\n\n            \nWinner\n \n=\n \n1\n;\n\n            \ngameStatus\n \n=\n \n2\n;\n\n        \n}\n \nelse\n \nif\n \n(\nresult\n \n==\n \n2\n)\n \n{\n\n            \nWinner\n \n=\n \n2\n;\n\n            \ngameStatus\n \n=\n \n2\n;\n\n        \n}\n \nelse\n \nif\n \n(\nresult\n \n==\n \n3\n)\n \n{\n\n            \nWinner\n \n=\n \n0\n;\n\n            \ngameStatus\n \n=\n \n2\n;\n\n        \n}\n\n        \nfor\n \n(\nint\n \ni\n \n=\n \n0\n;\n \ni\n \n \n3\n;\n \ni\n++)\n\n            \nfor\n \n(\nint\n \nj\n \n=\n \n0\n;\n \nj\n \n \n3\n;\n \nj\n++)\n \n{\n\n                \nif\n \n(\ngameBoxStatus\n \n[\ni\n,\n \nj\n]\n \n==\n \n1\n)\n\n                    \nGUI\n.\nButton\n \n(\nnew\n \nRect\n \n(\nxpos\n \n+\n \ni\n \n*\n \n50\n,\n \nypos\n \n+\n \nj\n \n*\n \n50\n,\n \n50\n,\n \n50\n),\n \nO\n);\n\n                \nif\n \n(\ngameBoxStatus\n \n[\ni\n,\n \nj\n]\n \n==\n \n2\n)\n\n                    \nGUI\n.\nButton\n \n(\nnew\n \nRect\n \n(\nxpos\n \n+\n \ni\n \n*\n \n50\n,\n \nypos\n \n+\n \nj\n \n*\n \n50\n,\n \n50\n,\n \n50\n),\n \nX\n);\n\n                \nif\n \n(\nGUI\n.\nButton\n \n(\nnew\n \nRect\n \n(\nxpos\n \n+\n \ni\n \n*\n \n50\n,\n \nypos\n \n+\n \nj\n \n*\n \n50\n,\n \n50\n,\n \n50\n),\n \n))\n \n{\n  \n                    \nif\n \n(\nresult\n \n==\n \n0\n)\n \n{\n  \n                        \ngameBoxStatus\n \n[\ni\n,\n \nj\n]\n \n=\n \nterm\n;\n  \n                        \nterm\n \n=\n \n(\nterm\n \n==\n \n2\n)\n \n?\n \n1\n \n:\n \n2\n;\n\n                    \n}\n  \n                \n}\n  \n            \n}\n\n    \n}\n \nelse\n \n{\n\n        \nif\n \n(\nWinner\n \n==\n \n0\n)\n \n{\n\n            \nGUI\n.\nLabel\n \n(\nnew\n \nRect\n \n(\nxpos\n+\n10\n,\n \nypos\n,\n \n100\n,\n \n50\n),\n \nNo one wins!\n,\n \ngameInfoStyle\n);\n\n        \n}\n \nelse\n \nif\n \n(\nWinner\n \n==\n \n1\n)\n \n{\n\n            \nGUI\n.\nLabel\n \n(\nnew\n \nRect\n \n(\nxpos\n+\n10\n,\n \nypos\n,\n \n100\n,\n \n50\n),\n \nO wins!\n,\n \ngameInfoStyle\n);\n\n        \n}\n \nelse\n \n{\n\n            \nGUI\n.\nLabel\n \n(\nnew\n \nRect\n \n(\nxpos\n+\n10\n,\n \nypos\n,\n \n100\n,\n \n50\n),\n \nX wins!\n,\n \ngameInfoStyle\n);\n\n        \n}\n\n        \nif\n \n(\nGUI\n.\nButton\n \n(\nnew\n \nRect\n \n(\nxpos\n,\n \nypos\n+\n70\n,\n \n100\n,\n \n50\n),\n \nReset\n))\n\n            \ninitialGameInfo\n \n();\n\n    \n}\n\n\n}\n\n\n\n\n\n\n\u5728\u5b8c\u6210\u4e86OnGUI\u4ee5\u53ca\u521d\u59cb\u5316\u51fd\u6570\u540e\uff0c\u5c31\u5269\u4e0bCheckWin\u51fd\u6570\u4e86\uff0c\u5176\u5b9e\u4e5f\u6bd4\u8f83\u7b80\u5355\u5177\u4f53\u4ee3\u7801\u5982\u4e0b,\u5c31\u662f\u5faa\u73af\u5404\u4e2a\u7ed3\u679c\u770b\u6709\u6ca1\u6ee1\u8db3\u80dc\u5229\u6761\u4ef6\uff0c\u4ee5\u53ca\u5224\u65ad\u5f53\u524d\u662f\u5426\u5e73\u5c40\uff0c\u8fd4\u56de\u6e38\u620f\u7ed3\u679c(0:\u6e38\u620f\u672a\u7ed3\u675f\uff0c1:\u80dc\u8005\u4e3a1(O), 2: \u80dc\u8005\u4e3a2(X))\n\n\nint\n \ncheckWin\n \n()\n \n{\n\n    \nfor\n \n(\nint\n \ni\n \n=\n \n0\n;\n \ni\n \n \n3\n;\n \ni\n++)\n \n{\n\n       \nif\n \n(\ngameBoxStatus\n \n[\n0\n,\n \ni\n]\n \n!=\n \n0\n \n \ngameBoxStatus\n \n[\n0\n,\n \ni\n]\n \n==\n \ngameBoxStatus\n \n[\n1\n,\n \ni\n]\n \n \ngameBoxStatus\n \n[\n1\n,\n \ni\n]\n \n==\n \ngameBoxStatus\n \n[\n2\n,\n \ni\n])\n\n           \nreturn\n \ngameBoxStatus\n \n[\n0\n,\n \ni\n];\n\n       \nif\n \n(\ngameBoxStatus\n \n[\ni\n,\n \n0\n]\n \n!=\n \n0\n \n \ngameBoxStatus\n \n[\ni\n,\n \n0\n]\n \n==\n \ngameBoxStatus\n \n[\ni\n,\n \n1\n]\n \n \ngameBoxStatus\n \n[\ni\n,\n \n1\n]\n \n==\n \ngameBoxStatus\n \n[\ni\n,\n \n2\n])\n\n           \nreturn\n \ngameBoxStatus\n \n[\ni\n,\n \n0\n];\n\n    \n}\n\n    \nif\n \n((\ngameBoxStatus\n \n[\n1\n,\n \n1\n]\n \n!=\n \n0\n \n \ngameBoxStatus\n \n[\n0\n,\n \n0\n]\n \n==\n \ngameBoxStatus\n \n[\n1\n,\n \n1\n]\n \n \ngameBoxStatus\n \n[\n1\n,\n \n1\n]\n \n==\n \ngameBoxStatus\n \n[\n2\n,\n \n2\n])\n \n||\n\n      \n(\ngameBoxStatus\n \n[\n0\n,\n \n2\n]\n \n==\n \ngameBoxStatus\n \n[\n1\n,\n \n1\n]\n \n \ngameBoxStatus\n \n[\n1\n,\n \n1\n]\n \n==\n \ngameBoxStatus\n \n[\n2\n,\n \n0\n]))\n\n        \nreturn\n \ngameBoxStatus\n \n[\n1\n,\n \n1\n];\n\n    \nbool\n \nflag\n \n=\n \ntrue\n;\n\n    \nfor\n \n(\nint\n \ni\n \n=\n \n0\n;\n \ni\n \n \n3\n;\n \ni\n++)\n\n       \nfor\n \n(\nint\n \nj\n \n=\n \n0\n;\n \nj\n \n \n3\n;\n \nj\n++)\n \n{\n\n          \nif\n \n(\ngameBoxStatus\n[\ni\n,\nj\n]\n \n==\n \n0\n)\n \n{\n\n              \nflag\n \n=\n \nfalse\n;\n\n          \n}\n\n       \n}\n\n    \nreturn\n \n(\nflag\n)\n \n?\n \n3\n \n:\n \n0\n;\n\n\n}\n\n\n\n\n\n\n\n\nV2\u7248\u672c\u4e2d\u65b0\u52a0\u5165\u4e86\u8ba1\u5206\u7684\u529f\u80fd\uff0c\u5b9e\u73b0\u90e8\u5206\u4e5f\u5341\u5206\u7b80\u6613\uff0c\u5728\u672c\u7c7b\u4e2d\u6dfb\u52a0Oscore, Xscore\u53d8\u91cf\uff0c\u7136\u540e\u901a\u8fc7\u5bf9\u8fd9\u4e24\u4e2a\u53d8\u91cf\u7684\u7ef4\u62a4\u5373\u53ef\u5b8c\u6210\u8be5\u529f\u80fd\uff0c\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0cOnGUI\u662f\u6bcf\u4e00\u5e27\u5237\u65b0\u7684\uff0c\u6240\u4ee5\u51b3\u51fa\u80dc\u8005\u4e4b\u540e\uff0c\u6211\u4eec\u5e94\u8be5\u4fdd\u8bc1\u589e\u52a0score\u7684\u4ee3\u7801\u53ea\u88ab\u6267\u884c\u4e00\u6b21\u3002\u4ee3\u7801\u5c31\u4e0d\u518d\u5728\u8fd9\u91cc\u8d58\u8ff0\u4e86\uff0c\u6709\u5174\u8da3\u7684\u53ef\u4ee5\u901a\u8fc7\u6211\u7684github\u67e5\u770b\u5b8c\u6574\u7684\u4ee3\u7801\uff0c\u4f20\u9001\u95e8\u5c31\u5728\u9875\u5c3e\ud83d\ude43\n\n\n\n\n\u5230\u8fd9\u91cc\u6574\u4e2a\u6e38\u620f\u5c31\u5b8c\u6210\u4e86\uff0c\u6e38\u620f\u7684\u6574\u4e2a\u4ee3\u7801\u6211\u5c31\u4e0d\u5728\u8fd9\u91cc\u8d34\u51fa\u6765\u4e86\uff0c\u8bbf\u95ee\u6211\u7684Github\u5c31\u53ef\u4ee5\u770b\u5230\u4ee3\u7801\u4ee5\u53ca\u6f14\u793a\u89c6\u9891\u4e86,\u4e0b\u9762\u662f\u94fe\u63a5:\ngithub@zhongwq/Unity3D-Learning/week1", 
            "title": "\u5b66\u4e60\u7b14\u8bb01-GUI\u4e95\u5b57\u68cb"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb01-GUI\u4e95\u5b57\u68cb/#1-gui", 
            "text": "", 
            "title": "\u5b66\u4e60\u7b14\u8bb01-GUI\u4e95\u5b57\u68cb"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb01-GUI\u4e95\u5b57\u68cb/#1", 
            "text": "\u89e3\u91ca \u6e38\u620f\u5bf9\u8c61\uff08GameObjects\uff09 \u548c \u8d44\u6e90\uff08Assets\uff09\u7684\u533a\u522b\u4e0e\u8054\u7cfb\u3002   \u8d44\u6e90(Assets)\u662f\u5305\u542b\u5728\u6e38\u620f\u6587\u4ef6\u4e2d\uff0c\u4e3a\u6e38\u620f\u5bf9\u8c61\u6240\u4f7f\u7528\u7684\uff0c\u4e00\u4e2a\u8d44\u6e90\u53ef\u4ee5\u88ab\u4e00\u4e2a\u6216\u591a\u4e2a\u5bf9\u8c61\u4f7f\u7528\u3002\u800c\u5bf9\u8c61\u51fa\u73b0\u5728\u6e38\u620f\u573a\u666f(Scene)\u4e2d\uff0c\u662fComponents\u3001\u8d44\u6e90\u6574\u5408\u5728\u4e00\u8d77\u7684\u7ed3\u679c\u3002     \u4e0b\u8f7d\u51e0\u4e2a\u6e38\u620f\u6848\u4f8b\uff0c\u5206\u522b\u603b\u7ed3\u8d44\u6e90\u3001\u5bf9\u8c61\u7ec4\u7ec7\u7684\u7ed3\u6784   \u5206\u6790\u4e0b\u8f7d\u7684\u6e38\u620f\u6848\u4f8b  1.\u8d44\u6e90\u6587\u4ef6\u5939\u901a\u5e38\u6709\u5bf9\u8c61\u3001\u6750\u8d28\u3001\u573a\u666f\u3001\u58f0\u97f3\u3001\u9884\u8bbe\u3001\u8d34\u56fe\u3001\u811a\u672c\u3001\u52a8\u4f5c\uff0c\u5728\u8fd9\u4e9b\u6587\u4ef6\u5939\u4e0b\u53ef\u4ee5\u7ee7\u7eed\u5212\u5206\u3002  2.\u5bf9\u8c61\u4e2d\u4e00\u822c\u6709\u73a9\u5bb6\u3001\u654c\u4eba\u3001\u73af\u5883\u3001\u6444\u50cf\u673a\u548c\u97f3\u4e50\u7b49\u865a\u62df\u7236\u7c7b\uff0c\u8fd9\u4e9b\u7236\u7c7b\u672c\u8eab\u6ca1\u6709\u5b9e\u4f53\uff0c\u4f46\u4ed6\u4eec\u7684\u5b50\u7c7b\u5305\u542b\u4e86\u6e38\u620f\u4e2d\u4f1a\u51fa\u73b0\u7684\u5bf9\u8c61\u3002     \u7f16\u5199\u4e00\u4e2a\u4ee3\u7801\uff0c\u4f7f\u7528 debug \u8bed\u53e5\u6765\u9a8c\u8bc1 MonoBehaviour \u57fa\u672c\u884c\u4e3a\u6216\u4e8b\u4ef6\u89e6\u53d1\u7684\u6761\u4ef6   \u57fa\u672c\u884c\u4e3a\u5305\u62ec Awake() Start() Update() FixedUpdate() LateUpdate()  \u5e38\u7528\u4e8b\u4ef6\u5305\u62ec OnGUI() OnDisable() OnEnable()     public   class   testBasicBehaviour   :   MonoBehaviour   { \n     void   Awake ()   { \n         Debug . Log   ( onAwake ); \n     } \n     void   Start   ()   { \n         Debug . Log   ( onStart ); \n     } \n     void   Update   ()   { \n         Debug . Log   ( onUpdate ); \n     } \n     void   FixedUpdate ()   { \n         Debug . Log   ( onFixedUpdate ); \n     } \n     void   LateUpdate ()   { \n         Debug . Log   ( onLateUpdate ); \n     } \n     void   OnGUI ()   { \n         Debug . Log   ( onGUI ); \n     } \n     void   Reset ()   { \n         Debug . Log   ( onReset ); \n     } \n     void   OnDisable ()   { \n         Debug . Log   ( onDisable ); \n     } \n     void   OnDestroy ()   { \n         Debug . Log   ( onDestroy ); \n     }  }     \u67e5\u627e\u811a\u672c\u624b\u518c\uff0c\u4e86\u89e3 GameObject\uff0cTransform\uff0cComponent \u5bf9\u8c61    \u5206\u522b\u7ffb\u8bd1\u5b98\u65b9\u5bf9\u4e09\u4e2a\u5bf9\u8c61\u7684\u63cf\u8ff0\uff08Description\uff09    \u6e38\u620f\u5bf9\u8c61\u5728Unity\u4e2d\u662f\u4ee3\u8868\u7740\u6e38\u620f\u7269\u4ef6\u3001\u9053\u5177\u4ee5\u53ca\u6e38\u620f\u573a\u666f\u7684\u57fa\u672c\u5bf9\u8c61\u3002\u5b83\u4eec\u672c\u8eab\u6ca1\u6709\u5b8c\u6210\u592a\u591a\u5185\u5bb9\uff0c\u4f46\u5b83\u4eec\u5145\u5f53\u7740\u7ec4\u4ef6\u7684\u5bb9\u5668\uff0c\u8ba9\u5f00\u53d1\u8005\u5b9e\u73b0\u771f\u6b63\u7684\u529f\u80fd\u3002  Transform\u5c5e\u6027\u5b9a\u4e49\u4e86\u7ec4\u4ef6\u7684\u4f4d\u7f6e\uff0c\u65cb\u8f6c\u89d2\u5ea6\uff0c\u5404\u4e2a\u65b9\u5411\u7684\u5927\u5c0f\u6bd4\u4f8b\uff08\u7f29\u653e\uff09\u3002\u6bcf\u4e00\u4e2a\u6e38\u620f\u5bf9\u8c61(GameObject)\u90fd\u6709\u7740\u4e00\u4e2aTransform\u3002  \u7ec4\u4ef6\u662f\u6e38\u620f\u4e2d\u7269\u4f53\u548c\u884c\u4e3a\u7684\u87ba\u6bcd\u548c\u87ba\u6813, \u5b83\u4eec\u662f\u6bcf\u4e2a\u6e38\u620f\u5bf9\u8c61\u7684\u529f\u80fd\u5757\u3002\u4e00\u4e2a\u6e38\u620f\u5bf9\u8c61\u662f\u8bb8\u591a\u4e0d\u540c\u7684\u7ec4\u4ef6\u7684\u5bb9\u5668\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6240\u6709\u7684\u6e38\u620f\u5bf9\u8c61\u81ea\u52a8\u62e5\u6709Transform\u7ec4\u4ef6\u3002\u8fd9\u662f\u56e0\u4e3aTransform\u7ec4\u4ef6\u51b3\u5b9a\u4e86\u6e38\u620f\u5bf9\u8c61\u7684\u4f4d\u7f6e\uff0c\u4ee5\u53ca\u5b83\u5982\u4f55\u65cb\u8f6c\u548c\u7f29\u653e\u3002\u6ca1\u6709Transform\u7ec4\u4ef6\u7684\u6e38\u620f\u5bf9\u8c61\uff0c\u4e0d\u4f1a\u5728World\u4e2d\u5b58\u5728\u3002      \u63cf\u8ff0\u4e0b\u56fe\u4e2d table \u5bf9\u8c61\uff08\u5b9e\u4f53\uff09\u7684\u5c5e\u6027\u3001table \u7684 Transform \u7684\u5c5e\u6027\u3001 table \u7684 \u90e8\u4ef6   \u8be5table\u5bf9\u8c61\u7684\u5c5e\u6027\uff08component\uff09\u6709\u5982\u4e0b:\n      1. Transform\u63cf\u8ff0\u4e86table\u5bf9\u8c61\u7684\u4f4d\u7f6e\uff0c\u65cb\u8f6c\u89d2\u5ea6\uff0c\u7f29\u653e, \u56fe\u4e2d\u7684\u5c5e\u6027\u4e3a,\u4f4d\u7f6e(0,0,0), \u65cb\u8f6c(0,0,0),\u6bd4\u4f8b\u4e3a(100%, 100%, 100%);    Mesh Filter\u7f51\u683c\u8fc7\u6ee4\u5668\u63cf\u8ff0\u4e86\u51e0\u4f55\u4f53\u7684\u5f62\u72b6,\u56fe\u4e2dtable\u4e3aCube\uff08\u7acb\u65b9\u4f53\uff09    Box Colider\u5219\u63cf\u8ff0\u4e86\u7269\u4f53\u7684\u78b0\u649e\u8303\u56f4\uff0c\u56fe\u4e2d\u7684\u78b0\u649e\u8303\u56f4\u4e3a\u4ee5(0,0,0),(1,0,0),(0,1,0),(1,1,0),(0,0,1),(1,0,1),(0,1,1),(1,1,1)\u4e3a\u9876\u70b9\u7684\u4e00\u4e2a\u6b63\u65b9\u4f53    Mesh Renderer\u7f51\u683c\u6e32\u67d3\u5668\u5219\u4ece\u7f51\u683c\u8fc7\u6ee4\u5668\u4e2d\u83b7\u5f97\u51e0\u4f55\u4f53\u7684\u5f62\u72b6\u7136\u540e\u6839\u636e\u8981\u6c42\u8fdb\u884c\u6e32\u67d3\u3002\u56fe\u4e2d\u7684\u5c5e\u6027\u4e3a Cast Shadows(\u6295\u5c04\u9634\u5f71\u65b9\u5f0f)\u5f00\u542f,\u63a5\u53d7\u9634\u5f71 Motion Vectors\uff08\u8fd0\u52a8\u5411\u91cf\u751f\u6210\u65b9\u5f0f\uff09\u4e3aPerObject Motion\uff08\u4f1a\u6e32\u67d3\u51fa\u4e00\u4e2a\u201c\u6bcf\u4e2a\u5bf9\u8c61\u201d\u8fd0\u52a8\u5411\u91cf\u901a\u9053\uff09\uff0c\u6750\u8d28\u4e3a\u9ed8\u8ba4\u6750\u8d28\uff0cLight Probes\uff08\u5149\u63a2\u5934\u63d2\u503c\u65b9\u5f0f\uff09\u4ee5\u53caReflection Probes\uff08\u53cd\u5c04\u63a2\u5934\u90fd\u4e3a\u6df7\u5408\uff09\uff0cAnchor Override\u4e3a\u5f53\u4f7f\u7528\u5149\u63a2\u5934\u6216\u53cd\u5c04\u63a2\u5934\u7cfb\u7edf\u65f6\uff0c\u7528\u6765\u51b3\u5b9a\u63d2\u503c\u4f4d\u7f6e\u7684Transform\uff0c\u56fe\u4e2d\u672a\u5b9a\u4e49\u8be5Transform\u3002       \u7528 UML \u56fe\u63cf\u8ff0 \u4e09\u8005\u7684\u5173\u7cfb\uff08\u8bf7\u4f7f\u7528 UMLet 14.1.1 stand-alone\u7248\u672c\u51fa\u56fe\uff09      \u6574\u7406\u76f8\u5173\u5b66\u4e60\u8d44\u6599\uff0c\u7f16\u5199\u7b80\u5355\u4ee3\u7801\u9a8c\u8bc1\u4ee5\u4e0b\u6280\u672f\u7684\u5b9e\u73b0\uff1a(\u67e5\u627e\u5bf9\u8c61\u3001\u6dfb\u52a0\u5b50\u5bf9\u8c61\u3001\u904d\u5386\u5bf9\u8c61\u6811\u3001\u6e05\u9664\u6240\u6709\u5b50\u5bf9\u8c61)    //\u67e5\u627e\u5bf9\u8c61  public   static   GameObject   Find ( string   name ) //\u901a\u8fc7\u540d\u5b57\u67e5\u627e  public   static   GameObject   FindWithTag ( string   tag ) //\u901a\u8fc7\u6807\u7b7e\u67e5\u627e\u5355\u4e2a\u5bf9\u8c61  public   static   GameObject []   FindGameObjectsWithTag ( string   tag ) //\u901a\u8fc7\u6807\u7b7e\u67e5\u627e\u591a\u4e2a\u5bf9\u8c61  //\u6dfb\u52a0\u5b50\u5bf9\u8c61  public   static   GameObect   CreatePrimitive ( PrimitiveTypetype )  //\u904d\u5386\u5bf9\u8c61\u6811  foreach   ( Transform   child   in   transform )   { \n      Debug . Log ( child . gameObject . name );  }  //\u6e05\u9664\u6240\u6709\u5b50\u5bf9\u8c61  foreach   ( Transform   child   in   transform )   { \n       Destroy ( child . gameObject );  }     \u9884\u8bbe\uff08Prefabs\uff09\u6709\u4ec0\u4e48\u597d\u5904\uff1f\u4e0e\u5bf9\u8c61\u514b\u9686 (clone or copy or Instantiate of Unity Object) \u5173\u7cfb\uff1f   Unity\u901a\u8fc7\u9884\u8bbe\uff08Prefabs\uff09\u5b8c\u6574\u5730\u50a8\u5b58\u4e86\u5bf9\u8c61\u7684\u7ec4\u4ef6\u3001\u5c5e\u6027\u7b49\u5185\u5bb9\uff0c\u65b9\u4fbf\u5f00\u53d1\u8005\u521b\u5efa\u5177\u6709\u76f8\u540c\u5c5e\u6027\u7684\u5bf9\u8c61,\u65b9\u4fbf\u4e86\u5bf9\u8c61\u7684\u590d\u7528\u3002\u5bf9\u8c61\u514b\u9686\u4e0e\u9884\u8bbe\u4e0d\u540c\u7684\u5730\u65b9\u5c31\u5728\u4e8e\uff0c\u9884\u8bbe\u4e0e\u5b9e\u4f8b\u5316\u7684\u5bf9\u8c61\u662f\u4e00\u81f4\u7684\uff0c\u9884\u8bbe\u53d1\u751f\u53d8\u5316\uff0c\u6240\u6709\u901a\u8fc7\u5176\u5b9e\u4f8b\u5316\u7684\u5bf9\u8c61\u90fd\u4f1a\u4ea7\u751f\u53d8\u5316\uff0c\u800c\u5bf9\u8c61\u514b\u9686\u672c\u4f53\u548c\u514b\u9686\u51fa\u7684\u5bf9\u8c61\u4e0d\u540c\uff0c\u5176\u4e0d\u53d7\u672c\u4f53\u6539\u53d8\u5f71\u54cd\u3002     \u5c1d\u8bd5\u89e3\u91ca\u7ec4\u5408\u6a21\u5f0f\uff08Composite Pattern / \u4e00\u79cd\u8bbe\u8ba1\u6a21\u5f0f\uff09\u3002\u4f7f\u7528 BroadcastMessage() \u65b9\u6cd5   \u5411\u5b50\u5bf9\u8c61\u53d1\u9001\u6d88\u606f    \u7ec4\u5408\u6a21\u5f0f\u5141\u8bb8\u7528\u6237\u5c06\u5bf9\u8c61\u7ec4\u5408\u6210\u6811\u5f62\u7ed3\u6784\u6765\u8868\u73b0\u201d\u90e8\u5206-\u6574\u4f53\u201c\u7684\u5c42\u6b21\u7ed3\u6784\uff0c\u4f7f\u5f97\u5ba2\u6237\u4ee5\u4e00\u81f4\u7684\u65b9\u5f0f\u5904\u7406\u5355\u4e2a\u5bf9\u8c61\u4ee5\u53ca\u5bf9\u8c61\u7684\u7ec4\u5408\u3002\u7ec4\u5408\u6a21\u5f0f\u5b9e\u73b0\u7684\u6700\u5173\u952e\u7684\u5730\u65b9\u662f\u2014\u2014\u7b80\u5355\u5bf9\u8c61\u548c\u590d\u5408\u5bf9\u8c61\u5fc5\u987b\u5b9e\u73b0\u76f8\u540c\u7684\u63a5\u53e3\u3002\u8fd9\u5c31\u662f\u7ec4\u5408\u6a21\u5f0f\u80fd\u591f\u5c06\u7ec4\u5408\u5bf9\u8c61\u548c\u7b80\u5355\u5bf9\u8c61\u8fdb\u884c\u4e00\u81f4\u5904\u7406\u7684\u539f\u56e0\u3002     //\u7236\u5bf9\u8c61  public   class   child :   MonoBehaviour   { \n     void   Start   ()   { \n         this . BroadcastMessage ( getMessage ,   test ); \n     } \n\n     void   getMessage ( string   msg )   { \n         Debug . Log ( Get msg:    +   msg ); \n     }  }  //\u5b50\u5bf9\u8c61  public   class   child :   MonoBehaviour   { \n     void   getMessage ( string   msg )   { \n         Debug . Log ( Get msg:    +   msg ); \n     }  }", 
            "title": "1. \u7b80\u7b54\u9898"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb01-GUI\u4e95\u5b57\u68cb/#2", 
            "text": "\u5b9e\u8df5\u90e8\u5206\u9009\u62e9\u7684\u6e38\u620f\u5185\u5bb9\u4e3a: \u4e95\u5b57\u68cb  \u9996\u5148\uff0c\u6839\u636e\u8001\u5e08\u7684\u53ea\u80fd\u4f7f\u7528IMGUI\u6784\u5efaUI\u7684\u8981\u6c42\uff0c\u5b66\u4e60\u4e86OnGUI\u7684\u7528\u6cd5\uff0c\u5f97\u77e5OnGUI\u5c31\u662f\u4e00\u4e2aUnity\u63d0\u4f9b\u7684\u7528\u4e8e\u7ed8\u5236\u6bcf\u4e00\u5e27\u754c\u9762\u7684\u51fd\u6570\uff0c\u548cUpdate\u4e00\u6837\u5728\u6bcf\u4e00\u5e27\u90fd\u4f1a\u88ab\u8c03\u7528\u3002\u7406\u89e3\u539f\u7406\u4e4b\u540e\u5c31\u5341\u5206\u7b80\u5355\u4e86\uff0c\u6211\u4eec\u53ea\u9700\u8981\u7ef4\u62a4\u597d\u68cb\u76d8\u7684\u72b6\u6001\uff0c\u8bb0\u5f55\u597d\u68cb\u76d8\u7684\u6570\u636e\uff0c\u7136\u540e\u901a\u8fc7GUI\u51fd\u6570\u628a\u5f53\u524d\u7684\u68cb\u76d8\u6e32\u67d3\u51fa\u6765\u5c31\u53ef\u4ee5\u4e86\uff0c\u7f16\u7a0b\u96be\u5ea6\u5e76\u4e0d\u5927\uff0c\u6240\u4ee5\u9996\u5148\u5728\u7c7b\u4e2d\u5b9a\u4e49\u597d\u9700\u8981\u7528\u5230\u7684\u6570\u636e\uff0c\u5e76\u5b8c\u6210\u521d\u59cb\u5316\u7684\u51fd\u6570    private   int [,]   gameBoxStatus   =   new   int [ 3 ,   3 ];   //\u7528\u4e8e\u4fdd\u5b58\u68cb\u76d8\u6570\u636e  private   int   gameStatus   =   0 ;   //\u8bb0\u5f55\u6e38\u620f\u72b6\u6001  private   int   term   =   1 ;   //\u8bb0\u5f55\u5f53\u524d\u8f6e\u5230\u54ea\u4e2a\u73a9\u5bb6  void   initialGameInfo   ()   { \n     gameStatus   =   0 ; \n     term   =   1 ; \n     for   ( int   i   =   0 ;   i     3 ;   i ++) \n         for   ( int   j   =   0 ;   j     3 ;   j ++) \n             gameBoxStatus [ i , j ]   =   0 ;  }   \u5199\u597d\u8fd9\u4e2a\u4e4b\u540e\u5c31\u662fOnGUI\u90e8\u5206\u7684\u5f00\u53d1\u4e86,\u5176\u5b9e\u5173\u952e\u7684\u5c31\u662f\u6839\u636e\u4e8c\u7ef4\u6570\u7ec4\u4e2d\u7684\u6570\u636e\u7528\u4e00\u4e2a\u4e24\u91cd\u5faa\u73af\u6e32\u67d3\u51fa\u68cb\u76d8\uff0cOnGUI\u4ee3\u7801\u5982\u4e0b  void   OnGUI   ()   { \n     GUIStyle   headerStyle   =   new   GUIStyle   (); \n     headerStyle . normal . textColor   =   new   Color   ( 255 ,   255 ,   255 ); \n     headerStyle . fontSize   =   40 ; \n     GUIStyle   gameInfoStyle   =   new   GUIStyle   (); \n     gameInfoStyle . normal . textColor   =   new   Color   ( 255 ,   255 ,   255 ); \n     gameInfoStyle . fontSize   =   25 ; \n     GUI . Label ( new   Rect ( 300 , 60 , 200 , 100 ),   Simple Chess Game ,   headerStyle ); \n\n     /**      * gameStatus == 0, \u4ee3\u8868\u6e38\u620f\u72b6\u6001\u4e3a\u9009\u62e9\u8c01\u5148\u4e0b\u7684\u72b6\u6001\uff0c\u672a\u5f00\u59cb\u6e38\u620f;      * gameStatus == 1, \u4ee3\u8868\u6e38\u620f\u5df2\u5f00\u59cb\uff0c\u6e32\u67d3\u51fa\u68cb\u76d8      * gameStatus == 3, \u4ee3\u8868\u6e38\u620f\u5df2\u7ecf\u7ed3\u675f\uff0c\u6e32\u67d3\u51fa\u6e38\u620f\u7ed3\u679c      */ \n\n     if   ( gameStatus   ==   0 )   { \n         GUI . Label   ( new   Rect   ( xpos ,   ypos ,   100 ,   50 ),   Who first? ,   gameInfoStyle ); \n         if   ( GUI . Button   ( new   Rect   ( xpos ,   ypos   +   60 ,   100 ,   50 ),   O ))   { \n             term   =   1 ; \n             gameStatus   =   1 ; \n         } \n         if   ( GUI . Button   ( new   Rect   ( xpos ,   ypos   +   120 ,   100 ,   50 ),   X ))   { \n             term   =   2 ; \n             gameStatus   =   1 ; \n         } \n     }   else   if   ( gameStatus   ==   1 )   { \n         if   ( GUI . Button   ( new   Rect   ( xpos + 25 ,   ypos   +   180 ,   100 ,   50 ),   Reset )) \n             initialGameInfo   (); \n         int   result   =   checkWin   (); //\u68c0\u67e5\u662f\u5426\u4ea7\u751f\u6e38\u620f\u7ed3\u679c \n         if   ( result   ==   1 )   { \n             Winner   =   1 ; \n             gameStatus   =   2 ; \n         }   else   if   ( result   ==   2 )   { \n             Winner   =   2 ; \n             gameStatus   =   2 ; \n         }   else   if   ( result   ==   3 )   { \n             Winner   =   0 ; \n             gameStatus   =   2 ; \n         } \n         for   ( int   i   =   0 ;   i     3 ;   i ++) \n             for   ( int   j   =   0 ;   j     3 ;   j ++)   { \n                 if   ( gameBoxStatus   [ i ,   j ]   ==   1 ) \n                     GUI . Button   ( new   Rect   ( xpos   +   i   *   50 ,   ypos   +   j   *   50 ,   50 ,   50 ),   O ); \n                 if   ( gameBoxStatus   [ i ,   j ]   ==   2 ) \n                     GUI . Button   ( new   Rect   ( xpos   +   i   *   50 ,   ypos   +   j   *   50 ,   50 ,   50 ),   X ); \n                 if   ( GUI . Button   ( new   Rect   ( xpos   +   i   *   50 ,   ypos   +   j   *   50 ,   50 ,   50 ),   ))   {   \n                     if   ( result   ==   0 )   {   \n                         gameBoxStatus   [ i ,   j ]   =   term ;   \n                         term   =   ( term   ==   2 )   ?   1   :   2 ; \n                     }   \n                 }   \n             } \n     }   else   { \n         if   ( Winner   ==   0 )   { \n             GUI . Label   ( new   Rect   ( xpos + 10 ,   ypos ,   100 ,   50 ),   No one wins! ,   gameInfoStyle ); \n         }   else   if   ( Winner   ==   1 )   { \n             GUI . Label   ( new   Rect   ( xpos + 10 ,   ypos ,   100 ,   50 ),   O wins! ,   gameInfoStyle ); \n         }   else   { \n             GUI . Label   ( new   Rect   ( xpos + 10 ,   ypos ,   100 ,   50 ),   X wins! ,   gameInfoStyle ); \n         } \n         if   ( GUI . Button   ( new   Rect   ( xpos ,   ypos + 70 ,   100 ,   50 ),   Reset )) \n             initialGameInfo   (); \n     }  }   \u5728\u5b8c\u6210\u4e86OnGUI\u4ee5\u53ca\u521d\u59cb\u5316\u51fd\u6570\u540e\uff0c\u5c31\u5269\u4e0bCheckWin\u51fd\u6570\u4e86\uff0c\u5176\u5b9e\u4e5f\u6bd4\u8f83\u7b80\u5355\u5177\u4f53\u4ee3\u7801\u5982\u4e0b,\u5c31\u662f\u5faa\u73af\u5404\u4e2a\u7ed3\u679c\u770b\u6709\u6ca1\u6ee1\u8db3\u80dc\u5229\u6761\u4ef6\uff0c\u4ee5\u53ca\u5224\u65ad\u5f53\u524d\u662f\u5426\u5e73\u5c40\uff0c\u8fd4\u56de\u6e38\u620f\u7ed3\u679c(0:\u6e38\u620f\u672a\u7ed3\u675f\uff0c1:\u80dc\u8005\u4e3a1(O), 2: \u80dc\u8005\u4e3a2(X))  int   checkWin   ()   { \n     for   ( int   i   =   0 ;   i     3 ;   i ++)   { \n        if   ( gameBoxStatus   [ 0 ,   i ]   !=   0     gameBoxStatus   [ 0 ,   i ]   ==   gameBoxStatus   [ 1 ,   i ]     gameBoxStatus   [ 1 ,   i ]   ==   gameBoxStatus   [ 2 ,   i ]) \n            return   gameBoxStatus   [ 0 ,   i ]; \n        if   ( gameBoxStatus   [ i ,   0 ]   !=   0     gameBoxStatus   [ i ,   0 ]   ==   gameBoxStatus   [ i ,   1 ]     gameBoxStatus   [ i ,   1 ]   ==   gameBoxStatus   [ i ,   2 ]) \n            return   gameBoxStatus   [ i ,   0 ]; \n     } \n     if   (( gameBoxStatus   [ 1 ,   1 ]   !=   0     gameBoxStatus   [ 0 ,   0 ]   ==   gameBoxStatus   [ 1 ,   1 ]     gameBoxStatus   [ 1 ,   1 ]   ==   gameBoxStatus   [ 2 ,   2 ])   || \n       ( gameBoxStatus   [ 0 ,   2 ]   ==   gameBoxStatus   [ 1 ,   1 ]     gameBoxStatus   [ 1 ,   1 ]   ==   gameBoxStatus   [ 2 ,   0 ])) \n         return   gameBoxStatus   [ 1 ,   1 ]; \n     bool   flag   =   true ; \n     for   ( int   i   =   0 ;   i     3 ;   i ++) \n        for   ( int   j   =   0 ;   j     3 ;   j ++)   { \n           if   ( gameBoxStatus [ i , j ]   ==   0 )   { \n               flag   =   false ; \n           } \n        } \n     return   ( flag )   ?   3   :   0 ;  }    V2\u7248\u672c\u4e2d\u65b0\u52a0\u5165\u4e86\u8ba1\u5206\u7684\u529f\u80fd\uff0c\u5b9e\u73b0\u90e8\u5206\u4e5f\u5341\u5206\u7b80\u6613\uff0c\u5728\u672c\u7c7b\u4e2d\u6dfb\u52a0Oscore, Xscore\u53d8\u91cf\uff0c\u7136\u540e\u901a\u8fc7\u5bf9\u8fd9\u4e24\u4e2a\u53d8\u91cf\u7684\u7ef4\u62a4\u5373\u53ef\u5b8c\u6210\u8be5\u529f\u80fd\uff0c\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0cOnGUI\u662f\u6bcf\u4e00\u5e27\u5237\u65b0\u7684\uff0c\u6240\u4ee5\u51b3\u51fa\u80dc\u8005\u4e4b\u540e\uff0c\u6211\u4eec\u5e94\u8be5\u4fdd\u8bc1\u589e\u52a0score\u7684\u4ee3\u7801\u53ea\u88ab\u6267\u884c\u4e00\u6b21\u3002\u4ee3\u7801\u5c31\u4e0d\u518d\u5728\u8fd9\u91cc\u8d58\u8ff0\u4e86\uff0c\u6709\u5174\u8da3\u7684\u53ef\u4ee5\u901a\u8fc7\u6211\u7684github\u67e5\u770b\u5b8c\u6574\u7684\u4ee3\u7801\uff0c\u4f20\u9001\u95e8\u5c31\u5728\u9875\u5c3e\ud83d\ude43   \u5230\u8fd9\u91cc\u6574\u4e2a\u6e38\u620f\u5c31\u5b8c\u6210\u4e86\uff0c\u6e38\u620f\u7684\u6574\u4e2a\u4ee3\u7801\u6211\u5c31\u4e0d\u5728\u8fd9\u91cc\u8d34\u51fa\u6765\u4e86\uff0c\u8bbf\u95ee\u6211\u7684Github\u5c31\u53ef\u4ee5\u770b\u5230\u4ee3\u7801\u4ee5\u53ca\u6f14\u793a\u89c6\u9891\u4e86,\u4e0b\u9762\u662f\u94fe\u63a5: github@zhongwq/Unity3D-Learning/week1", 
            "title": "2.\u7f16\u7a0b\u5b9e\u8df5\uff0c\u5c0f\u6e38\u620f"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb02-\u7269\u4f53\u7684\u7a7a\u95f4\u4e0e\u8fd0\u52a8/", 
            "text": "Homework2\n\n\n\u7b80\u7b54\u9898\n\n\n1.\u6e38\u620f\u5bf9\u8c61\u8fd0\u52a8\u7684\u672c\u8d28\u662f\u4ec0\u4e48\uff1f\n\n\n\n\n\u6e38\u620f\u5bf9\u8c61\u8fd0\u52a8\u7684\u672c\u8d28\u5c31\u662f\u6e38\u620f\u5bf9\u8c61Transform\u7684\u6539\u53d8\n\n\n\n\n\n\n\u8bf7\u7528\u4e09\u79cd\u65b9\u6cd5\u4ee5\u4e0a\u65b9\u6cd5\uff0c\u5b9e\u73b0\u7269\u4f53\u7684\u629b\u7269\u7ebf\u8fd0\u52a8\u3002\uff08\u5982\uff0c\u4fee\u6539Transform\u5c5e\u6027\uff0c\u4f7f\u7528\u5411\u91cfVector3\u7684\u65b9\u6cd5\u2026\uff09\n\n\n\n\na.\u76f4\u63a5\u6539\u53d8Transform\u7684position\n\n\npublic\n \nfloat\n \nVx\n;\n\n\npublic\n \nfloat\n \nVy\n;\n\n\n\nprivate\n \nfloat\n \nnowVy\n;\n\n\nprivate\n \nTransform\n \noriginTransform\n;\n\n\n\n// Use this for initialization\n\n\nvoid\n \nStart\n \n()\n \n{\n\n    \nnowVy\n \n=\n \nVy\n;\n\n    \noriginTransform\n \n=\n \nthis\n.\ntransform\n;\n\n\n}\n\n\n\n// Update is called once per frame\n\n\nvoid\n \nUpdate\n \n()\n \n{\n\n    \nif\n \n(\nnowVy\n+\nVy\n \n \n0.00001\n)\n \n{\n\n        \nthis\n.\ntransform\n.\nposition\n \n+=\n \nVector3\n.\nup\n \n*\n \nTime\n.\ndeltaTime\n \n*\n \nnowVy\n;\n\n        \nthis\n.\ntransform\n.\nposition\n \n+=\n \nVector3\n.\nleft\n \n*\n \nTime\n.\ndeltaTime\n \n*\n \nVx\n;\n\n        \nnowVy\n \n-=\n \n10\n \n*\n \nTime\n.\ndeltaTime\n;\n       \n    \n}\n \nelse\n \n{\n\n\n    \n}\n\n\n}\n\n\n\n\n\n\nb.\u901a\u8fc7\u4f7f\u7528Vector3.MoveTowards\n\n\n// Update is called once per frame\n\n\nvoid\n \nUpdate\n \n()\n \n{\n\n    \nDebug\n.\nLog\n \n(\nnowVy\n \n+\n \nVy\n);\n\n    \nif\n \n(\nnowVy\n+\nVy\n \n \n0.00001\n)\n \n{\n\n        \nVector3\n \ntarget\n \n=\n \nthis\n.\ntransform\n.\nposition\n \n+\n \nVector3\n.\nup\n \n*\n \nTime\n.\ndeltaTime\n \n*\n \nnowVy\n \n+\n \nVector3\n.\nleft\n \n*\n \nTime\n.\ndeltaTime\n \n*\n \nVx\n;\n\n        \nthis\n.\ntransform\n.\nposition\n \n=\n \nVector3\n.\nMoveTowards\n \n(\nthis\n.\ntransform\n.\nposition\n,\n \ntarget\n,\n \nTime\n.\ndeltaTime\n);\n\n        \nnowVy\n \n-=\n \n10\n \n*\n \nTime\n.\ndeltaTime\n;\n       \n    \n}\n \nelse\n \n{\n\n\n    \n}\n\n\n}\n\n\n\n\n\n\nc.\u901a\u8fc7\u4f7f\u7528transform.Translate\n\n\npublic\n \nfloat\n \nVx\n;\n\n\npublic\n \nfloat\n \nVy\n;\n\n\n\nprivate\n \nfloat\n \nnowVy\n;\n\n\nprivate\n \nVector3\n \nspeed\n;\n\n\nprivate\n \nVector3\n \nGravity\n;\n\n\n\n// Use this for initialization\n\n\nvoid\n \nStart\n \n()\n \n{\n\n    \nGravity\n \n=\n \nVector3\n.\nzero\n;\n\n    \nspeed\n \n=\n \nnew\n \nVector3\n \n(\nVx\n,\n \nVy\n,\n \n0\n);\n\n\n}\n\n\n\n// Update is called once per frame\n\n\nvoid\n \nUpdate\n \n()\n \n{\n\n    \nif\n \n(\n2\n*\nVy\n+\nGravity\n.\ny\n \n \n0.00001\n)\n \n{\n\n        \nGravity\n.\ny\n \n-=\n \n10\n \n*\n \nTime\n.\nfixedDeltaTime\n;\n\n        \nthis\n.\ntransform\n.\nTranslate\n \n(\nspeed\n*\nTime\n.\nfixedDeltaTime\n);\n\n        \nthis\n.\ntransform\n.\nTranslate\n \n(\nGravity\n*\nTime\n.\nfixedDeltaTime\n);\n\n    \n}\n \nelse\n \n{\n\n\n    \n}\n\n\n}\n\n\n\n\n\n\n\n\n\u5199\u4e00\u4e2a\u7a0b\u5e8f\uff0c\u5b9e\u73b0\u4e00\u4e2a\u5b8c\u6574\u7684\u592a\u9633\u7cfb\uff0c\u5176\u4ed6\u661f\u7403\u56f4\u7ed5\u592a\u9633\u7684\u8f6c\u901f\u5fc5\u987b\u4e0d\u4e00\u6837\uff0c\u4e14\u4e0d\u5728\u4e00\u4e2a\u6cd5\u5e73\u9762\u4e0a\u3002\n\n\n\n\n1.\u9996\u5148\uff0c\u67e5\u9605\u4e86\u592a\u9633\u7cfb\u76f8\u5173\u7684\u8d44\u6599\uff0c\u83b7\u5f97\u592a\u9633\u7cfb\u5927\u81f4\u7ed3\u6784\u5982\u4e0b(\u4e0b\u56fe\u4e0d\u5305\u62ec\u56f4\u7ed5\u5730\u7403\u7684\u6708\u7403)\n\n\n\n2.\u6839\u636e\u56fe\u4e2d\u4fe1\u606f\uff0c\u5e76\u6839\u636e\u4ece\u5c5e\u7ed3\u6784\u521b\u5efa\u597d\u6e38\u620f\u5bf9\u8c61,\u628a\u5b83\u4eec\u653e\u7f6e\u5230\u5927\u81f4\u7684\u4f4d\u7f6e\u3002\u6e38\u620f\u5bf9\u8c61\u7ed3\u6784\u5982\u4e0b\n\n\n\n\n\u5c06\u8001\u5e08\u6240\u7ed9\u7684\n\u8d34\u56fe\u7f51\u7ad9\n\u4e0a\u7684\u8d34\u56fe\u4e0b\u8f7d\u4e0b\u6765,\u653e\u5230Resources\u6587\u4ef6\u5939\u4e2d\uff0c\u4e00\u4e00\u62d6\u52a8\u5230\u6e38\u620f\u5bf9\u8c61\u4e0a\uff0c\u5177\u4f53\u7684\u5b9e\u73b0\u6548\u679c\u5982\u4e0b\n\n\n3.\u4e0b\u9762\u5c31\u8f6e\u5230\u5199\u811a\u672c\u4e86\n        \u56e0\u4e3a\u884c\u661f\u7684\u52a8\u4f5c\u7b49\u5927\u81f4\u76f8\u540c\uff0c\u53ea\u6709\u8f6c\u901f\uff0c\u6cd5\u5e73\u9762\u7b49\u5730\u65b9\u6709\u6240\u533a\u522b\uff0c\u6240\u4ee5\u6211\u76f4\u63a5\u628a\u516c\u8f6c\u52a8\u4f5c\u62bd\u8c61\u6210\u4e00\u4e2a\u811a\u672c\uff0c\u7136\u540e\u628a\u4f1a\u53d8\u5316\u7684\u90e8\u5206\u8bbe\u4e3apublic\u4f9b\u7ed9\u5916\u90e8\u4fee\u6539\u3002\n        \u81f3\u4e8e\u5404\u4e2a\u884c\u661f\u516c\u8f6c\u7684\u6cd5\u5e73\u9762\u561b\uff0c\u8fd9\u65b9\u9762\u4e0d\u592a\u4e86\u89e3\uff0c\u800c\u4e14\u641c\u7d22\u9875\u96be\u4ee5\u641c\u5230\u51c6\u786e\u7684\u503c,\u53c8\u9274\u4e8e\u6bcf\u4e2a\u884c\u661f\u7684\u6cd5\u5e73\u9762\u9700\u8981\u4e0d\u4e00\u6837\uff0c\u6240\u4ee5\u76f4\u63a5\u4f5b\u7cfb\u4e00\u6ce2\u4f7f\u7528\u968f\u673a\u751f\u6210\u7684\u6cd5\u5e73\u9762\u4f5c\u4e3a\u5404\u4e2a\u884c\u661f\u516c\u8f6c\u7684\u5e73\u9762\ud83c\udf1a,\u5982\u4e0b,\u76f4\u63a5\u901a\u8fc7\u968f\u673a\u751f\u6210\u6cd5\u7ebf\u3002          \n\n\nprivate\n \nVector3\n \nnormalPlane\n;\n\n\n// Use this for initialization\n\n\nvoid\n \nStart\n \n()\n \n{\n\n    \nnormalPlane\n.\nSet\n \n(\n0\n,\n \nRandom\n.\nRange\n \n(\n0\n,\n \n10\n),\n \nRandom\n.\nRange\n \n(\n0\n,\n \n2\n));\n\n\n}\n\n\n\n\n\n\n\n\n\u4e3a\u786e\u4fdd\u884c\u661f\u56f4\u7ed5Sun\u516c\u8f6c\uff0c\u6cd5\u7ebf\u5e94\u8be5\u8bbe\u4e3a(0,x,y)\uff0c\u56e0\u4e3a\u82e5\u884c\u661f\u56f4\u7ed5Sun\u7684\u7403\u5fc3\u516c\u8f6c\uff0c\u7403\u4f53\u4f4d\u7f6e\u4e0eSun\u7403\u5fc3\u884c\u6210\u7684\u5411\u91cf\u5fc5\u987b\u4e0e\u6cd5\u7ebf\u5411\u91cf\u5782\u76f4\uff0c\u800c(x,0,0)*(0,x,y)==0\uff0c\u5373(x,0,0)\u5782\u76f4\u4e8e(0,x,y)\uff0c\u6240\u4ee5\u6cd5\u7ebf\u5e94\u8be5\u8bbe\u7f6e\u4e3a(0,x,y) \n\n\n\n\n\n\n\u5177\u4f53\u6574\u4e2aMonoBehavior\u5b9e\u73b0\u5982\u4e0b:\n\n\npublic\n \nclass\n \nMove\n \n:\n \nMonoBehaviour\n \n{\n\n    \npublic\n \nfloat\n \nspeed\n;\n\n\n    \nprivate\n \nVector3\n \nnormalPlane\n;\n\n\n    \n// Use this for initialization\n\n    \nvoid\n \nStart\n \n()\n \n{\n\n        \nnormalPlane\n.\nSet\n \n(\n0\n,\n \nRandom\n.\nRange\n \n(\n0\n,\n \n10\n),\n \nRandom\n.\nRange\n \n(\n0\n,\n \n10\n));\n\n    \n}\n\n\n    \n// Update is called once per frame\n\n    \nvoid\n \nUpdate\n \n()\n \n{\n\n        \nthis\n.\ntransform\n.\nRotateAround\n \n(\nthis\n.\ntransform\n.\nparent\n.\nposition\n,\n \nnormalPlane\n,\n \nspeed\n);\n\n    \n}\n\n\n}\n\n\n\n\n\n\n\u5176\u5b9e\u4ee3\u7801\u5341\u5206\u7b80\u5355\uff0c\u4e3b\u8981\u8981\u77e5\u9053\u5982\u4f55Transform.RotateAround\uff0c\u77e5\u9053\u8fd9\u4e2a\u51fd\u6570\u5c31\u5f88\u597d\u529e\u4e86\uff0c\u5199\u5b8c\u811a\u672c\u540e\u53ea\u9700\u628a\u811a\u672c\u4e00\u4e00\u62d6\u52a8\u5230GameObject\u4e0a\uff0c\u8bbe\u7f6e\u597dspeed\u53d8\u91cf\uff0c\u6574\u4e2a\u7a0b\u5e8f\u5c31\u53ef\u4ee5\u8dd1\u8d77\u6765\u4e86\u3002\n\n\n\u4e3a\u4e86\u65b9\u4fbf\u770b\u6e05\u695a\u4e0d\u540c\u884c\u661f\u7684\u8fd0\u52a8\uff0c\u9a8c\u8bc1\u7ed3\u679c\uff0c\u6211\u5229\u7528\u4e86Unity3D\u4e2dGameObject\u7684\u8def\u5f84\u6e32\u67d3\uff0c\u76f4\u63a5\u7ed9\u6bcf\u4e2a\u5bf9\u8c61Add Component \n Effects \n Trail Renderer\u5c31\u53ef\u4ee5\u4e86\uff0c\u5b9e\u73b0\u6548\u679c\u6574\u4f53\u5982\u4e0b:\n        \n\n\n\u9879\u76ee\u7684\u5730\u5740\u5982\u4e0b:\n\ngithub@zhongwq/Unity3D-Learning/Homework2", 
            "title": "\u5b66\u4e60\u7b14\u8bb02-\u7269\u4f53\u7684\u7a7a\u95f4\u4e0e\u8fd0\u52a8"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb02-\u7269\u4f53\u7684\u7a7a\u95f4\u4e0e\u8fd0\u52a8/#homework2", 
            "text": "", 
            "title": "Homework2"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb02-\u7269\u4f53\u7684\u7a7a\u95f4\u4e0e\u8fd0\u52a8/#_1", 
            "text": "1.\u6e38\u620f\u5bf9\u8c61\u8fd0\u52a8\u7684\u672c\u8d28\u662f\u4ec0\u4e48\uff1f   \u6e38\u620f\u5bf9\u8c61\u8fd0\u52a8\u7684\u672c\u8d28\u5c31\u662f\u6e38\u620f\u5bf9\u8c61Transform\u7684\u6539\u53d8    \u8bf7\u7528\u4e09\u79cd\u65b9\u6cd5\u4ee5\u4e0a\u65b9\u6cd5\uff0c\u5b9e\u73b0\u7269\u4f53\u7684\u629b\u7269\u7ebf\u8fd0\u52a8\u3002\uff08\u5982\uff0c\u4fee\u6539Transform\u5c5e\u6027\uff0c\u4f7f\u7528\u5411\u91cfVector3\u7684\u65b9\u6cd5\u2026\uff09   a.\u76f4\u63a5\u6539\u53d8Transform\u7684position  public   float   Vx ;  public   float   Vy ;  private   float   nowVy ;  private   Transform   originTransform ;  // Use this for initialization  void   Start   ()   { \n     nowVy   =   Vy ; \n     originTransform   =   this . transform ;  }  // Update is called once per frame  void   Update   ()   { \n     if   ( nowVy + Vy     0.00001 )   { \n         this . transform . position   +=   Vector3 . up   *   Time . deltaTime   *   nowVy ; \n         this . transform . position   +=   Vector3 . left   *   Time . deltaTime   *   Vx ; \n         nowVy   -=   10   *   Time . deltaTime ;        \n     }   else   { \n\n     }  }   b.\u901a\u8fc7\u4f7f\u7528Vector3.MoveTowards  // Update is called once per frame  void   Update   ()   { \n     Debug . Log   ( nowVy   +   Vy ); \n     if   ( nowVy + Vy     0.00001 )   { \n         Vector3   target   =   this . transform . position   +   Vector3 . up   *   Time . deltaTime   *   nowVy   +   Vector3 . left   *   Time . deltaTime   *   Vx ; \n         this . transform . position   =   Vector3 . MoveTowards   ( this . transform . position ,   target ,   Time . deltaTime ); \n         nowVy   -=   10   *   Time . deltaTime ;        \n     }   else   { \n\n     }  }   c.\u901a\u8fc7\u4f7f\u7528transform.Translate  public   float   Vx ;  public   float   Vy ;  private   float   nowVy ;  private   Vector3   speed ;  private   Vector3   Gravity ;  // Use this for initialization  void   Start   ()   { \n     Gravity   =   Vector3 . zero ; \n     speed   =   new   Vector3   ( Vx ,   Vy ,   0 );  }  // Update is called once per frame  void   Update   ()   { \n     if   ( 2 * Vy + Gravity . y     0.00001 )   { \n         Gravity . y   -=   10   *   Time . fixedDeltaTime ; \n         this . transform . Translate   ( speed * Time . fixedDeltaTime ); \n         this . transform . Translate   ( Gravity * Time . fixedDeltaTime ); \n     }   else   { \n\n     }  }    \u5199\u4e00\u4e2a\u7a0b\u5e8f\uff0c\u5b9e\u73b0\u4e00\u4e2a\u5b8c\u6574\u7684\u592a\u9633\u7cfb\uff0c\u5176\u4ed6\u661f\u7403\u56f4\u7ed5\u592a\u9633\u7684\u8f6c\u901f\u5fc5\u987b\u4e0d\u4e00\u6837\uff0c\u4e14\u4e0d\u5728\u4e00\u4e2a\u6cd5\u5e73\u9762\u4e0a\u3002   1.\u9996\u5148\uff0c\u67e5\u9605\u4e86\u592a\u9633\u7cfb\u76f8\u5173\u7684\u8d44\u6599\uff0c\u83b7\u5f97\u592a\u9633\u7cfb\u5927\u81f4\u7ed3\u6784\u5982\u4e0b(\u4e0b\u56fe\u4e0d\u5305\u62ec\u56f4\u7ed5\u5730\u7403\u7684\u6708\u7403)  2.\u6839\u636e\u56fe\u4e2d\u4fe1\u606f\uff0c\u5e76\u6839\u636e\u4ece\u5c5e\u7ed3\u6784\u521b\u5efa\u597d\u6e38\u620f\u5bf9\u8c61,\u628a\u5b83\u4eec\u653e\u7f6e\u5230\u5927\u81f4\u7684\u4f4d\u7f6e\u3002\u6e38\u620f\u5bf9\u8c61\u7ed3\u6784\u5982\u4e0b   \u5c06\u8001\u5e08\u6240\u7ed9\u7684 \u8d34\u56fe\u7f51\u7ad9 \u4e0a\u7684\u8d34\u56fe\u4e0b\u8f7d\u4e0b\u6765,\u653e\u5230Resources\u6587\u4ef6\u5939\u4e2d\uff0c\u4e00\u4e00\u62d6\u52a8\u5230\u6e38\u620f\u5bf9\u8c61\u4e0a\uff0c\u5177\u4f53\u7684\u5b9e\u73b0\u6548\u679c\u5982\u4e0b \n3.\u4e0b\u9762\u5c31\u8f6e\u5230\u5199\u811a\u672c\u4e86\n        \u56e0\u4e3a\u884c\u661f\u7684\u52a8\u4f5c\u7b49\u5927\u81f4\u76f8\u540c\uff0c\u53ea\u6709\u8f6c\u901f\uff0c\u6cd5\u5e73\u9762\u7b49\u5730\u65b9\u6709\u6240\u533a\u522b\uff0c\u6240\u4ee5\u6211\u76f4\u63a5\u628a\u516c\u8f6c\u52a8\u4f5c\u62bd\u8c61\u6210\u4e00\u4e2a\u811a\u672c\uff0c\u7136\u540e\u628a\u4f1a\u53d8\u5316\u7684\u90e8\u5206\u8bbe\u4e3apublic\u4f9b\u7ed9\u5916\u90e8\u4fee\u6539\u3002\n        \u81f3\u4e8e\u5404\u4e2a\u884c\u661f\u516c\u8f6c\u7684\u6cd5\u5e73\u9762\u561b\uff0c\u8fd9\u65b9\u9762\u4e0d\u592a\u4e86\u89e3\uff0c\u800c\u4e14\u641c\u7d22\u9875\u96be\u4ee5\u641c\u5230\u51c6\u786e\u7684\u503c,\u53c8\u9274\u4e8e\u6bcf\u4e2a\u884c\u661f\u7684\u6cd5\u5e73\u9762\u9700\u8981\u4e0d\u4e00\u6837\uff0c\u6240\u4ee5\u76f4\u63a5\u4f5b\u7cfb\u4e00\u6ce2\u4f7f\u7528\u968f\u673a\u751f\u6210\u7684\u6cd5\u5e73\u9762\u4f5c\u4e3a\u5404\u4e2a\u884c\u661f\u516c\u8f6c\u7684\u5e73\u9762\ud83c\udf1a,\u5982\u4e0b,\u76f4\u63a5\u901a\u8fc7\u968f\u673a\u751f\u6210\u6cd5\u7ebf\u3002            private   Vector3   normalPlane ;  // Use this for initialization  void   Start   ()   { \n     normalPlane . Set   ( 0 ,   Random . Range   ( 0 ,   10 ),   Random . Range   ( 0 ,   2 ));  }    \u4e3a\u786e\u4fdd\u884c\u661f\u56f4\u7ed5Sun\u516c\u8f6c\uff0c\u6cd5\u7ebf\u5e94\u8be5\u8bbe\u4e3a(0,x,y)\uff0c\u56e0\u4e3a\u82e5\u884c\u661f\u56f4\u7ed5Sun\u7684\u7403\u5fc3\u516c\u8f6c\uff0c\u7403\u4f53\u4f4d\u7f6e\u4e0eSun\u7403\u5fc3\u884c\u6210\u7684\u5411\u91cf\u5fc5\u987b\u4e0e\u6cd5\u7ebf\u5411\u91cf\u5782\u76f4\uff0c\u800c(x,0,0)*(0,x,y)==0\uff0c\u5373(x,0,0)\u5782\u76f4\u4e8e(0,x,y)\uff0c\u6240\u4ee5\u6cd5\u7ebf\u5e94\u8be5\u8bbe\u7f6e\u4e3a(0,x,y)     \u5177\u4f53\u6574\u4e2aMonoBehavior\u5b9e\u73b0\u5982\u4e0b:  public   class   Move   :   MonoBehaviour   { \n     public   float   speed ; \n\n     private   Vector3   normalPlane ; \n\n     // Use this for initialization \n     void   Start   ()   { \n         normalPlane . Set   ( 0 ,   Random . Range   ( 0 ,   10 ),   Random . Range   ( 0 ,   10 )); \n     } \n\n     // Update is called once per frame \n     void   Update   ()   { \n         this . transform . RotateAround   ( this . transform . parent . position ,   normalPlane ,   speed ); \n     }  }   \u5176\u5b9e\u4ee3\u7801\u5341\u5206\u7b80\u5355\uff0c\u4e3b\u8981\u8981\u77e5\u9053\u5982\u4f55Transform.RotateAround\uff0c\u77e5\u9053\u8fd9\u4e2a\u51fd\u6570\u5c31\u5f88\u597d\u529e\u4e86\uff0c\u5199\u5b8c\u811a\u672c\u540e\u53ea\u9700\u628a\u811a\u672c\u4e00\u4e00\u62d6\u52a8\u5230GameObject\u4e0a\uff0c\u8bbe\u7f6e\u597dspeed\u53d8\u91cf\uff0c\u6574\u4e2a\u7a0b\u5e8f\u5c31\u53ef\u4ee5\u8dd1\u8d77\u6765\u4e86\u3002  \u4e3a\u4e86\u65b9\u4fbf\u770b\u6e05\u695a\u4e0d\u540c\u884c\u661f\u7684\u8fd0\u52a8\uff0c\u9a8c\u8bc1\u7ed3\u679c\uff0c\u6211\u5229\u7528\u4e86Unity3D\u4e2dGameObject\u7684\u8def\u5f84\u6e32\u67d3\uff0c\u76f4\u63a5\u7ed9\u6bcf\u4e2a\u5bf9\u8c61Add Component   Effects   Trail Renderer\u5c31\u53ef\u4ee5\u4e86\uff0c\u5b9e\u73b0\u6548\u679c\u6574\u4f53\u5982\u4e0b:\n          \u9879\u76ee\u7684\u5730\u5740\u5982\u4e0b: github@zhongwq/Unity3D-Learning/Homework2", 
            "title": "\u7b80\u7b54\u9898"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb03-Priestss & Devils\u7f16\u7a0b\u5b9e\u8df5/", 
            "text": "Homework2-\u7f16\u7a0b\u5b9e\u8df5\n\n\n\u9898\u76ee\u8981\u6c42\n\n\n\n\n\u9605\u8bfb\u4ee5\u4e0b\u6e38\u620f\u811a\u672c\n\n\n\n\n\n\nPriests and Devils\nPriests and Devils is a puzzle game in which you will help the Priests and Devils to cross the river within the time limit. There are 3 priests and 3 devils at one side of the river. They all want to get to the other side of this river, but there is only one boat and this boat can only carry two persons each time. And there must be one person steering the boat from one side to the other side. In the flash game, you can click on them to move them and click the go button to move the boat to the other direction. If the priests are out numbered by the devils on either side of the river, they get killed and the game is over. You can try it in many \n ways. Keep all priests alive! Good luck \uff01\n\n\n\n\n\u7b80\u7b54\u9898\uff1a\n\n\n\n\nplay the game ( http://www.flash-game.net/game/2535/priests-and-devils.html )\n\n\n\n\n\u5217\u51fa\u6e38\u620f\u4e2d\u63d0\u53ca\u7684\u4e8b\u7269\uff08Objects\uff09\n    \u6e38\u620f\u4e2d\u63d0\u53ca\u7684\u4e8b\u7269\u6709\n\n\n\n\n\u9b54\u9b3c\n\n\n\u7267\u5e08\n\n\n\u8239\n\n\n\u4e24\u8fb9\u7684\u5cb8\n\n\n\u6cb3\n\n\n\n\n\n\n\n\n\u7528\u8868\u683c\u5217\u51fa\u73a9\u5bb6\u52a8\u4f5c\u8868\uff08\u89c4\u5219\u8868\uff09\uff0c\u6ce8\u610f\uff0c\u52a8\u4f5c\u8d8a\u5c11\u8d8a\u597d\n\n\n\n\n\n\n\n\n\n\n\n\n\u884c\u4e3a\n\n\n\u884c\u4e3a\u6761\u4ef6\n\n\n\n\n\n\n\n\n\n\n\u7267\u5e08\uff0f\u6076\u9b54\u4e0a\u8239\n\n\n\u8239\u4e0a\u6709\u7a7a\u4f4d\u4e14\u8239\u5728\u8be5\u5cb8\n\n\n\n\n\n\n\u5f00\u8239\n\n\n\u8239\u4e0a\u6709\u4eba\n\n\n\n\n\n\n\u7267\u5e08/\u6076\u9b54\u4e0b\u8239\n\n\n\u8239\u6709\u4eba\u4e14\u9760\u5728\u5cb8\u8fb9\n\n\n\n\n\n\n\u6e38\u620f\u80dc\u5229\n\n\n6\u4e2a\u4eba\u90fd\u5230\u4e86\u5bf9\u5cb8\n\n\n\n\n\n\n\u6e38\u620f\u5931\u8d25\n\n\n\u6709\u4e00\u8fb9\u5cb8\u4e0a\u4eba\u6570\u4e0d\u5747\n\n\n\n\n\n\n\n\n\u7a0b\u5e8f\u9650\u5236\n\n\n\n\n\u8bf7\u5c06\u6e38\u620f\u4e2d\u5bf9\u8c61\u505a\u6210\u9884\u5236\n\n\n\u5728 GenGameObjects \u4e2d\u521b\u5efa \u957f\u65b9\u5f62\u3001\u6b63\u65b9\u5f62\u3001\u7403 \u53ca\u5176\u8272\u5f69\u4ee3\u8868\u6e38\u620f\u4e2d\u7684\u5bf9\u8c61\u3002\n\n\n\u4f7f\u7528 C# \u96c6\u5408\u7c7b\u578b \u6709\u6548\u7ec4\u7ec7\u5bf9\u8c61\n\n\n\u6574\u4e2a\u6e38\u620f\u4ec5 \u4e3b\u6444\u50cf\u673a \u548c \u4e00\u4e2a Empty \u5bf9\u8c61\uff0c \u5176\u4ed6\u5bf9\u8c61\u5fc5\u987b\u4ee3\u7801\u52a8\u6001\u751f\u6210\uff01\uff01\uff01\u6574\u4e2a\u6e38\u620f\u4e0d\u8bb8\u51fa\u73b0 Find \u6e38\u620f\u5bf9\u8c61\uff0c SendMessage \u8fd9\u7c7b\u7a81\u7834\u7a0b\u5e8f\u7ed3\u6784\u7684 \u901a\u8baf\u8026\u5408 \u8bed\u53e5\u3002 \u8fdd\u80cc\u672c\u6761\u51c6\u5219\uff0c\u4e0d\u7ed9\u5206\n\n\n\u8bf7\u4f7f\u7528\u8bfe\u4ef6\u67b6\u6784\u56fe\u7f16\u7a0b\uff0c\u4e0d\u63a5\u53d7\u975e MVC \u7ed3\u6784\u7a0b\u5e8f\n\n\n\u6ce8\u610f\u7ec6\u8282\uff0c\u4f8b\u5982\uff1a\u8239\u672a\u9760\u5cb8\uff0c\u7267\u5e08\u4e0e\u9b54\u9b3c\u4e0a\u4e0b\u8239\u8fd0\u52a8\u4e2d\uff0c\u5747\u4e0d\u80fd\u63a5\u53d7\u7528\u6237\u4e8b\u4ef6\uff01\n\n\n\n\n\n\n\u9879\u76ee\u5730\u5740\n\n\ngithub@zhongwq/Unity3D-Learning/Homework2\n\n\n\n\nUnity\u4e2d\u7684MVC\u67b6\u6784\n\n\n\u60f3\u4f7f\u7528\u4e00\u4e2a\u67b6\u6784\u8fdb\u884c\u5f00\u53d1\uff0c\u6211\u4eec\u80af\u5b9a\u9700\u8981\u5148\u4e86\u89e3MVC\u67b6\u6784\u5982\u4f55\u5728\u57fa\u4e8eUnity\u7684\u6e38\u620f\u7684\u5f00\u53d1\u4e2d\u4f7f\u7528\u3002\u4ed4\u7ec6\u5206\u6790Unity\u4e2d\u7684MVC\u7ed3\u6784\uff0c\u7ed3\u5408\u8001\u5e08\u4e0a\u8bfe\u65f6\u6240\u8bb2\u7684\u5185\u5bb9\uff0c\u5b83\u5176\u5b9e\u548c\u5e73\u65f6\u5728WEB\u4e2d\u5e38\u7528MVC\u7ed3\u6784\u5728\u672c\u8d28\u4e0a\u5e76\u6ca1\u6709\u592a\u5927\u7684\u533a\u522b\uff0c\u90fd\u662f\u5173\u6ce8\u70b9\u5206\u79bb(SOC)\u7684\u4f53\u73b0\uff0c\u662f\u4e00\u79cd\u6210\u719f\u7684\u8f6f\u4ef6\u8bbe\u8ba1\u89c4\u8303\u3002\u4f7f\u7528MVC\u67b6\u6784\u53bb\u5f00\u53d1\u6211\u4eec\u7684\u8f6f\u4ef6\uff0c\u53ef\u4ee5\u4f7f\u5f97\u6211\u4eec\u5728\u62d3\u5c55\u8f6f\u4ef6\u529f\u80fd\u3001\u6539\u8fdb\u7528\u6237\u4ea4\u4e92\u7684\u65f6\u5019\uff0c\u4e0d\u9700\u8981\u91cd\u5199\u5927\u91cf\u7684\u4e1a\u52a1\u903b\u8f91\u4ee3\u7801\uff0c\u51cf\u5c11\u4e86\u6211\u4eec\u7684\u4ee3\u7801\u91cf\uff0c\u65b9\u4fbf\u4e86\u8f6f\u4ef6\u7684\u62d3\u5c55\uff0c\u5c31\u5982\u8001\u5e08\u6240\u8bf4\u7684\uff1a\u201c\u7a33\u56fa\u7684MVC\u6846\u67b6\u7ecf\u5f97\u8d77\u4efb\u610f\u62d3\u5c55\u201d\u3002\n\n\n\u4e0b\u9762\u6211\u4eec\u6765\u8c08\u8c08Unity\u4e2d\u7684MVC\u67b6\u6784:\n\n\n\n\nM(Model): Unity\u4e2d\uff0cModel\u5c31\u662f\u6e38\u620f\u573a\u666f\u4e2dGameObject\u3001\u548c\u5b83\u4eec\u7684\u5173\u7cfb\u4ee5\u53ca\u540e\u53f0\u7684\u6570\u636e\u6a21\u578b(\u6bd4\u5982\u7528\u6237\u4fe1\u606f\u7b49)\uff0c\u5b83\u4eec\u90fd\u53d7\u5230\u76f8\u5e94\u7684Controller\u7684\u63a7\u5236\n\n\nV(View): View\u8fd9\u90e8\u5206\u5728\u6e38\u620f\u4e2d\u8d77\u5230\u7684\u662f\u4e0e\u7528\u6237\u8fdb\u884c\u4ea4\u4e92\u7684\u529f\u80fd\uff0c\u5b83\u4eec\u8d1f\u8d23\u5411\u7528\u6237\u6218\u672f\u6e38\u620f\u7ed3\u679c\uff0c\u5904\u7406GUI\u4e8b\u4ef6\u5e76\u901a\u8fc7IUserAction\u63a5\u53e3\u6765\u4e0eController\u8fdb\u884c\u4ea4\u4e92\u3002\n\n\nC(Controller): Controller\u63a7\u5236\u7740\u6e38\u620f\u573a\u666f\u4e2d\u6240\u6709\u7684\u5bf9\u8c61\uff0c\u5176\u8d1f\u8d23\u63a5\u6536\u6765\u81eaView\u7684\u7528\u6237\u7684\u6307\u4ee4\u5e76\u6839\u636e\u7528\u6237\u8f93\u5165\u7684\u6307\u4ee4\uff0c\u66f4\u65b0Models\u4ee5\u53ca\u66f4\u65b0View\u7684\u72b6\u6001\uff0c\u5176\u53ef\u4ee5\u88ab\u8ba4\u4e3a\u662f\u8fde\u63a5Model\u4e0eView\u7684\u6865\u6881\u3002\n\n\n\n\n\n\n\u9879\u76eeUML\u56fe\n\n\n\u5728\u4e86\u89e3\u4e86Unity\u4e2dMVC\u7684\u57fa\u672c\u67b6\u6784\u4e4b\u540e\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5f00\u59cb\u8fdb\u884c\u4e0b\u9762\u7684\u5f00\u53d1\u4e86\n\n\n\u6309\u7167\u9898\u76ee\u8981\u6c42\u7684MVC\u7ed3\u6784\uff0c\u5206\u6790\u6e38\u620f\u7684\u57fa\u672c\u7ed3\u6784\uff0c\u5f97\u5230\u57fa\u672c\u7684UML\u56fe\u7684\u7ed3\u6784\u5982\u4e0b:\n    \n\n\n\u5bf9\u5404\u6a21\u5757\u5206\u5757\u8fdb\u884c\u5f00\u53d1\n\n\n\n\nGameDirector\n\n\n\u9996\u5148\uff0c\u6211\u4eec\u6765\u5f00\u53d1\u62c5\u8d1f\u7740\u4f17\u591a\u804c\u8d23\u7684GameDirector\uff0c\u5728\u6e38\u620f\u91cc\u9762\uff0c\u5bfc\u6f14(Director)\u7684\u804c\u8d23\u5927\u81f4\u5982\u4e0b:\n\n\n\n\n\u83b7\u53d6\u5f53\u524d\u6e38\u620f\u7684\u573a\u666f\n\n\n\u63a7\u5236\u573a\u666f\u8fd0\u884c\u3001\u5207\u6362\u3001\u5165\u6808\u4e0e\u51fa\u6808\uff0c\u6682\u505c\u3001\u6062\u590d\u3001\u9000\u51fa\n\n\n\u7ba1\u7406\u6e38\u620f\u5168\u5c40\u72b6\u6001\n\n\n\u8bbe\u5b9a\u6e38\u620f\u7684\u914d\u7f6e\n\n\n\u8bbe\u5b9a\u6e38\u620f\u5168\u5c40\u89c6\u56fe\n\n\n\n\n\u7531\u4e0a\u6211\u4eec\u53ef\u77e5\uff0cGameDirector\u5bf9\u4e8e\u4e00\u4e2a\u6e38\u620f\u662f\u591a\u4e48\u7684\u91cd\u8981\uff0c\u4f46\u662f\uff0c\u5728\u6211\u4eec\u8fd9\u6b21\u7684\u5c0f\u9879\u76ee\u4e2d\uff0c\u5b83\u7684\u804c\u8d23\u6ca1\u6709\u90a3\u4e48\u591a\uff0c\u5b83\u5728\u8fd9\u6b21\u7684\u9879\u76ee\u4e2d\u4e3b\u8981\u8d1f\u8d23\u7684\u662f\u83b7\u53d6\u5f53\u524d\u6e38\u620f\u573a\u666f\uff0c\u5176\u4ee3\u7801\u5982\u4e0b:\n\n\npublic\n \nclass\n \nGameDirector\n \n:\n \nSystem\n.\nObject\n \n{\n\n    \nprivate\n \nstatic\n \nGameDirector\n \n_instance\n;\n\n    \npublic\n \nISceneController\n \ncurrentSceneController\n \n{\n \nget\n;\n \nset\n;\n \n}\n\n    \npublic\n \nbool\n \nrunning\n \n{\n \nset\n;\n \nget\n;\n \n}\n\n\n    \npublic\n \nstatic\n \nGameDirector\n \ngetInstance\n()\n\n    \n{\n\n        \nif\n \n(\n_instance\n \n==\n \nnull\n)\n\n        \n{\n\n            \n_instance\n \n=\n \nnew\n \nGameDirector\n();\n\n            \nreturn\n \n_instance\n;\n\n        \n}\n \n        \nreturn\n \n_instance\n;\n\n    \n}\n\n\n    \npublic\n \nint\n \ngetFPS\n()\n\n    \n{\n\n        \nreturn\n \nApplication\n.\ntargetFrameRate\n;\n\n    \n}\n\n\n    \npublic\n \nvoid\n \nsetFPS\n(\nint\n \nfps\n)\n\n    \n{\n\n        \nApplication\n.\ntargetFrameRate\n \n=\n \nfps\n;\n        \n    \n}\n\n\n}\n\n\n\n\n\n\nDirector\u5728\u8fd0\u884c\u65f6\u53ea\u4f1a\u6709\u4e00\u4e2a\u5b9e\u4f8b\u5728\u8fd0\u884c\uff0c\u5728\u4e0a\u9762\u7684\u4ee3\u7801\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u5176\u5e94\u7528\u4e86\u5355\u4f8b\u6a21\u5f0f\u4fdd\u8bc1\u53ea\u6709\u4e00\u4e2a\u5b9e\u4f8b\u751f\u6210\uff0c\u65b9\u4fbf\u4e86\u7c7b\u4e4b\u95f4\u7684\u4e8b\u4ef6\u901a\u4fe1\uff0c\u65b9\u4fbf\u4e86MVC\u7684\u5b9e\u73b0\u3002\n\n\nDirector\u4f5c\u4e3a\u6e38\u620f\u6700\u4e3a\u9ad8\u5c42\u7684Controller\uff0c\u5176\u4e0d\u5177\u4f53\u7684\u63a7\u5236\u6e38\u620f\u4e2d\u7684\u4efb\u4e00\u5bf9\u8c61\uff0c\u5176\u901a\u8fc7\u5bf9currentSceneController\u7684\u7ef4\u62a4\uff0c\u628a\u63a7\u5236\u6e38\u620f\u5bf9\u8c61\u7684\u4efb\u52a1\u4ea4\u7ed9\u4e0d\u540c\u7684SceneController\u3002\n\n\n\n\nISceneController\n\n\nISceneController\u7684\u4ee3\u7801\u5982\u4e0b\n\n\n//interface of Scene\n\n\n\npublic\n \ninterface\n \nISceneController\n\n\n{\n\n    \nvoid\n \ngenGameObjects\n();\n\n\n}\n\n\n\n\n\n\nISCeneController\u662f\u6e38\u620f\u4e2d\u7684\u573a\u666f\u7ba1\u7406\u5668\uff0c\u4fd7\u79f0\u573a\u8bb0\uff0c\u5176\u4e3b\u8981\u804c\u8d23\u5982\u4e0b:\n\n\n\n\n\u7ba1\u7406\u6e38\u620f\u5728\u8be5\u6e38\u620f\u573a\u666f\u4e2d\u7684\u6240\u6709\u7684\u6e38\u620f\u5bf9\u8c61\n\n\n\u534f\u8c03\u6e38\u620f\u5bf9\u8c61\u3001\u6e38\u620f\u5bf9\u8c61\u7ba1\u7406\u5668(GameObjectControllers)\u4e4b\u95f4\u7684\u901a\u4fe1\n\n\n\u54cd\u5e94\u5916\u90e8\u8f93\u5165\u4e8b\u4ef6\n\n\n\u7ba1\u7406\u8be5\u6e38\u620f\u573a\u666f\u7684\u6240\u6709\u7684\u89c4\u5219\n\n\n\u7ba1\u7406\u4e00\u4e9b\u5176\u4ed6\u7684\u4e1c\u897f\n\n\n\n\n\u8be5\u7edf\u4e00\u7684\u63a5\u53e3\u7684\u5b9e\u73b0\u6b63\u662fGameDirector\u5bf9\u5404\u4e2a\u6e38\u620f\u573a\u666f\u7ba1\u7406\u7684\u5173\u952e\uff0c\u4ed6\u662f\u5bfc\u6f14\u63a7\u5236\u573a\u666f\u7684\u6e20\u9053\uff0cGameDirector\u901a\u8fc7\u5bf9\u4e8ecurrentSceneController\u7684\u7ef4\u62a4\uff0c\u53ef\u4ee5\u7b80\u5355\u5b9e\u73b0\u6e38\u620f\u573a\u666f\u7684\u5404\u79cd\u7ba1\u7406\n\n\n\n\nIUserAction\n\n\nIUserAction\u4e2d\u4f53\u73b0\u4e86\u6e38\u620f\u7f16\u7a0b\u7684\u95e8\u9762\u6a21\u5f0f\uff0c\u6e38\u620f\u5916\u90e8\u4e0e\u4e00\u4e2a\u5b50\u7cfb\u7edf\u7684\u901a\u4fe1\u5fc5\u987b\u901a\u8fc7\u4e00\u4e2a\u7edf\u4e00\u7684\u95e8\u9762\u5bf9\u8c61\u8fdb\u884c\uff0c\u800c\u6211\u4eec\u73b0\u5728\u5b9e\u73b0\u7684IUserAction\u5c31\u662f\u8fd9\u6837\u7684\u4e00\u4e2a\u5bf9\u8c61,GUI\u7c7b\u901a\u8fc7IUserAction\u6765\u4e0eController\u8fdb\u884c\u901a\u4fe1\uff0c\u6211\u4eec\u901a\u8fc7\u5b9e\u73b0IUserAction\u63a5\u53e3\u6765\u5b9a\u4e49Controller\u4e0eGUI\u7684\u4ea4\u4e92\uff0c\u8fd9\u6837\u6211\u4eec\u5728\u5b9e\u73b0Controller\u7c7b\u65f6\u53ea\u9700\u8981\u5b9e\u73b0IUserAction\u5bf9\u5e94\u7684\u63a5\u53e3\uff0c\u4ed6\u5c31\u53ef\u4ee5\u4e0e\u4efb\u610f\u4f7f\u7528IUserAction\u63a5\u53e3\u7684View\u5373GUI\u7c7b\u8c03\u7528\uff0cGUI\u7c7b\u4e5f\u662f\u53ea\u9700\u8c03\u7528\u63a5\u53e3\u4e2d\u7684\u65b9\u6cd5\u5373\u53ef\u5b9e\u73b0\u4e0eController\u7684\u901a\u4fe1, \u65b9\u4fbf\u4e86\u6211\u4eecMVC\u67b6\u6784\u7684\u5b9e\u73b0\u3002\n\n\n\u5176\u5b9a\u4e49\u5982\u4e0b:\n\n\npublic\n \ninterface\n \nIUserAction\n \n{\n\n    \nvoid\n \nrestart\n();\n\n    \nvoid\n \nToggleBoat\n();\n\n    \nvoid\n \nClickCharacter\n(\nICharacterController\n \nchracter\n);\n\n\n}\n\n\n\n\n\n\n\n\nUserGUI\n\n\nUserGUI\u7684\u4ee3\u7801\u5982\u4e0b:\n\n\npublic\n \nclass\n \nUserGUI\n \n:\n \nMonoBehaviour\n \n{\n\n    \npublic\n \nint\n \nstatus\n \n=\n \n0\n;\n\n    \nprivate\n \nIUserAction\n \naction\n;\n\n    \nGUIStyle\n \nheaderStyle\n;\n\n    \nGUIStyle\n \nbuttonStyle\n;\n\n\n    \n// Use this for initialization\n\n    \nvoid\n \nStart\n \n()\n \n{\n\n        \naction\n \n=\n \nGameDirector\n.\ngetInstance\n().\ncurrentSceneController\n \nas\n \nIUserAction\n;\n\n        \nheaderStyle\n \n=\n \nnew\n \nGUIStyle\n();\n\n        \nheaderStyle\n.\nfontSize\n \n=\n \n40\n;\n\n        \nheaderStyle\n.\nalignment\n \n=\n \nTextAnchor\n.\nMiddleCenter\n;\n\n        \nbuttonStyle\n \n=\n \nnew\n \nGUIStyle\n(\nbutton\n);\n\n        \nbuttonStyle\n.\nfontSize\n \n=\n \n30\n;\n\n    \n}\n\n\n    \n// Update is called once per frame\n\n    \nvoid\n \nOnGUI\n \n()\n \n{\n\n        \nGUI\n.\nLabel\n(\nnew\n \nRect\n(\nScreen\n.\nwidth\n \n/\n \n2\n \n-\n \n100\n,\n \n10\n,\n \n200\n,\n \n50\n),\n \nPriests \n Demons\n,\n \nheaderStyle\n);\n\n        \nif\n \n(\nstatus\n \n==\n \n1\n)\n\n        \n{\n\n            \nGUI\n.\nLabel\n(\nnew\n \nRect\n(\nScreen\n.\nwidth\n \n/\n \n2\n \n-\n \n45\n,\n \nScreen\n.\nheight\n \n/\n \n2\n \n-\n \n90\n,\n \n100\n,\n \n50\n),\n \nGameover!\n,\n \nheaderStyle\n);\n\n            \nif\n \n(\nGUI\n.\nButton\n(\nnew\n \nRect\n(\nScreen\n.\nwidth\n \n/\n \n2\n \n-\n \n65\n,\n \nScreen\n.\nheight\n \n/\n \n2\n,\n \n140\n,\n \n70\n),\n \nRestart\n,\n \nbuttonStyle\n))\n\n            \n{\n\n                \nstatus\n \n=\n \n0\n;\n\n                \naction\n.\nrestart\n();\n\n            \n}\n\n        \n}\n\n        \nelse\n \nif\n \n(\nstatus\n \n==\n \n2\n)\n\n        \n{\n\n            \nGUI\n.\nLabel\n(\nnew\n \nRect\n(\nScreen\n.\nwidth\n \n/\n \n2\n \n-\n \n50\n,\n \nScreen\n.\nheight\n \n/\n \n2\n \n-\n \n90\n,\n \n100\n,\n \n50\n),\n \nWin!\n,\n \nheaderStyle\n);\n\n            \nif\n \n(\nGUI\n.\nButton\n(\nnew\n \nRect\n(\nScreen\n.\nwidth\n \n/\n \n2\n \n-\n \n70\n,\n \nScreen\n.\nheight\n \n/\n \n2\n,\n \n140\n,\n \n70\n),\n \nRestart\n,\n \nbuttonStyle\n))\n\n            \n{\n\n                \nstatus\n \n=\n \n0\n;\n\n                \naction\n.\nrestart\n();\n\n            \n}\n\n        \n}\n\n    \n}\n\n\n}\n\n\n\n\n\n\n\u7531\u4e0a\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0cUserGUI\u53ea\u662f\u7b80\u5355\u5730\u6839\u636e\u6e38\u620f\u72b6\u6001\uff0c\u5bf9\u6e38\u620f\u4fe1\u606f\u7b49\u8fdb\u884c\u5c55\u793a\uff0c\u7136\u540e\u901a\u8fc7IUserAction\u4e0eController\u8fdb\u884c\u4ea4\u4e92\uff0c\u8fd9\u4e5f\u662f\u6211\u4eec\u5728\u4e0a\u9762\u6240\u63d0\u5230\u7684\uff0c\u6211\u4eec\u53ea\u9700\u8981\u5728GUI\u4e2d\u8c03\u7528IUserAction\u4e2d\u7684\u65b9\u6cd5\u5c31\u53ef\u4ee5\u8fc5\u901f\u5b9e\u73b0\u5bf9\u6e38\u620f\u573a\u666f\u7684\u63a7\u5236\uff0c\u4e0b\u9762\u7684ClickGUI\u4e5f\u662f\u4e00\u6837\n\n\n\n\nClickGUI\n\n\n\u8be5\u7c7b\u7684\u4ee3\u7801\u5982\u4e0b:\n\n\npublic\n \nclass\n \nClickGUI\n \n:\n \nMonoBehaviour\n \n{\n\n    \nIUserAction\n \naction\n;\n\n    \nICharacterController\n \ncharacter\n;\n\n\n    \npublic\n \nvoid\n \nsetController\n(\nICharacterController\n \ncharacterController\n)\n\n    \n{\n\n        \ncharacter\n \n=\n \ncharacterController\n;\n\n    \n}\n\n\n    \nvoid\n \nStart\n()\n\n    \n{\n\n        \naction\n \n=\n \nGameDirector\n.\ngetInstance\n().\ncurrentSceneController\n \nas\n \nIUserAction\n;\n\n    \n}\n\n\n    \nvoid\n \nOnMouseDown\n()\n\n    \n{\n\n        \nif\n \n(\ngameObject\n.\nname\n \n==\n \nboat\n)\n\n        \n{\n\n            \naction\n.\nToggleBoat\n();\n\n        \n}\n\n        \nelse\n\n        \n{\n\n            \naction\n.\nClickCharacter\n(\ncharacter\n);\n\n        \n}\n\n    \n}\n\n\n}\n\n\n\n\n\n\n\u5728ClickGUI\u4e2d\uff0c\u6211\u4eec\u540c\u6837\u7528\u5230\u4e86IUserAction, ClickGUI\u76d1\u542c\u4e8b\u4ef6\u7684\u53d1\u751f\uff0c\u7136\u540e\u901a\u8fc7IUserAction\u63d0\u4f9b\u7684\u7c7b\u4f3c\u79fb\u52a8\u8239\uff0c\u6e38\u620f\u89d2\u8272\u4e0a\u4e0b\u8239\u7684\u51fd\u6570\uff0c\u628a\u7528\u6237\u6307\u4ee4\u4f20\u7ed9Controller\u8fdb\u884c\u6267\u884c\u3002\u4ece\u800c\u5b9e\u73b0View\u548cController\u4e4b\u95f4\u7684\u4ea4\u4e92\u3002\n\n\n\n\nFirstController\n\n\n\u5728\u8be5\u6e38\u620f\u4e2d\uff0c\u53ea\u6709\u4e00\u4e2a\u6e38\u620f\u573a\u666f\uff0c\u6240\u4ee5\n\n\n\u5176\u4ee3\u7801\u5b9e\u73b0\u5982\u4e0b:\n\n\npublic\n \nclass\n \nFirstController\n \n:\n \nMonoBehaviour\n,\n \nISceneController\n,\n \nIUserAction\n \n{\n\n    \nreadonly\n \nVector3\n \nriverPosition\n \n=\n \nnew\n \nVector3\n(\n0\n,\n \n-\n0.25f\n,\n \n0\n);\n\n    \nUserGUI\n \nuserGUI\n;\n\n\n    \npublic\n \nLandController\n \nrightLand\n;\n\n    \npublic\n \nLandController\n \nleftLand\n;\n\n    \npublic\n \nBoatController\n \nboat\n;\n\n    \npublic\n \nICharacterController\n[]\n \ncharacters\n;\n\n\n    \nvoid\n \nAwake\n()\n\n    \n{\n\n        \nGameDirector\n \ndirector\n \n=\n \nGameDirector\n.\ngetInstance\n();\n\n        \ndirector\n.\ncurrentSceneController\n \n=\n \nthis\n;\n\n        \nuserGUI\n \n=\n \ngameObject\n.\nAddComponent\nUserGUI\n()\n \nas\n \nUserGUI\n;\n\n        \ngenGameObjects\n();\n\n    \n}\n\n\n    \npublic\n \nvoid\n \ngenGameObjects\n()\n\n    \n{\n\n        \ncharacters\n \n=\n \nnew\n \nICharacterController\n[\n6\n];\n\n        \nGameObject\n \nriver\n \n=\n \nInstantiate\n(\nResources\n.\nLoad\n(\nPrefabs/River\n,\n \ntypeof\n(\nGameObject\n)),\n \nriverPosition\n,\n \nQuaternion\n.\nidentity\n,\n \nnull\n)\n \nas\n \nGameObject\n;\n\n        \nriver\n.\nname\n \n=\n \nriver\n;\n\n\n        \nboat\n \n=\n \nnew\n \nBoatController\n();\n\n        \nleftLand\n \n=\n \nnew\n \nLandController\n(-\n1\n);\n\n        \nrightLand\n \n=\n \nnew\n \nLandController\n(\n1\n);\n\n\n        \nfor\n \n(\nint\n \ni\n \n=\n \n0\n;\n \ni\n \n \n3\n;\n \ni\n++)\n\n        \n{\n\n            \nICharacterController\n \npriest\n \n=\n \nnew\n \nICharacterController\n(\n0\n,\n \npriest\n \n+\n \ni\n);\n\n            \npriest\n.\nsetPosition\n(\nrightLand\n.\ngetEmptyPosition\n());\n\n            \npriest\n.\ngetOnLand\n(\nrightLand\n);\n\n            \nrightLand\n.\ngetOnLand\n(\npriest\n);\n\n            \ncharacters\n[\ni\n]\n \n=\n \npriest\n;\n\n        \n}\n\n\n        \nfor\n \n(\nint\n \ni\n \n=\n \n0\n;\n \ni\n \n \n3\n;\n \ni\n++)\n\n        \n{\n\n            \nICharacterController\n \ndemon\n \n=\n \nnew\n \nICharacterController\n(\n1\n,\n \ndemon\n \n+\n \ni\n);\n\n            \ndemon\n.\nsetPosition\n(\nrightLand\n.\ngetEmptyPosition\n());\n\n            \ndemon\n.\ngetOnLand\n(\nrightLand\n);\n\n            \nrightLand\n.\ngetOnLand\n(\ndemon\n);\n\n            \ncharacters\n[\ni\n+\n3\n]\n \n=\n \ndemon\n;\n\n        \n}\n\n    \n}\n\n\n\n    \npublic\n \nvoid\n \nClickCharacter\n(\nICharacterController\n \ncharacter\n)\n\n    \n{\n\n        \nif\n \n(\nuserGUI\n.\nstatus\n \n!=\n \n0\n \n||\n \n!\nboat\n.\navailable\n())\n\n        \n{\n\n            \nreturn\n;\n\n        \n}\n\n        \nif\n \n(\ncharacter\n.\nisOnBoat\n())\n \n{\n\n            \nLandController\n \nland\n;\n\n            \nif\n \n(\nboat\n.\ngetBoatPos\n()\n \n==\n \n0\n)\n\n            \n{\n\n                \nland\n \n=\n \nleftLand\n;\n\n            \n}\n\n            \nelse\n\n            \n{\n\n                \nland\n \n=\n \nrightLand\n;\n\n            \n}\n\n            \nboat\n.\ngetOffBoat\n(\ncharacter\n.\ngetName\n());\n\n            \ncharacter\n.\nMoveTo\n(\nland\n.\ngetEmptyPosition\n());\n\n            \ncharacter\n.\ngetOnLand\n(\nland\n);\n\n            \nland\n.\ngetOnLand\n(\ncharacter\n);\n\n        \n}\n\n        \nelse\n\n        \n{\n\n            \nLandController\n \nland\n \n=\n \ncharacter\n.\ngetLandController\n();\n\n            \nif\n \n(\nboat\n.\ngetEmptyIndex\n()\n \n==\n \n-\n1\n)\n\n                \nreturn\n;\n\n            \nint\n \nlandPos\n \n=\n \nland\n.\ngetType\n(),\n \nboatPos\n \n=\n \n(\nboat\n.\ngetBoatPos\n()\n \n==\n \n0\n)\n \n?\n \n-\n1\n \n:\n \n1\n;\n\n            \nif\n \n(\nlandPos\n \n!=\n \nboatPos\n)\n\n                \nreturn\n;\n\n            \nland\n.\ngetOffLand\n(\ncharacter\n.\ngetName\n());\n\n            \ncharacter\n.\nMoveTo\n(\nboat\n.\ngetEmptyPosition\n());\n\n            \ncharacter\n.\ngetOnBoat\n(\nboat\n,\n \nboat\n.\ngetEmptyIndex\n());\n\n            \nboat\n.\ngetOnBoat\n(\ncharacter\n);\n\n        \n}\n\n        \nuserGUI\n.\nstatus\n \n=\n \ncheckResult\n();\n\n    \n}\n\n\n    \npublic\n \nvoid\n \nToggleBoat\n()\n\n    \n{\n\n        \nif\n \n(\nuserGUI\n.\nstatus\n \n!=\n \n0\n \n||\n \nboat\n.\nisEmptty\n())\n\n            \nreturn\n;\n\n        \nboat\n.\nMove\n();\n\n        \nuserGUI\n.\nstatus\n \n=\n \ncheckResult\n();\n\n    \n}\n\n\n    \nint\n \ncheckResult\n()\n\n    \n{\n\n        \nint\n \nleftPriests\n \n=\n \n0\n;\n\n        \nint\n \nrightPriests\n \n=\n \n0\n;\n\n        \nint\n \nleftDemons\n \n=\n \n0\n;\n\n        \nint\n \nrightDemons\n \n=\n \n0\n;\n\n\n        \nint\n[]\n \nleftStatus\n \n=\n \nleftLand\n.\ngetStatus\n();\n\n        \nleftPriests\n \n+=\n \nleftStatus\n[\n0\n];\n\n        \nleftDemons\n \n+=\n \nleftStatus\n[\n1\n];\n\n\n        \nif\n \n(\nleftPriests\n \n+\n \nleftDemons\n \n==\n \n6\n)\n\n            \nreturn\n \n2\n;\n\n\n        \nint\n[]\n \nrightStatus\n \n=\n \nrightLand\n.\ngetStatus\n();\n\n        \nrightPriests\n \n+=\n \nrightStatus\n[\n0\n];\n\n        \nrightDemons\n \n+=\n \nrightStatus\n[\n1\n];\n\n\n        \nint\n[]\n \nboatStatus\n \n=\n \nboat\n.\ngetBoatStatus\n();\n\n        \nif\n \n(\nboat\n.\ngetBoatPos\n()\n \n==\n \n0\n)\n\n        \n{\n\n            \nleftPriests\n \n+=\n \nboatStatus\n[\n0\n];\n\n            \nleftDemons\n \n+=\n \nboatStatus\n[\n1\n];\n\n        \n}\n\n        \nelse\n\n        \n{\n\n            \nrightPriests\n \n+=\n \nboatStatus\n[\n0\n];\n\n            \nrightDemons\n \n+=\n \nboatStatus\n[\n1\n];\n\n        \n}\n\n\n        \nif\n \n(\nleftPriests\n \n \n0\n \n \nleftPriests\n \n \nleftDemons\n)\n\n            \nreturn\n \n1\n;\n\n        \nif\n \n(\nrightPriests\n \n \n0\n \n \nrightPriests\n \n \nrightDemons\n)\n\n            \nreturn\n \n1\n;\n\n\n        \nreturn\n \n0\n;\n\n    \n}\n\n\n    \npublic\n \nvoid\n \nrestart\n()\n\n    \n{\n\n        \nboat\n.\nreset\n();\n\n        \nleftLand\n.\nreset\n();\n\n        \nrightLand\n.\nreset\n();\n\n        \nfor\n \n(\nint\n \ni\n \n=\n \n0\n;\n \ni\n \n \ncharacters\n.\nLength\n;\n \ni\n++)\n\n            \ncharacters\n[\ni\n].\nreset\n();\n\n    \n}\n\n\n}\n\n\n\n\n\n\nFirstController\u7ee7\u627f\u4e86ISceneController\u548cIUserAction\u8fd9\u4e24\u4e2a\u63a5\u53e3\uff0c\u5e76\u5b9e\u73b0\u4e86\u5176\u91cc\u9762\u7684\u51fd\u6570\uff0c\u5176\u65e2\u53ef\u4ee5\u901a\u8fc7IUserAction\u4e0eView\u8fdb\u884c\u4ea4\u4e92\uff0c\u4e5f\u53ef\u4ee5\u5728LoadResources\u540e\uff0c\u901a\u8fc7GameObject\u7684Controller\u5bf9\u573a\u666f\u4e2d\u7684\u5404\u4e2aGameObject\u8fdb\u884c\u63a7\u5236\u3002\n\n\n\n\n\u4e0b\u9762\u6211\u4eec\u6765\u4ecb\u7ecd\u6e38\u620f\u4e2d\u6e38\u620f\u5bf9\u8c61\u7684Controller\u7684\u4e66\u5199\n\n\n\u9996\u5148\uff0c\u8d2f\u7a7f\u7740\u6211\u4eec\u8fd9\u6574\u4e00\u4e2a\u6e38\u620f\u7684\u5c31\u662fGameObject\u7684\u79fb\u52a8\u5566\uff01\u6240\u4ee5\u6211\u5148\u8bf4\u4e00\u4e0b\u62bd\u8c61\u51fa\u6765\u7684Move\u7c7b\uff0c\u5176\u4ee3\u7801\u5982\u4e0b\uff1a\n\n\npublic\n \nclass\n \nMove\n \n:\n \nMonoBehaviour\n \n{\n\n    \nreadonly\n \nfloat\n \nspeed\n \n=\n \n20\n;\n\n\n    \nint\n \nstatus\n;\n//0: \u9759\u6b62, 1: \u5904\u4e8e\u524d\u6bb5\u79fb\u52a8, 2: \u5904\u4e8e\u540e\u6bb5\u79fb\u52a8\n\n    \nVector3\n \nmiddle\n;\n\n    \nVector3\n \ndestination\n;\n\n\n    \nvoid\n \nUpdate\n()\n\n    \n{\n\n        \nif\n \n(\nstatus\n \n==\n \n1\n)\n\n        \n{\n\n            \nthis\n.\ntransform\n.\nposition\n \n=\n \nVector3\n.\nMoveTowards\n(\nthis\n.\ntransform\n.\nposition\n,\n \nmiddle\n,\n \nTime\n.\ndeltaTime\n \n*\n \nspeed\n);\n\n            \nif\n \n(\ntransform\n.\nposition\n \n==\n \nmiddle\n)\n\n            \n{\n\n                \nstatus\n \n=\n \n2\n;\n\n            \n}\n\n        \n}\n\n        \nelse\n \nif\n \n(\nstatus\n \n==\n \n2\n)\n\n        \n{\n\n            \nthis\n.\ntransform\n.\nposition\n \n=\n \nVector3\n.\nMoveTowards\n(\nthis\n.\ntransform\n.\nposition\n,\n \ndestination\n,\n \nTime\n.\ndeltaTime\n \n*\n \nspeed\n);\n\n            \nif\n \n(\nthis\n.\ntransform\n.\nposition\n \n==\n \ndestination\n)\n\n            \n{\n\n                \nstatus\n \n=\n \n0\n;\n\n            \n}\n\n        \n}\n\n    \n}\n\n\n    \npublic\n \nint\n \ngetStatus\n()\n\n    \n{\n\n        \nreturn\n \nstatus\n;\n\n    \n}\n\n\n    \npublic\n  \nvoid\n \nmoveTo\n(\nVector3\n \n_destination\n)\n\n    \n{\n\n        \ndestination\n \n=\n \n_destination\n;\n\n        \nmiddle\n \n=\n \n_destination\n;\n\n        \nif\n \n(\n_destination\n.\ny\n \n==\n \nthis\n.\ntransform\n.\nposition\n.\ny\n)\n\n        \n{\n\n            \nstatus\n \n=\n \n2\n;\n\n            \nreturn\n;\n\n        \n}\n\n        \nelse\n \nif\n \n(\n_destination\n.\ny\n \n \nthis\n.\ntransform\n.\nposition\n.\ny\n)\n\n        \n{\n\n            \nmiddle\n.\ny\n \n=\n \ntransform\n.\nposition\n.\ny\n;\n\n        \n}\n\n        \nelse\n\n        \n{\n\n            \nmiddle\n.\nx\n \n=\n \ntransform\n.\nposition\n.\nx\n;\n\n        \n}\n\n        \nstatus\n \n=\n \n1\n;\n\n    \n}\n\n\n    \npublic\n \nvoid\n \nreset\n()\n\n    \n{\n\n        \nstatus\n \n=\n \n0\n;\n\n    \n}\n\n\n}\n\n\n\n\n\n\n\u4e3a\u4e86\u8ba9\u7269\u4f53\u4e0d\u8981\u76f4\u63a5\u7a7f\u8fc7land\u7684\u5899\u4f53\uff0c\u5f53character\u4e0a\u8239\u65f6\uff0c\u5148\u628a\u7269\u4f53\u79fb\u52a8\u5230destination\u7684\u5bf9\u5e94\u7684x\u5750\u6807\uff0c\u7136\u540e\u518d\u628a\u7269\u4f53\u79fb\u52a8\u5230\u5bf9\u5e94\u7684\u4f4d\u7f6e\uff0c\u5f53charcter\u4e0b\u8239\u65f6\uff0c\u5148\u628a\u7269\u4f53\u79fb\u52a8\u5230destination\u7684\u5bf9\u5e94\u7684y\u5750\u6807\uff0c\u7136\u540e\u518d\u628a\u7269\u4f53\u79fb\u52a8\u5230\u5bf9\u5e94\u7684\u4f4d\u7f6e,\u8fd9\u6837\u4fdd\u8bc1\u4e86\u7269\u4f53\u4e0d\u4f1a\u7a7f\u8d8a\u5899\u4f53\u8fdb\u884c\u79fb\u52a8\uff0c\u4e14\u5b9e\u73b0\u65b9\u5f0f\u8f83\u4e3a\u7b80\u5355\u3002\n\n\nICharacterController\n\n\n\u56e0\u4e3a\u7267\u5e08\u4e0e\u6076\u9b54\u7684\u52a8\u4f5c\u7b49\u90fd\u662f\u4e00\u6837\u7684\uff0c\u5c31\u53ea\u662f\u5916\u5f62\u3001\u7c7b\u578b\u4e0d\u4e00\u6837\uff0c\u6240\u4ee5\u6211\u628a\u5176\u62bd\u8c61\u4e3a\u4e00\u4e2aController,\u901a\u8fc7type\u533a\u5206\u5b83\u4eec\n\u5176\u4ee3\u7801\u5982\u4e0b:\n\n\npublic\n \nclass\n \nICharacterController\n\n\n{\n\n    \nreadonly\n \nGameObject\n \ncharacter\n;\n\n    \nreadonly\n \nMove\n \nmoveAction\n;\n\n    \nreadonly\n \nint\n \ntype\n;\n//0: Priest, 1: Demon\n\n    \nreadonly\n \nClickGUI\n \nclickGUI\n;\n\n\n    \nbool\n \nonBoat\n;\n\n    \nLandController\n \nlandController\n;\n\n\n    \npublic\n \nICharacterController\n(\nint\n \nchracterType\n,\n \nstring\n \nname\n)\n\n    \n{\n\n        \nif\n \n(\nchracterType\n \n==\n \n0\n)\n\n        \n{\n\n            \nthis\n.\ncharacter\n \n=\n \nObject\n.\nInstantiate\n(\nResources\n.\nLoad\n(\nPrefabs/Priest\n,\n \ntypeof\n(\nGameObject\n)),\n \nVector3\n.\nzero\n,\n \nQuaternion\n.\nidentity\n,\n \nnull\n)\n \nas\n \nGameObject\n;\n\n            \nthis\n.\ntype\n \n=\n \n0\n;\n\n        \n}\n\n        \nelse\n\n        \n{\n\n            \nthis\n.\ncharacter\n \n=\n \nObject\n.\nInstantiate\n(\nResources\n.\nLoad\n(\nPrefabs/Demon\n,\n \ntypeof\n(\nGameObject\n)),\n \nVector3\n.\nzero\n,\n \nQuaternion\n.\nidentity\n,\n \nnull\n)\n \nas\n \nGameObject\n;\n\n            \nthis\n.\ntype\n \n=\n \n1\n;\n\n        \n}\n\n        \ncharacter\n.\nname\n \n=\n \nname\n;\n\n        \nmoveAction\n \n=\n \ncharacter\n.\nAddComponent\n(\ntypeof\n(\nMove\n))\n \nas\n \nMove\n;\n\n        \nclickGUI\n \n=\n \ncharacter\n.\nAddComponent\n(\ntypeof\n(\nClickGUI\n))\n \nas\n \nClickGUI\n;\n\n        \nclickGUI\n.\nsetController\n(\nthis\n);\n\n    \n}\n\n\n    \npublic\n \nstring\n \ngetName\n()\n\n    \n{\n\n        \nreturn\n \ncharacter\n.\nname\n;\n\n    \n}\n\n\n    \npublic\n \nvoid\n \nsetPosition\n(\nVector3\n \npos\n)\n\n    \n{\n\n        \ncharacter\n.\ntransform\n.\nposition\n \n=\n \npos\n;\n\n    \n}\n\n\n    \npublic\n \nvoid\n \nMoveTo\n(\nVector3\n \ndestination\n)\n\n    \n{\n\n        \nmoveAction\n.\nmoveTo\n(\ndestination\n);\n\n    \n}\n\n\n    \npublic\n \nint\n \ngetType\n()\n\n    \n{\n\n        \nreturn\n \ntype\n;\n\n    \n}\n\n\n    \npublic\n \nvoid\n \ngetOnBoat\n(\nBoatController\n \nboatController\n,\n \nint\n \npos\n)\n\n    \n{\n\n        \nlandController\n \n=\n \nnull\n;\n\n        \nif\n \n(\npos\n \n==\n \n0\n)\n\n        \n{\n\n            \ncharacter\n.\ntransform\n.\nrotation\n \n=\n \nQuaternion\n.\nAngleAxis\n(\n90\n,\n \nVector3\n.\nup\n);\n\n        \n}\n\n        \nelse\n\n        \n{\n\n            \ncharacter\n.\ntransform\n.\nrotation\n \n=\n \nQuaternion\n.\nAngleAxis\n(\n270\n,\n \nVector3\n.\nup\n);\n\n        \n}\n\n        \ncharacter\n.\ntransform\n.\nparent\n \n=\n \nboatController\n.\ngetBoat\n().\ntransform\n;\n\n        \nonBoat\n \n=\n \ntrue\n;\n\n    \n}\n\n\n    \npublic\n \nvoid\n \ngetOnLand\n(\nLandController\n \nland\n)\n\n    \n{\n\n        \nlandController\n \n=\n \nland\n;\n\n        \nif\n \n(\nland\n.\ngetType\n()\n \n==\n \n-\n1\n)\n\n        \n{\n\n            \ncharacter\n.\ntransform\n.\nrotation\n \n=\n \nQuaternion\n.\nAngleAxis\n(\n90\n,\n \nVector3\n.\nup\n);\n\n        \n}\n\n        \nelse\n\n        \n{\n\n            \ncharacter\n.\ntransform\n.\nrotation\n \n=\n \nQuaternion\n.\nAngleAxis\n(\n270\n,\n \nVector3\n.\nup\n);\n\n        \n}\n\n        \ncharacter\n.\ntransform\n.\nparent\n \n=\n \nnull\n;\n\n        \nonBoat\n \n=\n \nfalse\n;\n\n    \n}\n\n\n    \npublic\n \nbool\n \nisOnBoat\n()\n\n    \n{\n\n        \nreturn\n \nonBoat\n;\n\n    \n}\n\n\n    \npublic\n \nLandController\n \ngetLandController\n()\n\n    \n{\n\n        \nreturn\n \nlandController\n;\n\n    \n}\n\n\n    \npublic\n \nvoid\n \nreset\n()\n\n    \n{\n\n        \nmoveAction\n.\nreset\n();\n\n        \nlandController\n \n=\n \n(\nGameDirector\n.\ngetInstance\n().\ncurrentSceneController\n \nas\n \nFirstController\n).\nrightLand\n;\n\n        \ngetOnLand\n(\nlandController\n);\n\n        \nsetPosition\n(\nlandController\n.\ngetEmptyPosition\n());\n\n        \nlandController\n.\ngetOnLand\n(\nthis\n);\n\n    \n}\n\n\n}\n\n\n\n\n\n\nCharcterController\u7c7b\u7684\u5b9e\u73b0\u5341\u5206\u7b80\u5355\uff0c\u5c31\u662f\u6839\u636etype\u5bfc\u5165\u9884\u5236\uff0c\u7136\u540e\u518d\u5b9e\u73b0\u4e0a\u8239\uff0c\u4e0a\u5cb8\uff0c\u91cd\u7f6e\u4ee5\u53ca\u4e00\u4e9b\u5176\u4ed6\u7684get, set\u51fd\u6570\u5c31\u5b8c\u6210\u4e86\uff0c\u5177\u4f53\u53ef\u4ee5\u770b\u4ee5\u4e0a\u4ee3\u7801\u7684\u5b9e\u73b0\u3002\n\n\nBoatController\n\n\nBoatController\u7c7b\u7684\u4ee3\u7801\u5982\u4e0b:\n\n\npublic\n \nclass\n \nBoatController\n \n{\n\n    \nreadonly\n \nGameObject\n \nboat\n;\n\n    \nreadonly\n \nMove\n \nmoveAction\n;\n\n    \nreadonly\n \nVector3\n \nright\n \n=\n \nnew\n \nVector3\n(\n3.5f\n,\n \n0\n,\n \n0\n);\n\n    \nreadonly\n \nVector3\n \nleft\n \n=\n \nnew\n \nVector3\n(-\n3.5f\n,\n \n0\n,\n \n0\n);\n\n    \nreadonly\n \nVector3\n[]\n \nright_positions\n;\n\n    \nreadonly\n \nVector3\n[]\n \nleft_positions\n;\n\n\n    \nint\n \nstatus\n;\n// 0: left, 1: right\n\n    \nICharacterController\n[]\n \ncharacterOnBoat\n \n=\n \nnew\n \nICharacterController\n[\n2\n];\n\n\n    \npublic\n \nBoatController\n()\n\n    \n{\n\n        \nstatus\n \n=\n \n1\n;\n\n        \nright_positions\n \n=\n \nnew\n \nVector3\n[]\n \n{\n \nnew\n \nVector3\n(\n2.5F\n,\n \n0.2F\n,\n \n0\n),\n \nnew\n \nVector3\n(\n4.5F\n,\n \n0.2F\n,\n \n0\n)\n \n};\n\n        \nleft_positions\n \n=\n \nnew\n \nVector3\n[]\n \n{\n \nnew\n \nVector3\n(-\n4.5F\n,\n \n0.2F\n,\n \n0\n),\n \nnew\n \nVector3\n(-\n2.5F\n,\n \n0.2F\n,\n \n0\n)\n \n};\n\n        \nboat\n \n=\n \nObject\n.\nInstantiate\n(\nResources\n.\nLoad\n(\nPrefabs/Boat\n,\n \ntypeof\n(\nGameObject\n)),\n \nright\n,\n \nQuaternion\n.\nidentity\n,\n \nnull\n)\n \nas\n \nGameObject\n;\n\n        \nboat\n.\nname\n \n=\n \nboat\n;\n\n        \nmoveAction\n \n=\n \nboat\n.\nAddComponent\n(\ntypeof\n(\nMove\n))\n \nas\n \nMove\n;\n\n        \nboat\n.\nAddComponent\n(\ntypeof\n(\nClickGUI\n));\n\n    \n}\n\n\n    \npublic\n \nvoid\n \nMove\n()\n\n    \n{\n\n        \nif\n \n(\nstatus\n \n==\n \n1\n)\n\n        \n{\n\n            \nmoveAction\n.\nmoveTo\n(\nleft\n);\n\n        \n}\n\n        \nelse\n\n        \n{\n\n            \nmoveAction\n.\nmoveTo\n(\nright\n);\n\n        \n}\n\n        \nstatus\n \n=\n \n1\n \n-\n \nstatus\n;\n\n    \n}\n\n\n    \npublic\n \nint\n \ngetEmptyIndex\n()\n\n    \n{\n\n        \nfor\n \n(\nint\n \ni\n \n=\n \n0\n;\n \ni\n \n \ncharacterOnBoat\n.\nLength\n;\n \ni\n++)\n\n        \n{\n\n            \nif\n \n(\ncharacterOnBoat\n[\ni\n]\n \n==\n \nnull\n)\n\n            \n{\n\n                \nreturn\n \ni\n;\n\n            \n}\n\n        \n}\n\n        \nreturn\n \n-\n1\n;\n\n    \n}\n\n\n    \npublic\n \nVector3\n \ngetEmptyPosition\n()\n\n    \n{\n\n        \nint\n \nindex\n \n=\n \ngetEmptyIndex\n();\n\n        \nif\n \n(\nstatus\n \n==\n \n0\n)\n\n        \n{\n\n            \nreturn\n \nleft_positions\n[\nindex\n];\n\n        \n}\n\n        \nelse\n\n        \n{\n\n            \nreturn\n \nright_positions\n[\nindex\n];\n\n        \n}\n\n    \n}\n\n\n    \npublic\n \nbool\n \nisEmptty\n()\n\n    \n{\n\n        \nfor\n \n(\nint\n \ni\n \n=\n \n0\n;\n \ni\n \n \ncharacterOnBoat\n.\nLength\n;\n \ni\n++)\n\n        \n{\n\n            \nif\n \n(\ncharacterOnBoat\n[\ni\n]\n \n!=\n \nnull\n)\n\n            \n{\n\n                \nreturn\n \nfalse\n;\n\n            \n}\n\n        \n}\n\n        \nreturn\n \ntrue\n;\n\n    \n}\n\n\n    \npublic\n \nvoid\n \ngetOnBoat\n(\nICharacterController\n \ncharacter\n)\n\n    \n{\n\n        \ncharacterOnBoat\n[\ngetEmptyIndex\n()]\n \n=\n \ncharacter\n;\n\n    \n}\n\n\n    \npublic\n \nICharacterController\n \ngetOffBoat\n(\nstring\n \nname\n)\n\n    \n{\n\n        \nfor\n \n(\nint\n \ni\n \n=\n \n0\n;\n \ni\n \n \ncharacterOnBoat\n.\nLength\n;\n \ni\n++)\n\n        \n{\n\n            \nif\n \n(\ncharacterOnBoat\n[\ni\n]\n \n!=\n \nnull\n \n \ncharacterOnBoat\n[\ni\n].\ngetName\n()\n \n==\n \nname\n)\n\n            \n{\n\n                \nICharacterController\n \ncharacter\n \n=\n \ncharacterOnBoat\n[\ni\n];\n\n                \ncharacterOnBoat\n[\ni\n]\n \n=\n \nnull\n;\n\n                \nreturn\n \ncharacter\n;\n\n            \n}\n\n        \n}\n\n        \nreturn\n \nnull\n;\n\n    \n}\n\n\n    \npublic\n \nGameObject\n \ngetBoat\n()\n\n    \n{\n\n        \nreturn\n \nboat\n;\n\n    \n}\n\n\n    \npublic\n \nint\n \ngetBoatPos\n()\n\n    \n{\n\n        \nreturn\n \nstatus\n;\n\n    \n}\n\n\n    \npublic\n \nint\n[]\n \ngetBoatStatus\n()\n\n    \n{\n\n        \nint\n[]\n \nboatStatus\n \n=\n \n{\n \n0\n,\n \n0\n \n};\n\n        \nfor\n \n(\nint\n \ni\n \n=\n \n0\n;\n \ni\n \n \ncharacterOnBoat\n.\nLength\n;\n \ni\n++)\n\n        \n{\n\n            \nif\n \n(\ncharacterOnBoat\n[\ni\n]\n \n==\n \nnull\n)\n\n                \ncontinue\n;\n\n            \nboatStatus\n[\ncharacterOnBoat\n[\ni\n].\ngetType\n()]++;\n\n        \n}\n\n        \nreturn\n \nboatStatus\n;\n\n    \n}\n// 0: Priests, 1: Demon\n\n\n    \npublic\n \nbool\n \navailable\n()\n\n    \n{\n\n        \nreturn\n \n(\nmoveAction\n.\ngetStatus\n()\n \n==\n \n0\n);\n\n    \n}\n\n\n    \npublic\n \nvoid\n \nreset\n()\n\n    \n{\n\n        \nmoveAction\n.\nreset\n();\n\n        \nif\n \n(\nstatus\n \n==\n \n0\n)\n\n        \n{\n\n            \nMove\n();\n\n        \n}\n\n        \ncharacterOnBoat\n \n=\n \nnew\n \nICharacterController\n[\n2\n];\n\n    \n}\n\n\n}\n\n\n\n\n\n\nBoat\u7684\u5b9e\u73b0\u4e5f\u5dee\u4e0d\u591a\uff0c\u53ea\u9700\u8981\u5b9e\u73b0\u521d\u59cb\u5316\u3001\u79fb\u52a8(ToggleBoat),character\u4e0a\u8239\u3001\u4e0b\u8239\u76f8\u5173\u7684\u51fd\u6570\u5c31\u53ef\u4ee5\u5b9e\u73b0\u4e86\u3002\n\n\nLandController\n\n\nLandController\u7c7b\u7684\u4ee3\u7801\u5982\u4e0b:\n\n\npublic\n \nclass\n \nLandController\n \n{\n\n    \nreadonly\n \nGameObject\n \nland\n;\n\n    \nreadonly\n \nVector3\n \nleftPos\n \n=\n \nnew\n \nVector3\n(-\n8.5f\n,\n \n0f\n,\n \n0f\n);\n\n    \nreadonly\n \nVector3\n \nrightPos\n \n=\n \nnew\n \nVector3\n(\n8.5f\n,\n \n0f\n,\n \n0f\n);\n\n    \nreadonly\n \nVector3\n[]\n \nlandPositions\n;\n\n    \nreadonly\n \nint\n \ntype\n;\n// 1:right, -1: left\n\n\n    \nICharacterController\n[]\n \ncharacterOnLand\n;\n\n\n    \npublic\n \nLandController\n(\nint\n \n_type\n)\n\n    \n{\n\n        \nlandPositions\n \n=\n \nnew\n \nVector3\n[]\n \n{\n \nnew\n \nVector3\n(\n6F\n,\n0.5F\n,\n0\n),\n \nnew\n \nVector3\n(\n7F\n,\n0.5F\n,\n0\n),\n \nnew\n \nVector3\n(\n8F\n,\n0.5F\n,\n0\n),\n\n                \nnew\n \nVector3\n(\n9F\n,\n0.5F\n,\n0\n),\n \nnew\n \nVector3\n(\n10F\n,\n0.5F\n,\n0\n),\n \nnew\n \nVector3\n(\n11F\n,\n0.5F\n,\n0\n)\n \n};\n\n\n        \ncharacterOnLand\n \n=\n \nnew\n \nICharacterController\n[\n6\n];\n\n\n        \ntype\n \n=\n \n_type\n;\n\n        \nif\n \n(\ntype\n \n==\n \n1\n)\n\n        \n{\n\n            \nland\n \n=\n \nObject\n.\nInstantiate\n(\nResources\n.\nLoad\n(\nPrefabs/Land\n,\n \ntypeof\n(\nGameObject\n)),\n \nrightPos\n,\n \nQuaternion\n.\nidentity\n,\n \nnull\n)\n \nas\n \nGameObject\n;\n\n            \nland\n.\nname\n \n=\n \nrightLand\n;\n\n        \n}\n\n        \nelse\n\n        \n{\n\n            \nland\n \n=\n \nObject\n.\nInstantiate\n(\nResources\n.\nLoad\n(\nPrefabs/Land\n,\n \ntypeof\n(\nGameObject\n)),\n \nleftPos\n,\n \nQuaternion\n.\nidentity\n,\n \nnull\n)\n \nas\n \nGameObject\n;\n\n            \nland\n.\nname\n \n=\n \nleftLand\n;\n\n        \n}\n\n    \n}\n\n\n    \npublic\n \nVector3\n \ngetEmptyPosition\n()\n\n    \n{\n\n        \nVector3\n \npos\n \n=\n \nlandPositions\n[\ngetEmptyIndex\n()];\n\n        \npos\n.\nx\n \n*=\n \ntype\n;\n\n        \nreturn\n \npos\n;\n\n    \n}\n\n\n    \npublic\n \nint\n \ngetEmptyIndex\n()\n\n    \n{\n\n        \nfor\n \n(\nint\n \ni\n \n=\n \n0\n;\n \ni\n \n \ncharacterOnLand\n.\nLength\n;\n \ni\n++)\n\n        \n{\n\n            \nif\n \n(\ncharacterOnLand\n[\ni\n]\n \n==\n \nnull\n)\n\n                \nreturn\n \ni\n;\n\n        \n}\n\n        \nreturn\n \n-\n1\n;\n\n    \n}\n\n\n    \npublic\n \nvoid\n \ngetOnLand\n(\nICharacterController\n \nchracter\n)\n\n    \n{\n\n        \ncharacterOnLand\n[\ngetEmptyIndex\n()]\n \n=\n \nchracter\n;\n\n    \n}\n\n\n    \npublic\n \nICharacterController\n \ngetOffLand\n(\nstring\n \nname\n)\n\n    \n{\n\n        \nfor\n \n(\nint\n \ni\n \n=\n \n0\n;\n \ni\n \n \ncharacterOnLand\n.\nLength\n;\n \ni\n++)\n\n        \n{\n\n            \nif\n \n(\ncharacterOnLand\n[\ni\n]\n \n!=\n \nnull\n \n \ncharacterOnLand\n[\ni\n].\ngetName\n()\n \n==\n \nname\n)\n\n            \n{\n\n                \nICharacterController\n \ntmp\n \n=\n \ncharacterOnLand\n[\ni\n];\n\n                \ncharacterOnLand\n[\ni\n]\n \n=\n \nnull\n;\n\n                \nreturn\n \ntmp\n;\n\n            \n}\n\n        \n}\n\n        \nreturn\n \nnull\n;\n\n    \n}\n\n\n    \npublic\n \nint\n \ngetType\n()\n\n    \n{\n\n        \nreturn\n \ntype\n;\n\n    \n}\n\n\n    \npublic\n \nint\n[]\n \ngetStatus\n()\n\n    \n{\n\n        \nint\n[]\n \nstatus\n \n=\n \n{\n \n0\n,\n \n0\n \n};\n\n        \nfor\n \n(\nint\n \ni\n \n=\n \n0\n;\n \ni\n \n \ncharacterOnLand\n.\nLength\n;\n \ni\n++)\n\n        \n{\n\n            \nif\n \n(\ncharacterOnLand\n[\ni\n]\n \n==\n \nnull\n)\n\n                \ncontinue\n;\n\n            \nstatus\n[\ncharacterOnLand\n[\ni\n].\ngetType\n()]++;\n\n        \n}\n\n        \nreturn\n \nstatus\n;\n\n    \n}\n// 0: priests, 1: Demon\n\n\n    \npublic\n \nvoid\n \nreset\n()\n\n    \n{\n\n        \ncharacterOnLand\n \n=\n \nnew\n \nICharacterController\n[\n6\n];\n\n    \n}\n\n\n}\n\n\n\n\n\n\nlandController\u7684\u5b9e\u73b0\u548c\u4e0a\u9762\u7684Controller\u4e5f\u7c7b\u4f3c\uff0c\u4e5f\u662f\u5b9e\u73b0\u521d\u59cb\u5316\uff0c\u4e0a\u5cb8\uff0c\u4e0b\u5cb8\u7684\u76f8\u5173\u51fd\u6570\u5c31\u5b8c\u6210\u4e86\u3002\n\n\n\n\n\u5b8c\u6574\u6548\u679c\n\n\n\n\n\n\n\n\n\u603b\u7ed3\uff08\u5bf9MVC\u67b6\u6784\u5f00\u53d1\u6e38\u620f\u7684\u4f53\u4f1a\uff09\n\n\nMVC\u67b6\u6784\u4f5c\u4e3a\u4e00\u79cd\u7ecf\u5178\u7684\u5f00\u53d1\u6a21\u5f0f\uff0c\u662f\u5173\u6ce8\u70b9\u5206\u79bb\u7684\u4e00\u4e2a\u5341\u5206\u7ecf\u5178\u7684\u4f53\u73b0\u3002\u6211\u4eec\u5728\u4e4b\u524d\u7684\u8bfe\u7a0b\u4e2d\uff0c\u5728\u5b8c\u6210\u4e00\u4e9b\u56e2\u961f\u9879\u76ee\u65f6\u4e5f\u6709\u4f7f\u7528\u5176\u4f5c\u4e3a\u57fa\u672c\u67b6\u6784\u8fdb\u884c\u5f00\u53d1\u3002\n\n\n\u9879\u76ee\u4f7f\u7528MVC\u67b6\u6784\u5206\u79bb\u7684\u8bbe\u8ba1\uff0c\n\u7ed9\u6bcf\u4e00\u4e2a\u90e8\u5206\u8d4b\u4e88\u5355\u4e00\u7684\u804c\u8d23\n\uff0c\u4f7f\u5f97\u6211\u4eec\u5728\u5f00\u53d1\u4e00\u4e2a\u6a21\u5757\u65f6\u4e0d\u7528\u592a\u591a\u5730\u5173\u6ce8\u6240\u4f7f\u7528\u5230\u7684\u6a21\u5757\u7684\u5185\u90e8\u5b9e\u73b0\uff0c\u6211\u4eec\u53ea\u9700\u8981\u53bb\u8c03\u7528\u76f8\u5e94\u7684\u63a5\u53e3\u53bb\u5b9e\u73b0\u81ea\u5df1\u60f3\u5b9e\u73b0\u7684\u4e1c\u897f\uff0c\n\u4f7f\u5f97\u6211\u4eec\u7684\u6e38\u620f\u6709\u7740\u66f4\u4f4e\u7684\u8026\u5408\u5ea6\uff0c\u66f4\u65b9\u4fbfDebug\uff0c\u66f4\u65b9\u4fbf\u5f00\u53d1\u3001\u8fed\u4ee3\n\uff0c\u5c31\u4ee5\u6211\u4eec\u4e0a\u9762\u7684\u7a0b\u5e8f\u4e3a\u4f8b\uff0c\u5728\u5f00\u53d1FirstSceneController\u65f6\uff0c\u6211\u4eec\u4e0d\u7528\u600e\u4e48\u5173\u6ce8GameObject\u7684Controller\u5185\u90e8\u662f\u600e\u4e48\u5b9e\u73b0\u7684\uff0c\u6211\u4eec\u53ea\u9700\u8981\u77e5\u9053\uff0c\u5b83\u7ed9\u4e86\u6211\u4eec\u4ec0\u4e48\u63a5\u53e3\uff0c\u8fd9\u4e2a\u63a5\u53e3\u6709\u7740\u4ec0\u4e48\u529f\u80fd\uff0c\u77e5\u9053\u4e86\u4e4b\u540e\u6211\u4eec\u5728FirstSceneController\u4e2d\u76f4\u63a5\u8c03\u7528\u63a5\u53e3\u5c31\u53ef\u4ee5\u4e86\uff0c\u8fd9\u4e0d\u4ec5\u8ba9\u4e2a\u4eba\u5f00\u53d1\u66f4\u6709\u6761\u7406\uff0c\u8fd8\u53ef\u4ee5\u4f7f\u591a\u4eba\u534f\u4f5c\u5f00\u53d1\u66f4\u52a0\u4fbf\u5229\uff0c\u96be\u4ee5\u60f3\u8c61\u4e00\u4e2a\u9ad8\u8026\u5408\u5ea6\u7684\u4e2d\u5927\u578b\u8f6f\u4ef6\u662f\u600e\u4e48\u8fdb\u884c\u591a\u4eba\u534f\u4f5c\u5f00\u53d1\u7684\uff0c\u8fd9\u6837\u7684\u8f6f\u4ef6\u4e00\u4e2a\u4eba\u5f00\u53d1\u90fd\u96be\u53d7\uff0c\u4f55\u51b5\u662f\u591a\u4eba\u3002\n\n\n\u603b\u4e4b\uff0c\u5728\u4e00\u4e9b\u4e2d\u5927\u578b\u9879\u76ee\u4e2d\uff0c\u4f7f\u7528MVC\u67b6\u6784\u8fdb\u884c\u5f00\u53d1\n\n\n\n\n\u8f6f\u4ef6\u8026\u5408\u5ea6\u4f4e\n\n\n\u6a21\u5757\u6613\u590d\u7528\n\n\n\u751f\u4ea7\u6548\u7387\u9ad8(\u5bf9\u4e8e\u4e2d\u5927\u578b\u8f6f\u4ef6) \n\n\n\u6613\u4e8e\u7ef4\u62a4\u3001\u8fed\u4ee3\n\n\n\u6709\u5229\u8f6f\u4ef6\u5de5\u7a0b\u5316\u7ba1\u7406\n\n\n\n\n\n\n\u4f46\u662f\uff0cMVC\u67b6\u6784\u4e0d\u662f\u666e\u9002\u7684\uff0c\u5728\u4e00\u4e9b\u8f83\u5c0f\u89c4\u6a21\u7684\u6e38\u620f\u4e2d\uff0c\u4e25\u683c\u4f7f\u7528MVC\u67b6\u6784\u5bf9\u4e8e\u5f00\u53d1\u7684\u6548\u7387\u662f\u6709\u4e00\u5b9a\u5f71\u54cd\u7684\uff0c\u5c31\u50cf\u6211\u4eec\u8fd9\u6b21\u7684\u4f5c\u4e1a\ud83c\udf1a(\u9003\u3002\u4e0d\u8fc7\uff0c\u901a\u8fc7\u8fd9\u4e00\u6b21\u4e25\u683c\u4f7f\u7528MVC\u67b6\u6784\u5f00\u53d1\u7684\u4f5c\u4e1a\uff0c\u6211\u4eec\u5bf9\u4e8eMVC\u6709\u4e86\u57fa\u672c\u7684\u4e86\u89e3\uff0c\u65b9\u4fbf\u4e86\u6211\u4eec\u4e4b\u540e\u4f7f\u7528MVC\u67b6\u6784\u5bf9\u5176\u4ed6\u4e00\u4e9b\u66f4\u5927\u7684\u6e38\u620f\u8fdb\u884c\u5f00\u53d1\u3002", 
            "title": "\u5b66\u4e60\u7b14\u8bb03-Priestss & Devils\u7f16\u7a0b\u5b9e\u8df5"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb03-Priestss & Devils\u7f16\u7a0b\u5b9e\u8df5/#homework2-", 
            "text": "", 
            "title": "Homework2-\u7f16\u7a0b\u5b9e\u8df5"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb03-Priestss & Devils\u7f16\u7a0b\u5b9e\u8df5/#_1", 
            "text": "\u9605\u8bfb\u4ee5\u4e0b\u6e38\u620f\u811a\u672c    Priests and Devils\nPriests and Devils is a puzzle game in which you will help the Priests and Devils to cross the river within the time limit. There are 3 priests and 3 devils at one side of the river. They all want to get to the other side of this river, but there is only one boat and this boat can only carry two persons each time. And there must be one person steering the boat from one side to the other side. In the flash game, you can click on them to move them and click the go button to move the boat to the other direction. If the priests are out numbered by the devils on either side of the river, they get killed and the game is over. You can try it in many   ways. Keep all priests alive! Good luck \uff01", 
            "title": "\u9898\u76ee\u8981\u6c42"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb03-Priestss & Devils\u7f16\u7a0b\u5b9e\u8df5/#_2", 
            "text": "play the game ( http://www.flash-game.net/game/2535/priests-and-devils.html )   \u5217\u51fa\u6e38\u620f\u4e2d\u63d0\u53ca\u7684\u4e8b\u7269\uff08Objects\uff09\n    \u6e38\u620f\u4e2d\u63d0\u53ca\u7684\u4e8b\u7269\u6709   \u9b54\u9b3c  \u7267\u5e08  \u8239  \u4e24\u8fb9\u7684\u5cb8  \u6cb3     \u7528\u8868\u683c\u5217\u51fa\u73a9\u5bb6\u52a8\u4f5c\u8868\uff08\u89c4\u5219\u8868\uff09\uff0c\u6ce8\u610f\uff0c\u52a8\u4f5c\u8d8a\u5c11\u8d8a\u597d       \u884c\u4e3a  \u884c\u4e3a\u6761\u4ef6      \u7267\u5e08\uff0f\u6076\u9b54\u4e0a\u8239  \u8239\u4e0a\u6709\u7a7a\u4f4d\u4e14\u8239\u5728\u8be5\u5cb8    \u5f00\u8239  \u8239\u4e0a\u6709\u4eba    \u7267\u5e08/\u6076\u9b54\u4e0b\u8239  \u8239\u6709\u4eba\u4e14\u9760\u5728\u5cb8\u8fb9    \u6e38\u620f\u80dc\u5229  6\u4e2a\u4eba\u90fd\u5230\u4e86\u5bf9\u5cb8    \u6e38\u620f\u5931\u8d25  \u6709\u4e00\u8fb9\u5cb8\u4e0a\u4eba\u6570\u4e0d\u5747", 
            "title": "\u7b80\u7b54\u9898\uff1a"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb03-Priestss & Devils\u7f16\u7a0b\u5b9e\u8df5/#_3", 
            "text": "\u8bf7\u5c06\u6e38\u620f\u4e2d\u5bf9\u8c61\u505a\u6210\u9884\u5236  \u5728 GenGameObjects \u4e2d\u521b\u5efa \u957f\u65b9\u5f62\u3001\u6b63\u65b9\u5f62\u3001\u7403 \u53ca\u5176\u8272\u5f69\u4ee3\u8868\u6e38\u620f\u4e2d\u7684\u5bf9\u8c61\u3002  \u4f7f\u7528 C# \u96c6\u5408\u7c7b\u578b \u6709\u6548\u7ec4\u7ec7\u5bf9\u8c61  \u6574\u4e2a\u6e38\u620f\u4ec5 \u4e3b\u6444\u50cf\u673a \u548c \u4e00\u4e2a Empty \u5bf9\u8c61\uff0c \u5176\u4ed6\u5bf9\u8c61\u5fc5\u987b\u4ee3\u7801\u52a8\u6001\u751f\u6210\uff01\uff01\uff01\u6574\u4e2a\u6e38\u620f\u4e0d\u8bb8\u51fa\u73b0 Find \u6e38\u620f\u5bf9\u8c61\uff0c SendMessage \u8fd9\u7c7b\u7a81\u7834\u7a0b\u5e8f\u7ed3\u6784\u7684 \u901a\u8baf\u8026\u5408 \u8bed\u53e5\u3002 \u8fdd\u80cc\u672c\u6761\u51c6\u5219\uff0c\u4e0d\u7ed9\u5206  \u8bf7\u4f7f\u7528\u8bfe\u4ef6\u67b6\u6784\u56fe\u7f16\u7a0b\uff0c\u4e0d\u63a5\u53d7\u975e MVC \u7ed3\u6784\u7a0b\u5e8f  \u6ce8\u610f\u7ec6\u8282\uff0c\u4f8b\u5982\uff1a\u8239\u672a\u9760\u5cb8\uff0c\u7267\u5e08\u4e0e\u9b54\u9b3c\u4e0a\u4e0b\u8239\u8fd0\u52a8\u4e2d\uff0c\u5747\u4e0d\u80fd\u63a5\u53d7\u7528\u6237\u4e8b\u4ef6\uff01", 
            "title": "\u7a0b\u5e8f\u9650\u5236"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb03-Priestss & Devils\u7f16\u7a0b\u5b9e\u8df5/#_4", 
            "text": "github@zhongwq/Unity3D-Learning/Homework2", 
            "title": "\u9879\u76ee\u5730\u5740"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb03-Priestss & Devils\u7f16\u7a0b\u5b9e\u8df5/#unitymvc", 
            "text": "\u60f3\u4f7f\u7528\u4e00\u4e2a\u67b6\u6784\u8fdb\u884c\u5f00\u53d1\uff0c\u6211\u4eec\u80af\u5b9a\u9700\u8981\u5148\u4e86\u89e3MVC\u67b6\u6784\u5982\u4f55\u5728\u57fa\u4e8eUnity\u7684\u6e38\u620f\u7684\u5f00\u53d1\u4e2d\u4f7f\u7528\u3002\u4ed4\u7ec6\u5206\u6790Unity\u4e2d\u7684MVC\u7ed3\u6784\uff0c\u7ed3\u5408\u8001\u5e08\u4e0a\u8bfe\u65f6\u6240\u8bb2\u7684\u5185\u5bb9\uff0c\u5b83\u5176\u5b9e\u548c\u5e73\u65f6\u5728WEB\u4e2d\u5e38\u7528MVC\u7ed3\u6784\u5728\u672c\u8d28\u4e0a\u5e76\u6ca1\u6709\u592a\u5927\u7684\u533a\u522b\uff0c\u90fd\u662f\u5173\u6ce8\u70b9\u5206\u79bb(SOC)\u7684\u4f53\u73b0\uff0c\u662f\u4e00\u79cd\u6210\u719f\u7684\u8f6f\u4ef6\u8bbe\u8ba1\u89c4\u8303\u3002\u4f7f\u7528MVC\u67b6\u6784\u53bb\u5f00\u53d1\u6211\u4eec\u7684\u8f6f\u4ef6\uff0c\u53ef\u4ee5\u4f7f\u5f97\u6211\u4eec\u5728\u62d3\u5c55\u8f6f\u4ef6\u529f\u80fd\u3001\u6539\u8fdb\u7528\u6237\u4ea4\u4e92\u7684\u65f6\u5019\uff0c\u4e0d\u9700\u8981\u91cd\u5199\u5927\u91cf\u7684\u4e1a\u52a1\u903b\u8f91\u4ee3\u7801\uff0c\u51cf\u5c11\u4e86\u6211\u4eec\u7684\u4ee3\u7801\u91cf\uff0c\u65b9\u4fbf\u4e86\u8f6f\u4ef6\u7684\u62d3\u5c55\uff0c\u5c31\u5982\u8001\u5e08\u6240\u8bf4\u7684\uff1a\u201c\u7a33\u56fa\u7684MVC\u6846\u67b6\u7ecf\u5f97\u8d77\u4efb\u610f\u62d3\u5c55\u201d\u3002  \u4e0b\u9762\u6211\u4eec\u6765\u8c08\u8c08Unity\u4e2d\u7684MVC\u67b6\u6784:   M(Model): Unity\u4e2d\uff0cModel\u5c31\u662f\u6e38\u620f\u573a\u666f\u4e2dGameObject\u3001\u548c\u5b83\u4eec\u7684\u5173\u7cfb\u4ee5\u53ca\u540e\u53f0\u7684\u6570\u636e\u6a21\u578b(\u6bd4\u5982\u7528\u6237\u4fe1\u606f\u7b49)\uff0c\u5b83\u4eec\u90fd\u53d7\u5230\u76f8\u5e94\u7684Controller\u7684\u63a7\u5236  V(View): View\u8fd9\u90e8\u5206\u5728\u6e38\u620f\u4e2d\u8d77\u5230\u7684\u662f\u4e0e\u7528\u6237\u8fdb\u884c\u4ea4\u4e92\u7684\u529f\u80fd\uff0c\u5b83\u4eec\u8d1f\u8d23\u5411\u7528\u6237\u6218\u672f\u6e38\u620f\u7ed3\u679c\uff0c\u5904\u7406GUI\u4e8b\u4ef6\u5e76\u901a\u8fc7IUserAction\u63a5\u53e3\u6765\u4e0eController\u8fdb\u884c\u4ea4\u4e92\u3002  C(Controller): Controller\u63a7\u5236\u7740\u6e38\u620f\u573a\u666f\u4e2d\u6240\u6709\u7684\u5bf9\u8c61\uff0c\u5176\u8d1f\u8d23\u63a5\u6536\u6765\u81eaView\u7684\u7528\u6237\u7684\u6307\u4ee4\u5e76\u6839\u636e\u7528\u6237\u8f93\u5165\u7684\u6307\u4ee4\uff0c\u66f4\u65b0Models\u4ee5\u53ca\u66f4\u65b0View\u7684\u72b6\u6001\uff0c\u5176\u53ef\u4ee5\u88ab\u8ba4\u4e3a\u662f\u8fde\u63a5Model\u4e0eView\u7684\u6865\u6881\u3002", 
            "title": "Unity\u4e2d\u7684MVC\u67b6\u6784"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb03-Priestss & Devils\u7f16\u7a0b\u5b9e\u8df5/#uml", 
            "text": "\u5728\u4e86\u89e3\u4e86Unity\u4e2dMVC\u7684\u57fa\u672c\u67b6\u6784\u4e4b\u540e\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5f00\u59cb\u8fdb\u884c\u4e0b\u9762\u7684\u5f00\u53d1\u4e86  \u6309\u7167\u9898\u76ee\u8981\u6c42\u7684MVC\u7ed3\u6784\uff0c\u5206\u6790\u6e38\u620f\u7684\u57fa\u672c\u7ed3\u6784\uff0c\u5f97\u5230\u57fa\u672c\u7684UML\u56fe\u7684\u7ed3\u6784\u5982\u4e0b:", 
            "title": "\u9879\u76eeUML\u56fe"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb03-Priestss & Devils\u7f16\u7a0b\u5b9e\u8df5/#_5", 
            "text": "", 
            "title": "\u5bf9\u5404\u6a21\u5757\u5206\u5757\u8fdb\u884c\u5f00\u53d1"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb03-Priestss & Devils\u7f16\u7a0b\u5b9e\u8df5/#gamedirector", 
            "text": "\u9996\u5148\uff0c\u6211\u4eec\u6765\u5f00\u53d1\u62c5\u8d1f\u7740\u4f17\u591a\u804c\u8d23\u7684GameDirector\uff0c\u5728\u6e38\u620f\u91cc\u9762\uff0c\u5bfc\u6f14(Director)\u7684\u804c\u8d23\u5927\u81f4\u5982\u4e0b:   \u83b7\u53d6\u5f53\u524d\u6e38\u620f\u7684\u573a\u666f  \u63a7\u5236\u573a\u666f\u8fd0\u884c\u3001\u5207\u6362\u3001\u5165\u6808\u4e0e\u51fa\u6808\uff0c\u6682\u505c\u3001\u6062\u590d\u3001\u9000\u51fa  \u7ba1\u7406\u6e38\u620f\u5168\u5c40\u72b6\u6001  \u8bbe\u5b9a\u6e38\u620f\u7684\u914d\u7f6e  \u8bbe\u5b9a\u6e38\u620f\u5168\u5c40\u89c6\u56fe   \u7531\u4e0a\u6211\u4eec\u53ef\u77e5\uff0cGameDirector\u5bf9\u4e8e\u4e00\u4e2a\u6e38\u620f\u662f\u591a\u4e48\u7684\u91cd\u8981\uff0c\u4f46\u662f\uff0c\u5728\u6211\u4eec\u8fd9\u6b21\u7684\u5c0f\u9879\u76ee\u4e2d\uff0c\u5b83\u7684\u804c\u8d23\u6ca1\u6709\u90a3\u4e48\u591a\uff0c\u5b83\u5728\u8fd9\u6b21\u7684\u9879\u76ee\u4e2d\u4e3b\u8981\u8d1f\u8d23\u7684\u662f\u83b7\u53d6\u5f53\u524d\u6e38\u620f\u573a\u666f\uff0c\u5176\u4ee3\u7801\u5982\u4e0b:  public   class   GameDirector   :   System . Object   { \n     private   static   GameDirector   _instance ; \n     public   ISceneController   currentSceneController   {   get ;   set ;   } \n     public   bool   running   {   set ;   get ;   } \n\n     public   static   GameDirector   getInstance () \n     { \n         if   ( _instance   ==   null ) \n         { \n             _instance   =   new   GameDirector (); \n             return   _instance ; \n         }  \n         return   _instance ; \n     } \n\n     public   int   getFPS () \n     { \n         return   Application . targetFrameRate ; \n     } \n\n     public   void   setFPS ( int   fps ) \n     { \n         Application . targetFrameRate   =   fps ;         \n     }  }   Director\u5728\u8fd0\u884c\u65f6\u53ea\u4f1a\u6709\u4e00\u4e2a\u5b9e\u4f8b\u5728\u8fd0\u884c\uff0c\u5728\u4e0a\u9762\u7684\u4ee3\u7801\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u5176\u5e94\u7528\u4e86\u5355\u4f8b\u6a21\u5f0f\u4fdd\u8bc1\u53ea\u6709\u4e00\u4e2a\u5b9e\u4f8b\u751f\u6210\uff0c\u65b9\u4fbf\u4e86\u7c7b\u4e4b\u95f4\u7684\u4e8b\u4ef6\u901a\u4fe1\uff0c\u65b9\u4fbf\u4e86MVC\u7684\u5b9e\u73b0\u3002  Director\u4f5c\u4e3a\u6e38\u620f\u6700\u4e3a\u9ad8\u5c42\u7684Controller\uff0c\u5176\u4e0d\u5177\u4f53\u7684\u63a7\u5236\u6e38\u620f\u4e2d\u7684\u4efb\u4e00\u5bf9\u8c61\uff0c\u5176\u901a\u8fc7\u5bf9currentSceneController\u7684\u7ef4\u62a4\uff0c\u628a\u63a7\u5236\u6e38\u620f\u5bf9\u8c61\u7684\u4efb\u52a1\u4ea4\u7ed9\u4e0d\u540c\u7684SceneController\u3002", 
            "title": "GameDirector"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb03-Priestss & Devils\u7f16\u7a0b\u5b9e\u8df5/#iscenecontroller", 
            "text": "ISceneController\u7684\u4ee3\u7801\u5982\u4e0b  //interface of Scene  public   interface   ISceneController  { \n     void   genGameObjects ();  }   ISCeneController\u662f\u6e38\u620f\u4e2d\u7684\u573a\u666f\u7ba1\u7406\u5668\uff0c\u4fd7\u79f0\u573a\u8bb0\uff0c\u5176\u4e3b\u8981\u804c\u8d23\u5982\u4e0b:   \u7ba1\u7406\u6e38\u620f\u5728\u8be5\u6e38\u620f\u573a\u666f\u4e2d\u7684\u6240\u6709\u7684\u6e38\u620f\u5bf9\u8c61  \u534f\u8c03\u6e38\u620f\u5bf9\u8c61\u3001\u6e38\u620f\u5bf9\u8c61\u7ba1\u7406\u5668(GameObjectControllers)\u4e4b\u95f4\u7684\u901a\u4fe1  \u54cd\u5e94\u5916\u90e8\u8f93\u5165\u4e8b\u4ef6  \u7ba1\u7406\u8be5\u6e38\u620f\u573a\u666f\u7684\u6240\u6709\u7684\u89c4\u5219  \u7ba1\u7406\u4e00\u4e9b\u5176\u4ed6\u7684\u4e1c\u897f   \u8be5\u7edf\u4e00\u7684\u63a5\u53e3\u7684\u5b9e\u73b0\u6b63\u662fGameDirector\u5bf9\u5404\u4e2a\u6e38\u620f\u573a\u666f\u7ba1\u7406\u7684\u5173\u952e\uff0c\u4ed6\u662f\u5bfc\u6f14\u63a7\u5236\u573a\u666f\u7684\u6e20\u9053\uff0cGameDirector\u901a\u8fc7\u5bf9\u4e8ecurrentSceneController\u7684\u7ef4\u62a4\uff0c\u53ef\u4ee5\u7b80\u5355\u5b9e\u73b0\u6e38\u620f\u573a\u666f\u7684\u5404\u79cd\u7ba1\u7406", 
            "title": "ISceneController"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb03-Priestss & Devils\u7f16\u7a0b\u5b9e\u8df5/#iuseraction", 
            "text": "IUserAction\u4e2d\u4f53\u73b0\u4e86\u6e38\u620f\u7f16\u7a0b\u7684\u95e8\u9762\u6a21\u5f0f\uff0c\u6e38\u620f\u5916\u90e8\u4e0e\u4e00\u4e2a\u5b50\u7cfb\u7edf\u7684\u901a\u4fe1\u5fc5\u987b\u901a\u8fc7\u4e00\u4e2a\u7edf\u4e00\u7684\u95e8\u9762\u5bf9\u8c61\u8fdb\u884c\uff0c\u800c\u6211\u4eec\u73b0\u5728\u5b9e\u73b0\u7684IUserAction\u5c31\u662f\u8fd9\u6837\u7684\u4e00\u4e2a\u5bf9\u8c61,GUI\u7c7b\u901a\u8fc7IUserAction\u6765\u4e0eController\u8fdb\u884c\u901a\u4fe1\uff0c\u6211\u4eec\u901a\u8fc7\u5b9e\u73b0IUserAction\u63a5\u53e3\u6765\u5b9a\u4e49Controller\u4e0eGUI\u7684\u4ea4\u4e92\uff0c\u8fd9\u6837\u6211\u4eec\u5728\u5b9e\u73b0Controller\u7c7b\u65f6\u53ea\u9700\u8981\u5b9e\u73b0IUserAction\u5bf9\u5e94\u7684\u63a5\u53e3\uff0c\u4ed6\u5c31\u53ef\u4ee5\u4e0e\u4efb\u610f\u4f7f\u7528IUserAction\u63a5\u53e3\u7684View\u5373GUI\u7c7b\u8c03\u7528\uff0cGUI\u7c7b\u4e5f\u662f\u53ea\u9700\u8c03\u7528\u63a5\u53e3\u4e2d\u7684\u65b9\u6cd5\u5373\u53ef\u5b9e\u73b0\u4e0eController\u7684\u901a\u4fe1, \u65b9\u4fbf\u4e86\u6211\u4eecMVC\u67b6\u6784\u7684\u5b9e\u73b0\u3002  \u5176\u5b9a\u4e49\u5982\u4e0b:  public   interface   IUserAction   { \n     void   restart (); \n     void   ToggleBoat (); \n     void   ClickCharacter ( ICharacterController   chracter );  }", 
            "title": "IUserAction"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb03-Priestss & Devils\u7f16\u7a0b\u5b9e\u8df5/#usergui", 
            "text": "UserGUI\u7684\u4ee3\u7801\u5982\u4e0b:  public   class   UserGUI   :   MonoBehaviour   { \n     public   int   status   =   0 ; \n     private   IUserAction   action ; \n     GUIStyle   headerStyle ; \n     GUIStyle   buttonStyle ; \n\n     // Use this for initialization \n     void   Start   ()   { \n         action   =   GameDirector . getInstance (). currentSceneController   as   IUserAction ; \n         headerStyle   =   new   GUIStyle (); \n         headerStyle . fontSize   =   40 ; \n         headerStyle . alignment   =   TextAnchor . MiddleCenter ; \n         buttonStyle   =   new   GUIStyle ( button ); \n         buttonStyle . fontSize   =   30 ; \n     } \n\n     // Update is called once per frame \n     void   OnGUI   ()   { \n         GUI . Label ( new   Rect ( Screen . width   /   2   -   100 ,   10 ,   200 ,   50 ),   Priests   Demons ,   headerStyle ); \n         if   ( status   ==   1 ) \n         { \n             GUI . Label ( new   Rect ( Screen . width   /   2   -   45 ,   Screen . height   /   2   -   90 ,   100 ,   50 ),   Gameover! ,   headerStyle ); \n             if   ( GUI . Button ( new   Rect ( Screen . width   /   2   -   65 ,   Screen . height   /   2 ,   140 ,   70 ),   Restart ,   buttonStyle )) \n             { \n                 status   =   0 ; \n                 action . restart (); \n             } \n         } \n         else   if   ( status   ==   2 ) \n         { \n             GUI . Label ( new   Rect ( Screen . width   /   2   -   50 ,   Screen . height   /   2   -   90 ,   100 ,   50 ),   Win! ,   headerStyle ); \n             if   ( GUI . Button ( new   Rect ( Screen . width   /   2   -   70 ,   Screen . height   /   2 ,   140 ,   70 ),   Restart ,   buttonStyle )) \n             { \n                 status   =   0 ; \n                 action . restart (); \n             } \n         } \n     }  }   \u7531\u4e0a\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0cUserGUI\u53ea\u662f\u7b80\u5355\u5730\u6839\u636e\u6e38\u620f\u72b6\u6001\uff0c\u5bf9\u6e38\u620f\u4fe1\u606f\u7b49\u8fdb\u884c\u5c55\u793a\uff0c\u7136\u540e\u901a\u8fc7IUserAction\u4e0eController\u8fdb\u884c\u4ea4\u4e92\uff0c\u8fd9\u4e5f\u662f\u6211\u4eec\u5728\u4e0a\u9762\u6240\u63d0\u5230\u7684\uff0c\u6211\u4eec\u53ea\u9700\u8981\u5728GUI\u4e2d\u8c03\u7528IUserAction\u4e2d\u7684\u65b9\u6cd5\u5c31\u53ef\u4ee5\u8fc5\u901f\u5b9e\u73b0\u5bf9\u6e38\u620f\u573a\u666f\u7684\u63a7\u5236\uff0c\u4e0b\u9762\u7684ClickGUI\u4e5f\u662f\u4e00\u6837", 
            "title": "UserGUI"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb03-Priestss & Devils\u7f16\u7a0b\u5b9e\u8df5/#clickgui", 
            "text": "\u8be5\u7c7b\u7684\u4ee3\u7801\u5982\u4e0b:  public   class   ClickGUI   :   MonoBehaviour   { \n     IUserAction   action ; \n     ICharacterController   character ; \n\n     public   void   setController ( ICharacterController   characterController ) \n     { \n         character   =   characterController ; \n     } \n\n     void   Start () \n     { \n         action   =   GameDirector . getInstance (). currentSceneController   as   IUserAction ; \n     } \n\n     void   OnMouseDown () \n     { \n         if   ( gameObject . name   ==   boat ) \n         { \n             action . ToggleBoat (); \n         } \n         else \n         { \n             action . ClickCharacter ( character ); \n         } \n     }  }   \u5728ClickGUI\u4e2d\uff0c\u6211\u4eec\u540c\u6837\u7528\u5230\u4e86IUserAction, ClickGUI\u76d1\u542c\u4e8b\u4ef6\u7684\u53d1\u751f\uff0c\u7136\u540e\u901a\u8fc7IUserAction\u63d0\u4f9b\u7684\u7c7b\u4f3c\u79fb\u52a8\u8239\uff0c\u6e38\u620f\u89d2\u8272\u4e0a\u4e0b\u8239\u7684\u51fd\u6570\uff0c\u628a\u7528\u6237\u6307\u4ee4\u4f20\u7ed9Controller\u8fdb\u884c\u6267\u884c\u3002\u4ece\u800c\u5b9e\u73b0View\u548cController\u4e4b\u95f4\u7684\u4ea4\u4e92\u3002", 
            "title": "ClickGUI"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb03-Priestss & Devils\u7f16\u7a0b\u5b9e\u8df5/#firstcontroller", 
            "text": "\u5728\u8be5\u6e38\u620f\u4e2d\uff0c\u53ea\u6709\u4e00\u4e2a\u6e38\u620f\u573a\u666f\uff0c\u6240\u4ee5  \u5176\u4ee3\u7801\u5b9e\u73b0\u5982\u4e0b:  public   class   FirstController   :   MonoBehaviour ,   ISceneController ,   IUserAction   { \n     readonly   Vector3   riverPosition   =   new   Vector3 ( 0 ,   - 0.25f ,   0 ); \n     UserGUI   userGUI ; \n\n     public   LandController   rightLand ; \n     public   LandController   leftLand ; \n     public   BoatController   boat ; \n     public   ICharacterController []   characters ; \n\n     void   Awake () \n     { \n         GameDirector   director   =   GameDirector . getInstance (); \n         director . currentSceneController   =   this ; \n         userGUI   =   gameObject . AddComponent UserGUI ()   as   UserGUI ; \n         genGameObjects (); \n     } \n\n     public   void   genGameObjects () \n     { \n         characters   =   new   ICharacterController [ 6 ]; \n         GameObject   river   =   Instantiate ( Resources . Load ( Prefabs/River ,   typeof ( GameObject )),   riverPosition ,   Quaternion . identity ,   null )   as   GameObject ; \n         river . name   =   river ; \n\n         boat   =   new   BoatController (); \n         leftLand   =   new   LandController (- 1 ); \n         rightLand   =   new   LandController ( 1 ); \n\n         for   ( int   i   =   0 ;   i     3 ;   i ++) \n         { \n             ICharacterController   priest   =   new   ICharacterController ( 0 ,   priest   +   i ); \n             priest . setPosition ( rightLand . getEmptyPosition ()); \n             priest . getOnLand ( rightLand ); \n             rightLand . getOnLand ( priest ); \n             characters [ i ]   =   priest ; \n         } \n\n         for   ( int   i   =   0 ;   i     3 ;   i ++) \n         { \n             ICharacterController   demon   =   new   ICharacterController ( 1 ,   demon   +   i ); \n             demon . setPosition ( rightLand . getEmptyPosition ()); \n             demon . getOnLand ( rightLand ); \n             rightLand . getOnLand ( demon ); \n             characters [ i + 3 ]   =   demon ; \n         } \n     } \n\n\n     public   void   ClickCharacter ( ICharacterController   character ) \n     { \n         if   ( userGUI . status   !=   0   ||   ! boat . available ()) \n         { \n             return ; \n         } \n         if   ( character . isOnBoat ())   { \n             LandController   land ; \n             if   ( boat . getBoatPos ()   ==   0 ) \n             { \n                 land   =   leftLand ; \n             } \n             else \n             { \n                 land   =   rightLand ; \n             } \n             boat . getOffBoat ( character . getName ()); \n             character . MoveTo ( land . getEmptyPosition ()); \n             character . getOnLand ( land ); \n             land . getOnLand ( character ); \n         } \n         else \n         { \n             LandController   land   =   character . getLandController (); \n             if   ( boat . getEmptyIndex ()   ==   - 1 ) \n                 return ; \n             int   landPos   =   land . getType (),   boatPos   =   ( boat . getBoatPos ()   ==   0 )   ?   - 1   :   1 ; \n             if   ( landPos   !=   boatPos ) \n                 return ; \n             land . getOffLand ( character . getName ()); \n             character . MoveTo ( boat . getEmptyPosition ()); \n             character . getOnBoat ( boat ,   boat . getEmptyIndex ()); \n             boat . getOnBoat ( character ); \n         } \n         userGUI . status   =   checkResult (); \n     } \n\n     public   void   ToggleBoat () \n     { \n         if   ( userGUI . status   !=   0   ||   boat . isEmptty ()) \n             return ; \n         boat . Move (); \n         userGUI . status   =   checkResult (); \n     } \n\n     int   checkResult () \n     { \n         int   leftPriests   =   0 ; \n         int   rightPriests   =   0 ; \n         int   leftDemons   =   0 ; \n         int   rightDemons   =   0 ; \n\n         int []   leftStatus   =   leftLand . getStatus (); \n         leftPriests   +=   leftStatus [ 0 ]; \n         leftDemons   +=   leftStatus [ 1 ]; \n\n         if   ( leftPriests   +   leftDemons   ==   6 ) \n             return   2 ; \n\n         int []   rightStatus   =   rightLand . getStatus (); \n         rightPriests   +=   rightStatus [ 0 ]; \n         rightDemons   +=   rightStatus [ 1 ]; \n\n         int []   boatStatus   =   boat . getBoatStatus (); \n         if   ( boat . getBoatPos ()   ==   0 ) \n         { \n             leftPriests   +=   boatStatus [ 0 ]; \n             leftDemons   +=   boatStatus [ 1 ]; \n         } \n         else \n         { \n             rightPriests   +=   boatStatus [ 0 ]; \n             rightDemons   +=   boatStatus [ 1 ]; \n         } \n\n         if   ( leftPriests     0     leftPriests     leftDemons ) \n             return   1 ; \n         if   ( rightPriests     0     rightPriests     rightDemons ) \n             return   1 ; \n\n         return   0 ; \n     } \n\n     public   void   restart () \n     { \n         boat . reset (); \n         leftLand . reset (); \n         rightLand . reset (); \n         for   ( int   i   =   0 ;   i     characters . Length ;   i ++) \n             characters [ i ]. reset (); \n     }  }   FirstController\u7ee7\u627f\u4e86ISceneController\u548cIUserAction\u8fd9\u4e24\u4e2a\u63a5\u53e3\uff0c\u5e76\u5b9e\u73b0\u4e86\u5176\u91cc\u9762\u7684\u51fd\u6570\uff0c\u5176\u65e2\u53ef\u4ee5\u901a\u8fc7IUserAction\u4e0eView\u8fdb\u884c\u4ea4\u4e92\uff0c\u4e5f\u53ef\u4ee5\u5728LoadResources\u540e\uff0c\u901a\u8fc7GameObject\u7684Controller\u5bf9\u573a\u666f\u4e2d\u7684\u5404\u4e2aGameObject\u8fdb\u884c\u63a7\u5236\u3002   \u4e0b\u9762\u6211\u4eec\u6765\u4ecb\u7ecd\u6e38\u620f\u4e2d\u6e38\u620f\u5bf9\u8c61\u7684Controller\u7684\u4e66\u5199  \u9996\u5148\uff0c\u8d2f\u7a7f\u7740\u6211\u4eec\u8fd9\u6574\u4e00\u4e2a\u6e38\u620f\u7684\u5c31\u662fGameObject\u7684\u79fb\u52a8\u5566\uff01\u6240\u4ee5\u6211\u5148\u8bf4\u4e00\u4e0b\u62bd\u8c61\u51fa\u6765\u7684Move\u7c7b\uff0c\u5176\u4ee3\u7801\u5982\u4e0b\uff1a  public   class   Move   :   MonoBehaviour   { \n     readonly   float   speed   =   20 ; \n\n     int   status ; //0: \u9759\u6b62, 1: \u5904\u4e8e\u524d\u6bb5\u79fb\u52a8, 2: \u5904\u4e8e\u540e\u6bb5\u79fb\u52a8 \n     Vector3   middle ; \n     Vector3   destination ; \n\n     void   Update () \n     { \n         if   ( status   ==   1 ) \n         { \n             this . transform . position   =   Vector3 . MoveTowards ( this . transform . position ,   middle ,   Time . deltaTime   *   speed ); \n             if   ( transform . position   ==   middle ) \n             { \n                 status   =   2 ; \n             } \n         } \n         else   if   ( status   ==   2 ) \n         { \n             this . transform . position   =   Vector3 . MoveTowards ( this . transform . position ,   destination ,   Time . deltaTime   *   speed ); \n             if   ( this . transform . position   ==   destination ) \n             { \n                 status   =   0 ; \n             } \n         } \n     } \n\n     public   int   getStatus () \n     { \n         return   status ; \n     } \n\n     public    void   moveTo ( Vector3   _destination ) \n     { \n         destination   =   _destination ; \n         middle   =   _destination ; \n         if   ( _destination . y   ==   this . transform . position . y ) \n         { \n             status   =   2 ; \n             return ; \n         } \n         else   if   ( _destination . y     this . transform . position . y ) \n         { \n             middle . y   =   transform . position . y ; \n         } \n         else \n         { \n             middle . x   =   transform . position . x ; \n         } \n         status   =   1 ; \n     } \n\n     public   void   reset () \n     { \n         status   =   0 ; \n     }  }   \u4e3a\u4e86\u8ba9\u7269\u4f53\u4e0d\u8981\u76f4\u63a5\u7a7f\u8fc7land\u7684\u5899\u4f53\uff0c\u5f53character\u4e0a\u8239\u65f6\uff0c\u5148\u628a\u7269\u4f53\u79fb\u52a8\u5230destination\u7684\u5bf9\u5e94\u7684x\u5750\u6807\uff0c\u7136\u540e\u518d\u628a\u7269\u4f53\u79fb\u52a8\u5230\u5bf9\u5e94\u7684\u4f4d\u7f6e\uff0c\u5f53charcter\u4e0b\u8239\u65f6\uff0c\u5148\u628a\u7269\u4f53\u79fb\u52a8\u5230destination\u7684\u5bf9\u5e94\u7684y\u5750\u6807\uff0c\u7136\u540e\u518d\u628a\u7269\u4f53\u79fb\u52a8\u5230\u5bf9\u5e94\u7684\u4f4d\u7f6e,\u8fd9\u6837\u4fdd\u8bc1\u4e86\u7269\u4f53\u4e0d\u4f1a\u7a7f\u8d8a\u5899\u4f53\u8fdb\u884c\u79fb\u52a8\uff0c\u4e14\u5b9e\u73b0\u65b9\u5f0f\u8f83\u4e3a\u7b80\u5355\u3002", 
            "title": "FirstController"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb03-Priestss & Devils\u7f16\u7a0b\u5b9e\u8df5/#icharactercontroller", 
            "text": "\u56e0\u4e3a\u7267\u5e08\u4e0e\u6076\u9b54\u7684\u52a8\u4f5c\u7b49\u90fd\u662f\u4e00\u6837\u7684\uff0c\u5c31\u53ea\u662f\u5916\u5f62\u3001\u7c7b\u578b\u4e0d\u4e00\u6837\uff0c\u6240\u4ee5\u6211\u628a\u5176\u62bd\u8c61\u4e3a\u4e00\u4e2aController,\u901a\u8fc7type\u533a\u5206\u5b83\u4eec\n\u5176\u4ee3\u7801\u5982\u4e0b:  public   class   ICharacterController  { \n     readonly   GameObject   character ; \n     readonly   Move   moveAction ; \n     readonly   int   type ; //0: Priest, 1: Demon \n     readonly   ClickGUI   clickGUI ; \n\n     bool   onBoat ; \n     LandController   landController ; \n\n     public   ICharacterController ( int   chracterType ,   string   name ) \n     { \n         if   ( chracterType   ==   0 ) \n         { \n             this . character   =   Object . Instantiate ( Resources . Load ( Prefabs/Priest ,   typeof ( GameObject )),   Vector3 . zero ,   Quaternion . identity ,   null )   as   GameObject ; \n             this . type   =   0 ; \n         } \n         else \n         { \n             this . character   =   Object . Instantiate ( Resources . Load ( Prefabs/Demon ,   typeof ( GameObject )),   Vector3 . zero ,   Quaternion . identity ,   null )   as   GameObject ; \n             this . type   =   1 ; \n         } \n         character . name   =   name ; \n         moveAction   =   character . AddComponent ( typeof ( Move ))   as   Move ; \n         clickGUI   =   character . AddComponent ( typeof ( ClickGUI ))   as   ClickGUI ; \n         clickGUI . setController ( this ); \n     } \n\n     public   string   getName () \n     { \n         return   character . name ; \n     } \n\n     public   void   setPosition ( Vector3   pos ) \n     { \n         character . transform . position   =   pos ; \n     } \n\n     public   void   MoveTo ( Vector3   destination ) \n     { \n         moveAction . moveTo ( destination ); \n     } \n\n     public   int   getType () \n     { \n         return   type ; \n     } \n\n     public   void   getOnBoat ( BoatController   boatController ,   int   pos ) \n     { \n         landController   =   null ; \n         if   ( pos   ==   0 ) \n         { \n             character . transform . rotation   =   Quaternion . AngleAxis ( 90 ,   Vector3 . up ); \n         } \n         else \n         { \n             character . transform . rotation   =   Quaternion . AngleAxis ( 270 ,   Vector3 . up ); \n         } \n         character . transform . parent   =   boatController . getBoat (). transform ; \n         onBoat   =   true ; \n     } \n\n     public   void   getOnLand ( LandController   land ) \n     { \n         landController   =   land ; \n         if   ( land . getType ()   ==   - 1 ) \n         { \n             character . transform . rotation   =   Quaternion . AngleAxis ( 90 ,   Vector3 . up ); \n         } \n         else \n         { \n             character . transform . rotation   =   Quaternion . AngleAxis ( 270 ,   Vector3 . up ); \n         } \n         character . transform . parent   =   null ; \n         onBoat   =   false ; \n     } \n\n     public   bool   isOnBoat () \n     { \n         return   onBoat ; \n     } \n\n     public   LandController   getLandController () \n     { \n         return   landController ; \n     } \n\n     public   void   reset () \n     { \n         moveAction . reset (); \n         landController   =   ( GameDirector . getInstance (). currentSceneController   as   FirstController ). rightLand ; \n         getOnLand ( landController ); \n         setPosition ( landController . getEmptyPosition ()); \n         landController . getOnLand ( this ); \n     }  }   CharcterController\u7c7b\u7684\u5b9e\u73b0\u5341\u5206\u7b80\u5355\uff0c\u5c31\u662f\u6839\u636etype\u5bfc\u5165\u9884\u5236\uff0c\u7136\u540e\u518d\u5b9e\u73b0\u4e0a\u8239\uff0c\u4e0a\u5cb8\uff0c\u91cd\u7f6e\u4ee5\u53ca\u4e00\u4e9b\u5176\u4ed6\u7684get, set\u51fd\u6570\u5c31\u5b8c\u6210\u4e86\uff0c\u5177\u4f53\u53ef\u4ee5\u770b\u4ee5\u4e0a\u4ee3\u7801\u7684\u5b9e\u73b0\u3002", 
            "title": "ICharacterController"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb03-Priestss & Devils\u7f16\u7a0b\u5b9e\u8df5/#boatcontroller", 
            "text": "BoatController\u7c7b\u7684\u4ee3\u7801\u5982\u4e0b:  public   class   BoatController   { \n     readonly   GameObject   boat ; \n     readonly   Move   moveAction ; \n     readonly   Vector3   right   =   new   Vector3 ( 3.5f ,   0 ,   0 ); \n     readonly   Vector3   left   =   new   Vector3 (- 3.5f ,   0 ,   0 ); \n     readonly   Vector3 []   right_positions ; \n     readonly   Vector3 []   left_positions ; \n\n     int   status ; // 0: left, 1: right \n     ICharacterController []   characterOnBoat   =   new   ICharacterController [ 2 ]; \n\n     public   BoatController () \n     { \n         status   =   1 ; \n         right_positions   =   new   Vector3 []   {   new   Vector3 ( 2.5F ,   0.2F ,   0 ),   new   Vector3 ( 4.5F ,   0.2F ,   0 )   }; \n         left_positions   =   new   Vector3 []   {   new   Vector3 (- 4.5F ,   0.2F ,   0 ),   new   Vector3 (- 2.5F ,   0.2F ,   0 )   }; \n         boat   =   Object . Instantiate ( Resources . Load ( Prefabs/Boat ,   typeof ( GameObject )),   right ,   Quaternion . identity ,   null )   as   GameObject ; \n         boat . name   =   boat ; \n         moveAction   =   boat . AddComponent ( typeof ( Move ))   as   Move ; \n         boat . AddComponent ( typeof ( ClickGUI )); \n     } \n\n     public   void   Move () \n     { \n         if   ( status   ==   1 ) \n         { \n             moveAction . moveTo ( left ); \n         } \n         else \n         { \n             moveAction . moveTo ( right ); \n         } \n         status   =   1   -   status ; \n     } \n\n     public   int   getEmptyIndex () \n     { \n         for   ( int   i   =   0 ;   i     characterOnBoat . Length ;   i ++) \n         { \n             if   ( characterOnBoat [ i ]   ==   null ) \n             { \n                 return   i ; \n             } \n         } \n         return   - 1 ; \n     } \n\n     public   Vector3   getEmptyPosition () \n     { \n         int   index   =   getEmptyIndex (); \n         if   ( status   ==   0 ) \n         { \n             return   left_positions [ index ]; \n         } \n         else \n         { \n             return   right_positions [ index ]; \n         } \n     } \n\n     public   bool   isEmptty () \n     { \n         for   ( int   i   =   0 ;   i     characterOnBoat . Length ;   i ++) \n         { \n             if   ( characterOnBoat [ i ]   !=   null ) \n             { \n                 return   false ; \n             } \n         } \n         return   true ; \n     } \n\n     public   void   getOnBoat ( ICharacterController   character ) \n     { \n         characterOnBoat [ getEmptyIndex ()]   =   character ; \n     } \n\n     public   ICharacterController   getOffBoat ( string   name ) \n     { \n         for   ( int   i   =   0 ;   i     characterOnBoat . Length ;   i ++) \n         { \n             if   ( characterOnBoat [ i ]   !=   null     characterOnBoat [ i ]. getName ()   ==   name ) \n             { \n                 ICharacterController   character   =   characterOnBoat [ i ]; \n                 characterOnBoat [ i ]   =   null ; \n                 return   character ; \n             } \n         } \n         return   null ; \n     } \n\n     public   GameObject   getBoat () \n     { \n         return   boat ; \n     } \n\n     public   int   getBoatPos () \n     { \n         return   status ; \n     } \n\n     public   int []   getBoatStatus () \n     { \n         int []   boatStatus   =   {   0 ,   0   }; \n         for   ( int   i   =   0 ;   i     characterOnBoat . Length ;   i ++) \n         { \n             if   ( characterOnBoat [ i ]   ==   null ) \n                 continue ; \n             boatStatus [ characterOnBoat [ i ]. getType ()]++; \n         } \n         return   boatStatus ; \n     } // 0: Priests, 1: Demon \n\n     public   bool   available () \n     { \n         return   ( moveAction . getStatus ()   ==   0 ); \n     } \n\n     public   void   reset () \n     { \n         moveAction . reset (); \n         if   ( status   ==   0 ) \n         { \n             Move (); \n         } \n         characterOnBoat   =   new   ICharacterController [ 2 ]; \n     }  }   Boat\u7684\u5b9e\u73b0\u4e5f\u5dee\u4e0d\u591a\uff0c\u53ea\u9700\u8981\u5b9e\u73b0\u521d\u59cb\u5316\u3001\u79fb\u52a8(ToggleBoat),character\u4e0a\u8239\u3001\u4e0b\u8239\u76f8\u5173\u7684\u51fd\u6570\u5c31\u53ef\u4ee5\u5b9e\u73b0\u4e86\u3002", 
            "title": "BoatController"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb03-Priestss & Devils\u7f16\u7a0b\u5b9e\u8df5/#landcontroller", 
            "text": "LandController\u7c7b\u7684\u4ee3\u7801\u5982\u4e0b:  public   class   LandController   { \n     readonly   GameObject   land ; \n     readonly   Vector3   leftPos   =   new   Vector3 (- 8.5f ,   0f ,   0f ); \n     readonly   Vector3   rightPos   =   new   Vector3 ( 8.5f ,   0f ,   0f ); \n     readonly   Vector3 []   landPositions ; \n     readonly   int   type ; // 1:right, -1: left \n\n     ICharacterController []   characterOnLand ; \n\n     public   LandController ( int   _type ) \n     { \n         landPositions   =   new   Vector3 []   {   new   Vector3 ( 6F , 0.5F , 0 ),   new   Vector3 ( 7F , 0.5F , 0 ),   new   Vector3 ( 8F , 0.5F , 0 ), \n                 new   Vector3 ( 9F , 0.5F , 0 ),   new   Vector3 ( 10F , 0.5F , 0 ),   new   Vector3 ( 11F , 0.5F , 0 )   }; \n\n         characterOnLand   =   new   ICharacterController [ 6 ]; \n\n         type   =   _type ; \n         if   ( type   ==   1 ) \n         { \n             land   =   Object . Instantiate ( Resources . Load ( Prefabs/Land ,   typeof ( GameObject )),   rightPos ,   Quaternion . identity ,   null )   as   GameObject ; \n             land . name   =   rightLand ; \n         } \n         else \n         { \n             land   =   Object . Instantiate ( Resources . Load ( Prefabs/Land ,   typeof ( GameObject )),   leftPos ,   Quaternion . identity ,   null )   as   GameObject ; \n             land . name   =   leftLand ; \n         } \n     } \n\n     public   Vector3   getEmptyPosition () \n     { \n         Vector3   pos   =   landPositions [ getEmptyIndex ()]; \n         pos . x   *=   type ; \n         return   pos ; \n     } \n\n     public   int   getEmptyIndex () \n     { \n         for   ( int   i   =   0 ;   i     characterOnLand . Length ;   i ++) \n         { \n             if   ( characterOnLand [ i ]   ==   null ) \n                 return   i ; \n         } \n         return   - 1 ; \n     } \n\n     public   void   getOnLand ( ICharacterController   chracter ) \n     { \n         characterOnLand [ getEmptyIndex ()]   =   chracter ; \n     } \n\n     public   ICharacterController   getOffLand ( string   name ) \n     { \n         for   ( int   i   =   0 ;   i     characterOnLand . Length ;   i ++) \n         { \n             if   ( characterOnLand [ i ]   !=   null     characterOnLand [ i ]. getName ()   ==   name ) \n             { \n                 ICharacterController   tmp   =   characterOnLand [ i ]; \n                 characterOnLand [ i ]   =   null ; \n                 return   tmp ; \n             } \n         } \n         return   null ; \n     } \n\n     public   int   getType () \n     { \n         return   type ; \n     } \n\n     public   int []   getStatus () \n     { \n         int []   status   =   {   0 ,   0   }; \n         for   ( int   i   =   0 ;   i     characterOnLand . Length ;   i ++) \n         { \n             if   ( characterOnLand [ i ]   ==   null ) \n                 continue ; \n             status [ characterOnLand [ i ]. getType ()]++; \n         } \n         return   status ; \n     } // 0: priests, 1: Demon \n\n     public   void   reset () \n     { \n         characterOnLand   =   new   ICharacterController [ 6 ]; \n     }  }   landController\u7684\u5b9e\u73b0\u548c\u4e0a\u9762\u7684Controller\u4e5f\u7c7b\u4f3c\uff0c\u4e5f\u662f\u5b9e\u73b0\u521d\u59cb\u5316\uff0c\u4e0a\u5cb8\uff0c\u4e0b\u5cb8\u7684\u76f8\u5173\u51fd\u6570\u5c31\u5b8c\u6210\u4e86\u3002", 
            "title": "LandController"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb03-Priestss & Devils\u7f16\u7a0b\u5b9e\u8df5/#_6", 
            "text": "", 
            "title": "\u5b8c\u6574\u6548\u679c"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb03-Priestss & Devils\u7f16\u7a0b\u5b9e\u8df5/#mvc", 
            "text": "MVC\u67b6\u6784\u4f5c\u4e3a\u4e00\u79cd\u7ecf\u5178\u7684\u5f00\u53d1\u6a21\u5f0f\uff0c\u662f\u5173\u6ce8\u70b9\u5206\u79bb\u7684\u4e00\u4e2a\u5341\u5206\u7ecf\u5178\u7684\u4f53\u73b0\u3002\u6211\u4eec\u5728\u4e4b\u524d\u7684\u8bfe\u7a0b\u4e2d\uff0c\u5728\u5b8c\u6210\u4e00\u4e9b\u56e2\u961f\u9879\u76ee\u65f6\u4e5f\u6709\u4f7f\u7528\u5176\u4f5c\u4e3a\u57fa\u672c\u67b6\u6784\u8fdb\u884c\u5f00\u53d1\u3002  \u9879\u76ee\u4f7f\u7528MVC\u67b6\u6784\u5206\u79bb\u7684\u8bbe\u8ba1\uff0c \u7ed9\u6bcf\u4e00\u4e2a\u90e8\u5206\u8d4b\u4e88\u5355\u4e00\u7684\u804c\u8d23 \uff0c\u4f7f\u5f97\u6211\u4eec\u5728\u5f00\u53d1\u4e00\u4e2a\u6a21\u5757\u65f6\u4e0d\u7528\u592a\u591a\u5730\u5173\u6ce8\u6240\u4f7f\u7528\u5230\u7684\u6a21\u5757\u7684\u5185\u90e8\u5b9e\u73b0\uff0c\u6211\u4eec\u53ea\u9700\u8981\u53bb\u8c03\u7528\u76f8\u5e94\u7684\u63a5\u53e3\u53bb\u5b9e\u73b0\u81ea\u5df1\u60f3\u5b9e\u73b0\u7684\u4e1c\u897f\uff0c \u4f7f\u5f97\u6211\u4eec\u7684\u6e38\u620f\u6709\u7740\u66f4\u4f4e\u7684\u8026\u5408\u5ea6\uff0c\u66f4\u65b9\u4fbfDebug\uff0c\u66f4\u65b9\u4fbf\u5f00\u53d1\u3001\u8fed\u4ee3 \uff0c\u5c31\u4ee5\u6211\u4eec\u4e0a\u9762\u7684\u7a0b\u5e8f\u4e3a\u4f8b\uff0c\u5728\u5f00\u53d1FirstSceneController\u65f6\uff0c\u6211\u4eec\u4e0d\u7528\u600e\u4e48\u5173\u6ce8GameObject\u7684Controller\u5185\u90e8\u662f\u600e\u4e48\u5b9e\u73b0\u7684\uff0c\u6211\u4eec\u53ea\u9700\u8981\u77e5\u9053\uff0c\u5b83\u7ed9\u4e86\u6211\u4eec\u4ec0\u4e48\u63a5\u53e3\uff0c\u8fd9\u4e2a\u63a5\u53e3\u6709\u7740\u4ec0\u4e48\u529f\u80fd\uff0c\u77e5\u9053\u4e86\u4e4b\u540e\u6211\u4eec\u5728FirstSceneController\u4e2d\u76f4\u63a5\u8c03\u7528\u63a5\u53e3\u5c31\u53ef\u4ee5\u4e86\uff0c\u8fd9\u4e0d\u4ec5\u8ba9\u4e2a\u4eba\u5f00\u53d1\u66f4\u6709\u6761\u7406\uff0c\u8fd8\u53ef\u4ee5\u4f7f\u591a\u4eba\u534f\u4f5c\u5f00\u53d1\u66f4\u52a0\u4fbf\u5229\uff0c\u96be\u4ee5\u60f3\u8c61\u4e00\u4e2a\u9ad8\u8026\u5408\u5ea6\u7684\u4e2d\u5927\u578b\u8f6f\u4ef6\u662f\u600e\u4e48\u8fdb\u884c\u591a\u4eba\u534f\u4f5c\u5f00\u53d1\u7684\uff0c\u8fd9\u6837\u7684\u8f6f\u4ef6\u4e00\u4e2a\u4eba\u5f00\u53d1\u90fd\u96be\u53d7\uff0c\u4f55\u51b5\u662f\u591a\u4eba\u3002  \u603b\u4e4b\uff0c\u5728\u4e00\u4e9b\u4e2d\u5927\u578b\u9879\u76ee\u4e2d\uff0c\u4f7f\u7528MVC\u67b6\u6784\u8fdb\u884c\u5f00\u53d1   \u8f6f\u4ef6\u8026\u5408\u5ea6\u4f4e  \u6a21\u5757\u6613\u590d\u7528  \u751f\u4ea7\u6548\u7387\u9ad8(\u5bf9\u4e8e\u4e2d\u5927\u578b\u8f6f\u4ef6)   \u6613\u4e8e\u7ef4\u62a4\u3001\u8fed\u4ee3  \u6709\u5229\u8f6f\u4ef6\u5de5\u7a0b\u5316\u7ba1\u7406    \u4f46\u662f\uff0cMVC\u67b6\u6784\u4e0d\u662f\u666e\u9002\u7684\uff0c\u5728\u4e00\u4e9b\u8f83\u5c0f\u89c4\u6a21\u7684\u6e38\u620f\u4e2d\uff0c\u4e25\u683c\u4f7f\u7528MVC\u67b6\u6784\u5bf9\u4e8e\u5f00\u53d1\u7684\u6548\u7387\u662f\u6709\u4e00\u5b9a\u5f71\u54cd\u7684\uff0c\u5c31\u50cf\u6211\u4eec\u8fd9\u6b21\u7684\u4f5c\u4e1a\ud83c\udf1a(\u9003\u3002\u4e0d\u8fc7\uff0c\u901a\u8fc7\u8fd9\u4e00\u6b21\u4e25\u683c\u4f7f\u7528MVC\u67b6\u6784\u5f00\u53d1\u7684\u4f5c\u4e1a\uff0c\u6211\u4eec\u5bf9\u4e8eMVC\u6709\u4e86\u57fa\u672c\u7684\u4e86\u89e3\uff0c\u65b9\u4fbf\u4e86\u6211\u4eec\u4e4b\u540e\u4f7f\u7528MVC\u67b6\u6784\u5bf9\u5176\u4ed6\u4e00\u4e9b\u66f4\u5927\u7684\u6e38\u620f\u8fdb\u884c\u5f00\u53d1\u3002", 
            "title": "\u603b\u7ed3\uff08\u5bf9MVC\u67b6\u6784\u5f00\u53d1\u6e38\u620f\u7684\u4f53\u4f1a\uff09"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb04-\u6e38\u620f\u5bf9\u8c61\u4e0e\u56fe\u5f62\u57fa\u7840/", 
            "text": "Homework3\u64cd\u4f5c\u4e0e\u603b\u7ed3\n\n\n\u53c2\u8003 Fantasy Skybox FREE \u6784\u5efa\u81ea\u5df1\u7684\u6e38\u620f\u573a\u666f\n\n\n\n\n\n\nSkyBox\u7684\u5236\u4f5c\n\n\nSkyBox\u7684\u5236\u4f5c\u5176\u5b9e\u5341\u5206\u7b80\u5355\uff0c\u9996\u5148\u6211\u4eec\u8981\u5148\u4f7f\u75286\u5f20\u56fe\u7247\u5236\u4f5c\u4e00\u4e2a6 sided Skybox\u7684Material\n1. \u5148\u521b\u5efa\u4e00\u4e2aMaterial\n    \n\n2. \u9009\u62e9Skybox-\n6 sided\uff0c\u62d6\u5165\u516d\u5f20\u5bf9\u5e94\u7684\u8d34\u56fe\uff0c\u7ed3\u679c\u5982\u4e0b\n\n\n3. \u7136\u540e\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u7ed9\u6211\u4eec\u7684\u6444\u50cf\u673a\u6dfb\u52a0\u4e00\u4e2aSkybox\u7136\u540e\u628a\u6211\u4eec\u65b0\u5efa\u7684\u8fd9\u4e2aMaterial\u62d6\u7ed9\u5b83\u5566\n\n\n\n\n\u5230\u8fd9\u91cc\uff0cSkyBox\u7684\u5236\u4f5c\u5c31\u5b8c\u6210\u4e86,Game\u4e2d\u7684\u7ed3\u679c\u5982\u4e0b\n\n\n\n\n\n\n\n\u5730\u5f62(Terrain)\u7684\u7b80\u5355\u5236\u4f5c\n\n\n\n\n\u9996\u5148\uff0c\u65b0\u5efa\u4e00\u4e2a3D Object-\nTerrain\n    \n\n\n\n\n\u4e00\u5f00\u59cb\u5f97\u5230\u7684\u5c31\u662f\u4e0a\u9762\u7684\u7a7a\u767d\u7684\u4e00\u4e2a\u5730\u5f62\uff0c\u9996\u5148\uff0c\u4e3a\u4e86\u771f\u5b9e\uff0c\u6211\u4eec\u5148\u7ed9\u4ed6\u52a0\u4e0a\u4e00\u4e2aTexture,\u52a0\u4e0aTexture\u4e4b\u540e\uff0c\u5730\u5f62\u7684\u6837\u5b50\u5c31\u53d8\u6210\u4e86\u8fd9\u6837\n    \n\n\n\n\n\n\n\u90a3\u4e48\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u901a\u8fc7\u5de5\u5177\u7bb1\u7ed9\u5b83\u52a0\u4e0a\u4e00\u7cfb\u5217\u7684\u5730\u5f62\u4e86\uff0c\u5de5\u5177\u7bb1\u7684\u5177\u4f53\u529f\u80fd\u5982\u4e0b\n    \n\n    \u901a\u8fc7\u8fd9\u4e2a\u5de5\u5177\u7bb1\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u9020\u51fa\u4e00\u7cfb\u5217\u7684\u5730\u5f62\u5566\uff0c\u8fd9\u91cc\u6211\u7b80\u5355\u5730\u521b\u5efa\u4e86\u4e00\u4e2a\u5c71\u5761\u548c\u79cd\u4e86\u51e0\u68f5\u6811\uff0cScene\u4e2d\u7684\u7ed3\u679c\u5982\u4e0b\n    \n\nGame\u4e2d\u52a0\u4e0aSkyBox\u7684\u7ed3\u679c\u5982\u4e0b, \u8fd9\u91cc\u7684SkyBox\u7528\u7684\u662fTGU Skybox Pack\u91cc\u7684\u4e00\u4e2aSkyBox\n\n\n\n\n\n\n\n\n\n\n\n\u5199\u4e00\u4e2a\u7b80\u5355\u7684\u603b\u7ed3\uff0c\u603b\u7ed3\u6e38\u620f\u5bf9\u8c61\u7684\u4f7f\u7528\n\n\n\u6b63\u5982\u6211\u4eec\u7b2c\u4e00\u6b21\u4f5c\u4e1a\u6240\u8bf4\u7684\uff0c\u6e38\u620f\u5bf9\u8c61\u51fa\u73b0\u5728\u6e38\u620f\u573a\u666f(Scene)\u4e2d\uff0c\u662f\u81ea\u8eab\u5c5e\u6027(i.e Tag\u3001Layer)\u3001Components\u3001\u8d44\u6e90\u6574\u5408\u5728\u4e00\u8d77\u7684\u7ed3\u679c\u3002\n\u6211\u4eec\u901a\u8fc7\n1. \u5bf9\u4e8e\u5bf9\u8c61\u81ea\u8eab\u5c5e\u6027\u7684\u4fee\u6539\n2. \u7ed9\u6e38\u620f\u5bf9\u8c61\u6dfb\u52a0\u4e0a\u6240\u9700\u7684Components(i.e Transform, Collider, \u5404\u79cdScripts...)\uff0c\u5e76\u5bf9\u76f8\u5e94\u7684Component\u7684\u5c5e\u6027\u8fdb\u884c\u66f4\u6539\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u8c03\u6574\u6e38\u620f\u5bf9\u8c61\u7684\u5f62\u72b6\u3001\u78b0\u649e\u5668\u7b49\u7684\u7279\u6027\u3001\u7ed9\u6e38\u620f\u5bf9\u8c61\u52a0\u4e0a\u5404\u79cd\u5404\u6837\u7684\u529f\u80fd\u3002\n\n\n\u8bf4\u5230\u6e38\u620f\u5bf9\u8c61\u7684\u4f7f\u7528\uff0c\u80af\u5b9a\u5c31\u5c11\u4e0d\u4e86\u6e38\u620f\u5bf9\u8c61\u7684\u52a0\u8f7d\u5566\u3002\u6211\u4eec\u4e0d\u9700\u8981\u4e00\u5f00\u59cb\u5c31\u628a\u6240\u6709\u7684\u6e38\u620f\u5bf9\u8c61\u52a0\u5728\u6e38\u620f\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u6e38\u620f\u8fd0\u884c\u4e2d\u901a\u8fc7Controller\u5bf9\u4e8e\u5b9e\u4f8b\u5316\u65b9\u6cd5Instantiate\u7684\u8c03\u7528\uff0c\u52a8\u6001\u5730\u628a\u6e38\u620f\u5bf9\u8c61\u52a0\u8f7d\u5230\u6e38\u620f\u573a\u666f\u4e2d\u3002", 
            "title": "\u5b66\u4e60\u7b14\u8bb04-\u6e38\u620f\u5bf9\u8c61\u4e0e\u56fe\u5f62\u57fa\u7840"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb04-\u6e38\u620f\u5bf9\u8c61\u4e0e\u56fe\u5f62\u57fa\u7840/#homework3", 
            "text": "", 
            "title": "Homework3\u64cd\u4f5c\u4e0e\u603b\u7ed3"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb04-\u6e38\u620f\u5bf9\u8c61\u4e0e\u56fe\u5f62\u57fa\u7840/#fantasy-skybox-free", 
            "text": "SkyBox\u7684\u5236\u4f5c  SkyBox\u7684\u5236\u4f5c\u5176\u5b9e\u5341\u5206\u7b80\u5355\uff0c\u9996\u5148\u6211\u4eec\u8981\u5148\u4f7f\u75286\u5f20\u56fe\u7247\u5236\u4f5c\u4e00\u4e2a6 sided Skybox\u7684Material\n1. \u5148\u521b\u5efa\u4e00\u4e2aMaterial\n     \n2. \u9009\u62e9Skybox- 6 sided\uff0c\u62d6\u5165\u516d\u5f20\u5bf9\u5e94\u7684\u8d34\u56fe\uff0c\u7ed3\u679c\u5982\u4e0b \n3. \u7136\u540e\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u7ed9\u6211\u4eec\u7684\u6444\u50cf\u673a\u6dfb\u52a0\u4e00\u4e2aSkybox\u7136\u540e\u628a\u6211\u4eec\u65b0\u5efa\u7684\u8fd9\u4e2aMaterial\u62d6\u7ed9\u5b83\u5566  \n\u5230\u8fd9\u91cc\uff0cSkyBox\u7684\u5236\u4f5c\u5c31\u5b8c\u6210\u4e86,Game\u4e2d\u7684\u7ed3\u679c\u5982\u4e0b    \u5730\u5f62(Terrain)\u7684\u7b80\u5355\u5236\u4f5c   \u9996\u5148\uff0c\u65b0\u5efa\u4e00\u4e2a3D Object- Terrain\n       \u4e00\u5f00\u59cb\u5f97\u5230\u7684\u5c31\u662f\u4e0a\u9762\u7684\u7a7a\u767d\u7684\u4e00\u4e2a\u5730\u5f62\uff0c\u9996\u5148\uff0c\u4e3a\u4e86\u771f\u5b9e\uff0c\u6211\u4eec\u5148\u7ed9\u4ed6\u52a0\u4e0a\u4e00\u4e2aTexture,\u52a0\u4e0aTexture\u4e4b\u540e\uff0c\u5730\u5f62\u7684\u6837\u5b50\u5c31\u53d8\u6210\u4e86\u8fd9\u6837\n        \u90a3\u4e48\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u901a\u8fc7\u5de5\u5177\u7bb1\u7ed9\u5b83\u52a0\u4e0a\u4e00\u7cfb\u5217\u7684\u5730\u5f62\u4e86\uff0c\u5de5\u5177\u7bb1\u7684\u5177\u4f53\u529f\u80fd\u5982\u4e0b\n     \n    \u901a\u8fc7\u8fd9\u4e2a\u5de5\u5177\u7bb1\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u9020\u51fa\u4e00\u7cfb\u5217\u7684\u5730\u5f62\u5566\uff0c\u8fd9\u91cc\u6211\u7b80\u5355\u5730\u521b\u5efa\u4e86\u4e00\u4e2a\u5c71\u5761\u548c\u79cd\u4e86\u51e0\u68f5\u6811\uff0cScene\u4e2d\u7684\u7ed3\u679c\u5982\u4e0b\n     \nGame\u4e2d\u52a0\u4e0aSkyBox\u7684\u7ed3\u679c\u5982\u4e0b, \u8fd9\u91cc\u7684SkyBox\u7528\u7684\u662fTGU Skybox Pack\u91cc\u7684\u4e00\u4e2aSkyBox", 
            "title": "\u53c2\u8003 Fantasy Skybox FREE \u6784\u5efa\u81ea\u5df1\u7684\u6e38\u620f\u573a\u666f"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb04-\u6e38\u620f\u5bf9\u8c61\u4e0e\u56fe\u5f62\u57fa\u7840/#_1", 
            "text": "\u6b63\u5982\u6211\u4eec\u7b2c\u4e00\u6b21\u4f5c\u4e1a\u6240\u8bf4\u7684\uff0c\u6e38\u620f\u5bf9\u8c61\u51fa\u73b0\u5728\u6e38\u620f\u573a\u666f(Scene)\u4e2d\uff0c\u662f\u81ea\u8eab\u5c5e\u6027(i.e Tag\u3001Layer)\u3001Components\u3001\u8d44\u6e90\u6574\u5408\u5728\u4e00\u8d77\u7684\u7ed3\u679c\u3002\n\u6211\u4eec\u901a\u8fc7\n1. \u5bf9\u4e8e\u5bf9\u8c61\u81ea\u8eab\u5c5e\u6027\u7684\u4fee\u6539\n2. \u7ed9\u6e38\u620f\u5bf9\u8c61\u6dfb\u52a0\u4e0a\u6240\u9700\u7684Components(i.e Transform, Collider, \u5404\u79cdScripts...)\uff0c\u5e76\u5bf9\u76f8\u5e94\u7684Component\u7684\u5c5e\u6027\u8fdb\u884c\u66f4\u6539\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u8c03\u6574\u6e38\u620f\u5bf9\u8c61\u7684\u5f62\u72b6\u3001\u78b0\u649e\u5668\u7b49\u7684\u7279\u6027\u3001\u7ed9\u6e38\u620f\u5bf9\u8c61\u52a0\u4e0a\u5404\u79cd\u5404\u6837\u7684\u529f\u80fd\u3002  \u8bf4\u5230\u6e38\u620f\u5bf9\u8c61\u7684\u4f7f\u7528\uff0c\u80af\u5b9a\u5c31\u5c11\u4e0d\u4e86\u6e38\u620f\u5bf9\u8c61\u7684\u52a0\u8f7d\u5566\u3002\u6211\u4eec\u4e0d\u9700\u8981\u4e00\u5f00\u59cb\u5c31\u628a\u6240\u6709\u7684\u6e38\u620f\u5bf9\u8c61\u52a0\u5728\u6e38\u620f\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u6e38\u620f\u8fd0\u884c\u4e2d\u901a\u8fc7Controller\u5bf9\u4e8e\u5b9e\u4f8b\u5316\u65b9\u6cd5Instantiate\u7684\u8c03\u7528\uff0c\u52a8\u6001\u5730\u628a\u6e38\u620f\u5bf9\u8c61\u52a0\u8f7d\u5230\u6e38\u620f\u573a\u666f\u4e2d\u3002", 
            "title": "\u5199\u4e00\u4e2a\u7b80\u5355\u7684\u603b\u7ed3\uff0c\u603b\u7ed3\u6e38\u620f\u5bf9\u8c61\u7684\u4f7f\u7528"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb05-Priests & Devils\u52a8\u4f5c\u5206\u79bb\u7248/", 
            "text": "Homework3\u7f16\u7a0b\u5b9e\u8df5\n\n\n\u7267\u5e08\u4e0e\u9b54\u9b3c \u52a8\u4f5c\u5206\u79bb\u7248\n\n\n\u5728\u4e0a\u4e00\u5468\u7684\u7f16\u7a0b\u5b9e\u8df5\u4e2d\uff0c\u6211\u4eec\u5df2\u7ecf\u5b8c\u6210\u4e86\u4e00\u4e2a\u5177\u6709MVC\u67b6\u6784\u7684\u7267\u5e08\u4e0e\u9b54\u9b3c\u7684\u7248\u672c\uff0c\u800c\u6211\u4eec\u8fd9\u5468\u7684\u4efb\u52a1\u5c31\u662f\u5b9e\u73b0\u4e00\u4e2a\u52a8\u4f5c\u7ba1\u7406\u5668\uff0c\u628a\u6211\u4eec\u4e0a\u5468\u5199\u5728GameObjectController\u548cSceneController\u91cc\u7684\u5bf9\u4e8eGameObject\u52a8\u4f5c\u7684\u5904\u7406\u5199\u51fa\u6765\uff0c\u901a\u8fc7\u4e00\u4e2aSceneActionManager\u7684\u5b9e\u4f8b\u6765\u7ba1\u7406\uff0c\u8ba9\u5176\u4e13\u95e8\u8d1f\u8d23GameObject\u7684\u52a8\u4f5c\u3002\u4e0b\u9762\u6211\u4eec\u6765\u8c08\u8c08\u52a8\u4f5c\u7ba1\u7406\u5668\u3002\n\n\n\n\n\u9664\u4e86\u52a0\u5165\u52a8\u4f5c\u7ba1\u7406\u5668\u5916\u7684\u6539\u8fdb\n\n\n\n\n\u6839\u636e\u4e0a\u8bfe\u5b66\u5230\u7684\u5185\u5bb9\uff0c\u7ed9Camera\u52a0\u4e0a\u4e86SkyBox\uff0c\u7f8e\u5316\u4e86\u7a0b\u5e8f\u7684UI\n\n\n\u7ed9\u6e38\u620f\u6dfb\u52a0\u4e86\u5207\u6362\u89c6\u89d2\u7684\u529f\u80fd\uff0c\u73a9\u5bb6\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u559c\u597d\u5728\u5168\u5c40\u89c6\u89d2\u4ee5\u53ca\u8239\u53ea\u8ddf\u968f\u89c6\u89d2\u4e4b\u95f4\u4efb\u610f\u5207\u6362\uff0c\u6e38\u620f\u7684\u4f53\u9a8c\u66f4\u4f73\n\n\n\n\n\n\n\u6e38\u620f\u6548\u679c\n\n\n\n\n\n\n\n\n\u5efa\u7acb\u52a8\u4f5c\u7ba1\u7406\u5668\n\n\n\u5efa\u7acb\u52a8\u4f5c\u7ba1\u7406\u5668\u7684\u610f\u4e49\n\n\n\u5728\u4e0a\u4e00\u4e2a\u7248\u672c\u7684\u7b80\u5355\u7684\u7267\u5e08\u4e0e\u6076\u9b54\u7684\u6e38\u620f\u4e2d\uff0c\u6211\u4e3a\u4e86\u907f\u514dFirstSceneController\u4e2d\u5bf9\u4e8e\u7269\u4f53\u79fb\u52a8\u64cd\u4f5c\u7684\u4ee3\u7801\u91cf\u8fc7\u591a\uff0c\u628a\u7269\u4f53\u7684\u52a8\u4f5c\u5c01\u88c5\u5728GameObjectController\u91cc\u9762\uff0c\u901a\u8fc7\u8fd9\u79cd\u505a\u6cd5\uff0cFirstSceneController\u7684\u4ee3\u7801\u91cf\u7684\u786e\u5f97\u5230\u4e86\u4e00\u5b9a\u7684\u51cf\u5c11\uff0c\u4f46\u662f\u8fd9\u6837\u7684\u8bdd\u6211\u6bcf\u5199\u4e00\u4e2aGameObjectController\u6211\u5c31\u8981\u591a\u5199\u4e00\u4e2a\u7269\u4f53\u8fd0\u52a8\u7684\u51fd\u6570\uff0c\u4e00\u65e6\u9700\u8981\u79fb\u52a8\u7684GameObject\u591a\u8d77\u6765\uff0c\u53ef\u80fd\u5197\u4f59\u7684\u4ee3\u7801\u91cf\u5c31\u4f1a\u5927\u91cf\u589e\u591a\u4e86\uff0c\u800c\u4e14\u4e00\u65e6\u6211\u4eec\u9700\u8981\u4fee\u6539Move\uff0c\u6211\u4eec\u53ef\u80fd\u5c31\u6bcf\u4e00\u4e2a\u7c7b\u90fd\u8981\u8fdb\u884c\u4fee\u6539\u4e86\uff0c\u663e\u7136\u8fd9\u5bf9\u4e8e\u5f00\u53d1\u8005\u975e\u5e38\u4e0d\u53cb\u597d\u3002\n\n\n\u8fd9\u4e2a\u65f6\u5019\uff0c\u52a8\u4f5c\u7ba1\u7406\u5668\u7684\u610f\u4e49\u5c31\u4f53\u73b0\u51fa\u6765\u4e86\uff0c\u5c31\u4ee5\u6211\u4eec\u8fd9\u6b21\u7684\u4f5c\u4e1a\u4e3a\u4f8b\u5b50\uff0cMove\u7684\u4e00\u7c7b\u7684\u52a8\u4f5c\u62bd\u8c61\u6210\u4e00\u4e2a\u52a8\u4f5c\u7c7bMoveAction\uff0c\u7136\u540e\u901a\u8fc7ActionManager\u5bf9\u5176\u8fdb\u884c\u7ba1\u7406\u3002\u6211\u4eec\u5728\u9700\u8981\u7269\u4f53\u8fdb\u884c\u79fb\u52a8\u65f6\uff0c\u53ea\u9700\u8981\u65b0\u5efa\u4e00\u4e2aMoveAction\uff0c\u8c03\u7528ActionManaer\u7684addAction\uff0c\u628a\u5177\u4f53\u7684\u53c2\u6570\u4f20\u7ed9\u5b83\uff0cActionManager\u5c31\u4f1a\u6267\u884c\u6211\u4eec\u7684\u52a8\u4f5c\uff0c\u6211\u4eec\u518d\u4e5f\u4e0d\u7528\u5c06Move\u8fd9\u7c7b\u7684\u52a8\u4f5c\u4e00\u4e2a\u4e00\u4e2a\u5199\u5728\u6211\u4eec\u7684GameObjController\u4e2d\uff0c\u5927\u5927\u51cf\u5c11\u4e86\u6211\u4eec\u7684\u4ee3\u7801\u91cf\uff0c\u5927\u5927\u63d0\u9ad8\u4e86\u6211\u4eec\u4ee3\u7801\u7684\u590d\u7528\u6027\uff0c\u4e00\u65e6\u52a8\u4f5c\u65b9\u9762\u7684\u9700\u6c42\u4fee\u6539\uff0c\u6211\u4eec\u4e5f\u53ea\u9700\u8981\u4fee\u6539\u8be5Action\u7c7b\u7684\u5185\u5bb9\uff0c\u4ee5\u53ca\u76f8\u5173\u8c03\u7528\u521b\u5efa\u8be5Action\u7684\u5730\u65b9\uff0c\u66f4\u52a0\n\u5229\u4e8e\u6211\u4eec\u7684\u7ef4\u62a4\u4ee5\u53ca\u8ba9\u7a0b\u5e8f\u66f4\u80fd\u9002\u5e94\u9700\u6c42\u53d8\u5316\n\u3002\n\n\n\n\n\u5728\u4e86\u89e3\u4e86\u52a8\u4f5c\u7ba1\u7406\u5668\u7684\u610f\u4e49\u4e4b\u540e\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5f00\u59cb\u6211\u4eec\u52a8\u4f5c\u7ba1\u7406\u5668\u7684\u7f16\u5199\u4e86\uff0c\u6211\u4eec\u5148\u753b\u4e00\u4e2a\u52a8\u4f5c\u7ba1\u7406\u5668\u7684UML\u56fe\u7406\u6e05\u4e00\u4e0b\u601d\u8def\n\n\n\u7136\u540e\u4e0e\u4e0a\u4e00\u8282\u8bfe\u7684UML\u56fe\u7ed3\u5408\u8d77\u6765\u53d8\u6210\u6574\u4e2a\u7a0b\u5e8f\u7684UML\u56fe\uff0c\u753b\u51fa\u6765UML\u56fe\u4e4b\u540e\uff0c\u6211\u4eec\u7a0b\u5e8f\u7684\u67b6\u6784\u5c31\u5f88\u6e05\u6670\u4e86\u3002\n\n\n\n\u4e0b\u9762\u6211\u4eec\u5206\u7c7b\u8fdb\u884c\u63cf\u8ff0\n\n\nActionCallBack\n\n\n\u8fd9\u4e2a\u65b9\u6cd5\u4e3b\u8981\u662f\u63d0\u4f9b\u4e00\u4e2a\u8ba9\u52a8\u4f5c\u5b8c\u6210\u65f6\u8c03\u7528\u7684\u63a5\u53e3\uff0c\u4e00\u65e6\u52a8\u4f5c\u5b8c\u6210\uff0c\u8be5\u63a5\u53e3\u5bf9\u5e94\u5b9e\u73b0\u7684\u65b9\u6cd5\u5c31\u4f1a\u88ab\u8c03\u7528\uff0c\u52a8\u4f5c\u7ba1\u7406\u5668\u53ef\u4ee5\u5bf9\u52a8\u4f5c\u7684\u5b8c\u6210\u8fdb\u884c\u54cd\u5e94\u3002\n\n\npublic\n \ninterface\n \nActionCallback\n \n{\n\n    \nvoid\n \nactionDone\n \n(\nSSAction\n \nsource\n);\n\n\n}\n\n\n\n\n\n\n\n\nSSAction\n\n\nSSAction\u8fd9\u4e2a\u7c7b\u5c31\u662f\u6240\u6709\u52a8\u4f5c\u5bf9\u8c61\u7c7b\u62bd\u8c61\u51fa\u6765\u7684\u4e00\u4e2a\u4e0d\u9700\u8981\u7ed1\u5b9a GameObject \u5bf9\u8c61\u7684\u53ef\u7f16\u7a0b\u57fa\u7c7b\uff0c\u5176\u52a8\u4f5c\u7684\u5b9e\u73b0\u7531\u5176\u5b50\u7c7b\u5b9e\u73b0Update\u4e2d\u7684\u5185\u5bb9\u5b9e\u73b0\uff0c\u8fd9\u4e2a\u5728\u540e\u9762\u7684MoveAction\u5c31\u6709\u4f53\u73b0\uff0c\u6240\u6709\u7684SSAction\u5bf9\u8c61\u53d7ActionManager\u7ba1\u7406\u3002\n\n\npublic\n \nclass\n \nSSAction\n \n:\n \nScriptableObject\n \n{\n\n    \npublic\n \nbool\n \nenable\n \n=\n \ntrue\n;\n\n    \npublic\n \nbool\n \ndestroy\n \n=\n \nfalse\n;\n\n\n    \npublic\n \nGameObject\n \ngameObject\n;\n\n    \npublic\n \nTransform\n \ntransform\n;\n\n    \npublic\n \nActionCallback\n \ncallback\n;\n\n\n    \npublic\n \nvirtual\n \nvoid\n \nStart\n()\n\n    \n{\n\n        \nthrow\n \nnew\n \nSystem\n.\nNotImplementedException\n();\n\n    \n}\n\n\n    \npublic\n \nvirtual\n \nvoid\n \nUpdate\n()\n\n    \n{\n\n        \nthrow\n \nnew\n \nSystem\n.\nNotImplementedException\n();\n\n    \n}\n\n\n}\n\n\n\n\n\n\n\n\nMoveAction\n\n\nMoveAction\u5c31\u662f\u4e0a\u9762SSAction\u7684\u4e00\u4e2a\u5b50\u7c7b\uff0c\u5b83\u7684\u4f5c\u7528\u5c31\u662f\u6839\u636e\u7528\u6237\u6240\u63d0\u4f9b\u7684\u76ee\u7684\u5730\u548c\u901f\u5ea6\uff0c\u4f7f\u5f97\u7269\u4f53\u5b8c\u6210\u4e00\u5b9a\u901f\u5ea6\u7684\u5411\u67d0\u4e00\u76ee\u7684\u5730\u7684\u76f4\u7ebf\u8fd0\u52a8\u3002\u5176\u901a\u8fc7Update\u7684\u5b9e\u73b0\u6765\u5b8c\u6210\u9010\u5e27\u7684\u5bf9\u4e8e\u7269\u4f53\u4f4d\u7f6e\u7684\u53d8\u52a8\uff0c\u5b9e\u73b0\u4e00\u4e2a\u6240\u8c13\u7684\u7269\u4f53\u7684\"\u52a8\u4f5c\"\u3002\n\n\npublic\n \nclass\n \nMoveAction\n \n:\n \nSSAction\n \n{\n\n    \npublic\n \nVector3\n \ntarget\n;\n\n    \npublic\n \nfloat\n \nspeed\n;\n\n\n    \nprivate\n \nMoveAction\n(){\n\n    \n}\n\n\n    \npublic\n \nstatic\n \nMoveAction\n \ngetAction\n(\nVector3\n \ntarget\n,\n \nfloat\n \nspeed\n)\n \n{\n\n        \nMoveAction\n \naction\n \n=\n \nScriptableObject\n.\nCreateInstance\nMoveAction\n \n();\n\n        \naction\n.\ntarget\n \n=\n \ntarget\n;\n\n        \naction\n.\nspeed\n \n=\n \nspeed\n;\n\n        \nreturn\n \naction\n;\n\n    \n}\n\n\n    \n// Use this for initialization\n\n    \npublic\n \noverride\n \nvoid\n \nStart\n \n()\n \n{\n\n\n    \n}\n\n\n    \n// Update is called once per frame\n\n    \npublic\n \noverride\n \nvoid\n \nUpdate\n \n()\n \n{\n\n        \ntransform\n.\nposition\n \n=\n \nVector3\n.\nMoveTowards\n(\ntransform\n.\nposition\n,\n \ntarget\n,\n \nspeed\n*\nTime\n.\ndeltaTime\n);\n\n        \nif\n \n(\ntransform\n.\ntransform\n.\nposition\n \n==\n \ntarget\n)\n \n{\n\n            \ndestroy\n \n=\n \ntrue\n;\n\n            \ncallback\n.\nactionDone\n \n(\nthis\n);\n\n        \n}\n\n    \n}\n\n\n}\n\n\n\n\n\n\n\n\nCCSequenceAction\n\n\n\u8fd9\u662f\u4e00\u4e2a\u52a8\u4f5c\u987a\u5e8f\u6267\u884c\u5e8f\u5217\u7684\u662fSSAction\u7684\u5b50\u7c7b\uff0c\u5176\u901a\u8fc7\u4e00\u4e2aAction\u7684List\uff0c\u548cactionDone\u5bf9\u4e8eList\u7684\u7ef4\u62a4\u4ee5\u53caUpdate\u5bf9\u4e8e\u8c03\u7528\u54ea\u4e2aAction\u7684Update\u65b9\u6cd5\u7684\u63a7\u5236\uff0c\u5b9e\u73b0\u4e86\u4e00\u4e2a\u52a8\u4f5c\u987a\u5e8f\u6267\u884c\u7684\u6548\u679c\u3002\u5341\u5206\u65b9\u4fbf\u4e86\u6211\u4eec\u5bf9\u4e8e\u4e00\u4e2a\u8fde\u7eed\u52a8\u4f5c\u7684\u7f16\u7a0b\u3002\n\n\npublic\n \nclass\n \nCCSequenceAction\n \n:\n \nSSAction\n,\n \nActionCallback\n \n{\n\n    \npublic\n \nList\nSSAction\n \nsequence\n;\n\n    \npublic\n \nint\n \nrepeat\n \n=\n \n1\n;\n \n// 1-\nonly do it for once, -1-\nrepeat forever\n\n    \npublic\n \nint\n \ncurrentActionIndex\n \n=\n \n0\n;\n\n\n    \npublic\n \nstatic\n \nCCSequenceAction\n \ngetAction\n(\nint\n \nrepeat\n,\n \nint\n \ncurrentActionIndex\n,\n \nList\nSSAction\n \nsequence\n)\n \n{\n\n        \nCCSequenceAction\n \naction\n \n=\n \nScriptableObject\n.\nCreateInstance\nCCSequenceAction\n();\n\n        \naction\n.\nsequence\n \n=\n \nsequence\n;\n\n        \naction\n.\nrepeat\n \n=\n \nrepeat\n;\n\n        \naction\n.\ncurrentActionIndex\n \n=\n \ncurrentActionIndex\n;\n\n        \nreturn\n \naction\n;\n\n    \n}\n\n\n    \npublic\n \noverride\n \nvoid\n \nUpdate\n()\n \n{\n\n        \nif\n \n(\nsequence\n.\nCount\n \n==\n \n0\n)\nreturn\n;\n\n        \nif\n \n(\ncurrentActionIndex\n \n \nsequence\n.\nCount\n)\n \n{\n\n            \nsequence\n[\ncurrentActionIndex\n].\nUpdate\n();\n\n        \n}\n\n    \n}\n\n\n    \npublic\n \nvoid\n \nactionDone\n(\nSSAction\n \nsource\n)\n \n{\n\n        \nsource\n.\ndestroy\n \n=\n \nfalse\n;\n\n        \nthis\n.\ncurrentActionIndex\n++;\n\n        \nif\n \n(\nthis\n.\ncurrentActionIndex\n \n=\n \nsequence\n.\nCount\n)\n \n{\n\n            \nthis\n.\ncurrentActionIndex\n \n=\n \n0\n;\n\n            \nif\n \n(\nrepeat\n \n \n0\n)\n \nrepeat\n--;\n\n            \nif\n \n(\nrepeat\n \n==\n \n0\n)\n \n{\n\n                \nthis\n.\ndestroy\n \n=\n \ntrue\n;\n\n                \nthis\n.\ncallback\n.\nactionDone\n(\nthis\n);\n\n            \n}\n\n        \n}\n\n    \n}\n\n\n    \npublic\n \noverride\n \nvoid\n \nStart\n()\n \n{\n\n        \nforeach\n(\nSSAction\n \naction\n \nin\n \nsequence\n)\n \n{\n\n            \naction\n.\ngameObject\n \n=\n \nthis\n.\ngameObject\n;\n\n            \naction\n.\ntransform\n \n=\n \nthis\n.\ntransform\n;\n\n            \naction\n.\ncallback\n \n=\n \nthis\n;\n\n            \naction\n.\nStart\n();\n\n        \n}\n\n    \n}\n\n\n    \nvoid\n \nOnDestroy\n()\n \n{\n\n        \nforeach\n(\nSSAction\n \naction\n \nin\n \nsequence\n)\n \n{\n\n            \nDestroyObject\n(\naction\n);\n\n        \n}\n\n    \n}\n\n\n}\n\n\n\n\n\n\n\n\nSSActionManager\n\n\n\u8fd9\u4e2a\u5c31\u662f\u6211\u4eec\u8fd9\u4e00\u671f\u7684\u4e3b\u89d2ActionManager\u4e86\uff0c\u5176\u8d1f\u8d23\u4e86action\u7684\u589e\u52a0\u3001\u5220\u9664\u3001\u6267\u884c\u3002\u5b83\u901a\u8fc7\u5728Update\u4e2d\u8c03\u7528SSAction\u7684Update\u65b9\u6cd5\uff0c\u5b9e\u73b0\u5bf9\u4e8e\u52a8\u4f5c\u7684\u4e00\u4e2a\u8c03\u5ea6\uff0c\u7ba1\u7406\u52a8\u4f5c\u7684\u81ea\u52a8\u6267\u884c\u3002\n\n\npublic\n \nclass\n \nSSActionManager\n \n:\n \nMonoBehaviour\n,\n \nActionCallback\n \n{\n\n    \nprivate\n \nDictionary\nint\n,\n \nSSAction\n \nactions\n \n=\n \nnew\n \nDictionary\nint\n,\n \nSSAction\n();\n\n    \nprivate\n \nList\nSSAction\n \nwaitingToAdd\n \n=\n \nnew\n \nList\nSSAction\n();\n\n    \nprivate\n \nList\nint\n \nwatingToDelete\n \n=\n \nnew\n \nList\nint\n();\n\n\n    \nprotected\n \nvoid\n \nUpdate\n()\n \n{\n\n        \nforeach\n(\nSSAction\n \nac\n \nin\n \nwaitingToAdd\n)\n \n{\n\n            \nactions\n[\nac\n.\nGetInstanceID\n()]\n \n=\n \nac\n;\n\n        \n}\n\n        \nwaitingToAdd\n.\nClear\n();\n\n\n        \nforeach\n(\nKeyValuePair\nint\n,\n \nSSAction\n \nkv\n \nin\n \nactions\n)\n \n{\n\n            \nSSAction\n \nac\n \n=\n \nkv\n.\nValue\n;\n\n            \nif\n \n(\nac\n.\ndestroy\n)\n \n{\n\n                \nwatingToDelete\n.\nAdd\n(\nac\n.\nGetInstanceID\n());\n\n            \n}\n \nelse\n \nif\n \n(\nac\n.\nenable\n)\n \n{\n\n                \nac\n.\nUpdate\n();\n\n            \n}\n\n        \n}\n\n\n        \nforeach\n(\nint\n \nkey\n \nin\n \nwatingToDelete\n)\n \n{\n\n            \nSSAction\n \nac\n \n=\n \nactions\n[\nkey\n];\n\n            \nactions\n.\nRemove\n(\nkey\n);\n\n            \nDestroyObject\n(\nac\n);\n\n        \n}\n\n        \nwatingToDelete\n.\nClear\n();\n\n    \n}\n\n\n    \npublic\n \nvoid\n \naddAction\n(\nGameObject\n \ngameObject\n,\n \nSSAction\n \naction\n,\n \nActionCallback\n \ncallback\n)\n \n{\n\n        \naction\n.\ngameObject\n \n=\n \ngameObject\n;\n\n        \naction\n.\ntransform\n \n=\n \ngameObject\n.\ntransform\n;\n\n        \naction\n.\ncallback\n \n=\n \ncallback\n;\n\n        \nwaitingToAdd\n.\nAdd\n(\naction\n);\n\n        \naction\n.\nStart\n();\n\n    \n}\n\n\n    \npublic\n \nvoid\n \nactionDone\n(\nSSAction\n \nsource\n)\n \n{\n\n\n    \n}\n\n\n}\n\n\n\n\n\n\n\n\nFirstSceneActionManager\n\n\nFirstSceneActionManager\u5c31\u662f\u6211\u4eec\u4e0a\u9762SSActionManager\u7684\u4e00\u4e2a\u5b50\u7c7b\uff0c\u5bf9\u4e8e\u6211\u4eec\u573a\u666f\u4e2d\u5177\u4f53\u7684\u52a8\u4f5c\u8fdb\u884c\u4e86\u5c01\u88c5\uff0c\u6211\u4eec\u53ea\u9700\u8981\u5728FirstSceneController\u4e2d\u8c03\u7528\u8be5\u65b9\u6cd5\uff0c\u5c31\u53ef\u4ee5\u5b9e\u73b0\u6211\u4eec\u4e4b\u524d\u7684Move\u4e86\uff0c\u5341\u5206\u65b9\u4fbf\u4e86\u6211\u4eec\u7684\u7f16\u7a0b\u3002\n\n\npublic\n \nclass\n \nFirstSceneActionManager\n \n:\n \nSSActionManager\n \n{\n\n    \npublic\n \nvoid\n \ntoggleBoat\n(\nBoatController\n \nboat\n)\n \n{\n\n        \nMoveAction\n \naction\n \n=\n \nMoveAction\n.\ngetAction\n \n(\nboat\n.\ngetTarget\n \n(),\n \nboat\n.\nspeed\n);\n\n        \nthis\n.\naddAction\n \n(\nboat\n.\ngetBoat\n \n(),\n \naction\n,\n \nthis\n);\n\n        \nboat\n.\ntoggle\n \n();\n\n    \n}\n\n\n    \npublic\n \nvoid\n \nmoveCharacter\n(\nICharacterController\n \ncharacter\n,\n \nVector3\n \ntarget\n)\n \n{\n\n        \nVector3\n \nnowPos\n \n=\n \ncharacter\n.\ngetPos\n \n();\n\n        \nVector3\n \ntmpPos\n \n=\n \nnowPos\n;\n\n        \nif\n \n(\ntarget\n.\ny\n \n \nnowPos\n.\ny\n)\n \n{\n\n            \ntmpPos\n.\ny\n \n=\n \ntarget\n.\ny\n;\n\n        \n}\n \nelse\n \n{\n\n            \ntmpPos\n.\nx\n \n=\n \ntarget\n.\nx\n;\n\n        \n}\n\n        \nSSAction\n \naction1\n \n=\n \nMoveAction\n.\ngetAction\n(\ntmpPos\n,\n \ncharacter\n.\nspeed\n);\n\n        \nSSAction\n \naction2\n \n=\n \nMoveAction\n.\ngetAction\n(\ntarget\n,\n \ncharacter\n.\nspeed\n);\n\n        \nSSAction\n \nsequenceAction\n \n=\n \nCCSequenceAction\n.\ngetAction\n(\n1\n,\n \n0\n,\n \nnew\n \nList\nSSAction\n{\naction1\n,\n \naction2\n});\n\n        \nthis\n.\naddAction\n(\ncharacter\n.\ngetInstance\n(),\n \nsequenceAction\n,\n \nthis\n);\n\n    \n}\n\n\n}\n\n\n\n\n\n\nFirstController\n\n\n\u5728\u5b8c\u6210\u4e86FirstSceneActionManager\u540e\uff0c\u6211\u4eec\u628aGameObjectController\u4e2d\u4ee5\u53caFirstController\u4e2d\u4e00\u4e9b\u5173\u4e8e\u52a8\u4f5c\u7684\u90e8\u5206\u5220\u9664\uff0c\u7136\u540e\u5728\u539f\u6765\u52a8\u4f5c\u7684\u90e8\u5206\u8c03\u7528FirstSceneActionManager\u63d0\u4f9b\u65b0\u7684\u65b9\u6cd5\u5c31\u53ef\u4ee5\u4e86\u3002(\u4e0d\u8fc7\u56e0\u4e3a\u4e00\u5f00\u59cb\u8bbe\u8ba1\u67b6\u6784\u7684\u65f6\u5019\u6ca1\u6709\u8003\u8651\u52a0\u5165\u52a8\u4f5c\u7ba1\u7406\u5668\uff0c\u52a0\u4e4b\u6700\u8fd1\u65f6\u95f4\u8f83\u7d27\uff0c\u6ca1\u6709\u592a\u591a\u65f6\u95f4\u5bf9\u6e38\u620f\u8fdb\u884c\u91cd\u6784\uff0c\u6240\u4ee5FirstController\u4e2d\u4ecd\u7136\u6709\u7740\u90e8\u5206\u5173\u4e8e\u5224\u65ad\u7269\u4f53\u8fd0\u52a8\u7684\u903b\u8f91)\n\n\npublic\n \nclass\n \nFirstController\n \n:\n \nMonoBehaviour\n,\n \nISceneController\n,\n \nIUserAction\n \n{\n\n    \nUserGUI\n \nuserGUI\n;\n\n\n    \npublic\n \nLandController\n \nrightLand\n;\n\n    \npublic\n \nLandController\n \nleftLand\n;\n\n    \npublic\n \nBoatController\n \nboat\n;\n\n    \npublic\n \nICharacterController\n[]\n \ncharacters\n;\n\n    \nprivate\n \nFirstSceneActionManager\n \nactionManager\n;\n\n\n    \nvoid\n \nAwake\n()\n\n    \n{\n\n        \nGameDirector\n \ndirector\n \n=\n \nGameDirector\n.\ngetInstance\n();\n\n        \ndirector\n.\ncurrentSceneController\n \n=\n \nthis\n;\n\n        \nuserGUI\n \n=\n \ngameObject\n.\nAddComponent\nUserGUI\n()\n \nas\n \nUserGUI\n;\n\n        \ngenGameObjects\n();\n\n    \n}\n\n\n    \nvoid\n \nStart\n()\n \n{\n\n        \nactionManager\n \n=\n \nGetComponent\nFirstSceneActionManager\n \n();\n\n    \n}\n\n\n    \npublic\n \nvoid\n \ngenGameObjects\n()\n\n    \n{\n\n        \ncharacters\n \n=\n \nnew\n \nICharacterController\n[\n6\n];\n\n        \nboat\n \n=\n \nnew\n \nBoatController\n();\n\n        \nleftLand\n \n=\n \nnew\n \nLandController\n(-\n1\n);\n\n        \nrightLand\n \n=\n \nnew\n \nLandController\n(\n1\n);\n\n\n        \nfor\n \n(\nint\n \ni\n \n=\n \n0\n;\n \ni\n \n \n3\n;\n \ni\n++)\n\n        \n{\n\n            \nICharacterController\n \npriest\n \n=\n \nnew\n \nICharacterController\n(\n0\n,\n \npriest\n \n+\n \ni\n);\n\n            \npriest\n.\nsetPosition\n(\nrightLand\n.\ngetEmptyPosition\n());\n\n            \npriest\n.\ngetOnLand\n(\nrightLand\n);\n\n            \nrightLand\n.\ngetOnLand\n(\npriest\n);\n\n            \ncharacters\n[\ni\n]\n \n=\n \npriest\n;\n\n        \n}\n\n\n        \nfor\n \n(\nint\n \ni\n \n=\n \n0\n;\n \ni\n \n \n3\n;\n \ni\n++)\n\n        \n{\n\n            \nICharacterController\n \ndemon\n \n=\n \nnew\n \nICharacterController\n(\n1\n,\n \ndemon\n \n+\n \ni\n);\n\n            \ndemon\n.\nsetPosition\n(\nrightLand\n.\ngetEmptyPosition\n());\n\n            \ndemon\n.\ngetOnLand\n(\nrightLand\n);\n\n            \nrightLand\n.\ngetOnLand\n(\ndemon\n);\n\n            \ncharacters\n[\ni\n+\n3\n]\n \n=\n \ndemon\n;\n\n        \n}\n\n    \n}\n\n\n\n    \npublic\n \nvoid\n \nClickCharacter\n(\nICharacterController\n \ncharacter\n)\n\n    \n{\n\n        \nif\n \n(\nuserGUI\n.\nstatus\n \n!=\n \n0\n \n||\n \n!\nboat\n.\navailable\n())\n\n        \n{\n\n            \nreturn\n;\n\n        \n}\n\n        \nif\n \n(\ncharacter\n.\nisOnBoat\n())\n \n{\n\n            \nLandController\n \nland\n;\n\n            \nif\n \n(\nboat\n.\ngetBoatPos\n()\n \n==\n \n0\n)\n\n            \n{\n\n                \nland\n \n=\n \nleftLand\n;\n\n            \n}\n\n            \nelse\n\n            \n{\n\n                \nland\n \n=\n \nrightLand\n;\n\n            \n}\n\n            \nboat\n.\ngetOffBoat\n(\ncharacter\n.\ngetName\n());\n\n            \nactionManager\n.\nmoveCharacter\n \n(\ncharacter\n,\n \nland\n.\ngetEmptyPosition\n \n());\n\n            \ncharacter\n.\ngetOnLand\n(\nland\n);\n\n            \nland\n.\ngetOnLand\n(\ncharacter\n);\n\n        \n}\n\n        \nelse\n\n        \n{\n\n            \nLandController\n \nland\n \n=\n \ncharacter\n.\ngetLandController\n();\n\n            \nif\n \n(\nboat\n.\ngetEmptyIndex\n()\n \n==\n \n-\n1\n)\n\n                \nreturn\n;\n\n            \nint\n \nlandPos\n \n=\n \nland\n.\ngetType\n(),\n \nboatPos\n \n=\n \n(\nboat\n.\ngetBoatPos\n()\n \n==\n \n0\n)\n \n?\n \n-\n1\n \n:\n \n1\n;\n\n            \nif\n \n(\nlandPos\n \n!=\n \nboatPos\n)\n\n                \nreturn\n;\n\n            \nland\n.\ngetOffLand\n(\ncharacter\n.\ngetName\n());\n\n            \nactionManager\n.\nmoveCharacter\n \n(\ncharacter\n,\n \nboat\n.\ngetEmptyPosition\n \n());\n\n            \ncharacter\n.\ngetOnBoat\n(\nboat\n,\n \nboat\n.\ngetEmptyIndex\n());\n\n            \nboat\n.\ngetOnBoat\n(\ncharacter\n);\n\n        \n}\n\n        \nuserGUI\n.\nstatus\n \n=\n \ncheckResult\n();\n\n    \n}\n\n\n    \npublic\n \nvoid\n \nToggleBoat\n()\n\n    \n{\n\n        \nif\n \n(\nuserGUI\n.\nstatus\n \n!=\n \n0\n \n||\n \nboat\n.\nisEmpty\n()\n \n||\n \n!\nboat\n.\navailable\n())\n\n            \nreturn\n;\n\n        \nactionManager\n.\ntoggleBoat\n \n(\nboat\n);\n\n        \nuserGUI\n.\nstatus\n \n=\n \ncheckResult\n();\n\n    \n}\n\n\n    \nint\n \ncheckResult\n()\n\n    \n{\n\n        \nint\n \nleftPriests\n \n=\n \n0\n;\n\n        \nint\n \nrightPriests\n \n=\n \n0\n;\n\n        \nint\n \nleftDemons\n \n=\n \n0\n;\n\n        \nint\n \nrightDemons\n \n=\n \n0\n;\n\n\n        \nint\n[]\n \nleftStatus\n \n=\n \nleftLand\n.\ngetStatus\n();\n\n        \nleftPriests\n \n+=\n \nleftStatus\n[\n0\n];\n\n        \nleftDemons\n \n+=\n \nleftStatus\n[\n1\n];\n\n\n        \nif\n \n(\nleftPriests\n \n+\n \nleftDemons\n \n==\n \n6\n)\n\n            \nreturn\n \n2\n;\n\n\n        \nint\n[]\n \nrightStatus\n \n=\n \nrightLand\n.\ngetStatus\n();\n\n        \nrightPriests\n \n+=\n \nrightStatus\n[\n0\n];\n\n        \nrightDemons\n \n+=\n \nrightStatus\n[\n1\n];\n\n\n        \nint\n[]\n \nboatStatus\n \n=\n \nboat\n.\ngetBoatStatus\n();\n\n        \nif\n \n(\nboat\n.\ngetBoatPos\n()\n \n==\n \n0\n)\n\n        \n{\n\n            \nleftPriests\n \n+=\n \nboatStatus\n[\n0\n];\n\n            \nleftDemons\n \n+=\n \nboatStatus\n[\n1\n];\n\n        \n}\n\n        \nelse\n\n        \n{\n\n            \nrightPriests\n \n+=\n \nboatStatus\n[\n0\n];\n\n            \nrightDemons\n \n+=\n \nboatStatus\n[\n1\n];\n\n        \n}\n\n\n        \nif\n \n(\nleftPriests\n \n \n0\n \n \nleftPriests\n \n \nleftDemons\n)\n\n            \nreturn\n \n1\n;\n\n        \nif\n \n(\nrightPriests\n \n \n0\n \n \nrightPriests\n \n \nrightDemons\n)\n\n            \nreturn\n \n1\n;\n\n\n        \nreturn\n \n0\n;\n\n    \n}\n\n\n    \npublic\n \nvoid\n \nrestart\n()\n\n    \n{\n\n        \nboat\n.\nreset\n();\n\n        \nleftLand\n.\nreset\n();\n\n        \nrightLand\n.\nreset\n();\n\n        \nfor\n \n(\nint\n \ni\n \n=\n \n0\n;\n \ni\n \n \ncharacters\n.\nLength\n;\n \ni\n++)\n\n            \ncharacters\n[\ni\n].\nreset\n();\n\n    \n}\n\n\n}\n\n\n\n\n\n\n\n\n\u5230\u8fd9\u91cc\uff0c\u8fd9\u5468\u7684\u4f5c\u4e1a\u5c31\u5b8c\u6210\u5566\uff0c\u4e0d\u8bf4\u4e86\uff0c\u5148\u53bb\u809d\u73b0\u64cd\u4e86(\u9003\ud83c\udf1a\n\n\n\u611f\u8c22\u9605\u8bfb\u6211\u7684\u535a\u5ba2\uff01\ud83d\ude0b", 
            "title": "\u5b66\u4e60\u7b14\u8bb05-Priests & Devils\u52a8\u4f5c\u5206\u79bb\u7248"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb05-Priests & Devils\u52a8\u4f5c\u5206\u79bb\u7248/#homework3", 
            "text": "", 
            "title": "Homework3\u7f16\u7a0b\u5b9e\u8df5"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb05-Priests & Devils\u52a8\u4f5c\u5206\u79bb\u7248/#_1", 
            "text": "\u5728\u4e0a\u4e00\u5468\u7684\u7f16\u7a0b\u5b9e\u8df5\u4e2d\uff0c\u6211\u4eec\u5df2\u7ecf\u5b8c\u6210\u4e86\u4e00\u4e2a\u5177\u6709MVC\u67b6\u6784\u7684\u7267\u5e08\u4e0e\u9b54\u9b3c\u7684\u7248\u672c\uff0c\u800c\u6211\u4eec\u8fd9\u5468\u7684\u4efb\u52a1\u5c31\u662f\u5b9e\u73b0\u4e00\u4e2a\u52a8\u4f5c\u7ba1\u7406\u5668\uff0c\u628a\u6211\u4eec\u4e0a\u5468\u5199\u5728GameObjectController\u548cSceneController\u91cc\u7684\u5bf9\u4e8eGameObject\u52a8\u4f5c\u7684\u5904\u7406\u5199\u51fa\u6765\uff0c\u901a\u8fc7\u4e00\u4e2aSceneActionManager\u7684\u5b9e\u4f8b\u6765\u7ba1\u7406\uff0c\u8ba9\u5176\u4e13\u95e8\u8d1f\u8d23GameObject\u7684\u52a8\u4f5c\u3002\u4e0b\u9762\u6211\u4eec\u6765\u8c08\u8c08\u52a8\u4f5c\u7ba1\u7406\u5668\u3002", 
            "title": "\u7267\u5e08\u4e0e\u9b54\u9b3c \u52a8\u4f5c\u5206\u79bb\u7248"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb05-Priests & Devils\u52a8\u4f5c\u5206\u79bb\u7248/#_2", 
            "text": "\u6839\u636e\u4e0a\u8bfe\u5b66\u5230\u7684\u5185\u5bb9\uff0c\u7ed9Camera\u52a0\u4e0a\u4e86SkyBox\uff0c\u7f8e\u5316\u4e86\u7a0b\u5e8f\u7684UI  \u7ed9\u6e38\u620f\u6dfb\u52a0\u4e86\u5207\u6362\u89c6\u89d2\u7684\u529f\u80fd\uff0c\u73a9\u5bb6\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u559c\u597d\u5728\u5168\u5c40\u89c6\u89d2\u4ee5\u53ca\u8239\u53ea\u8ddf\u968f\u89c6\u89d2\u4e4b\u95f4\u4efb\u610f\u5207\u6362\uff0c\u6e38\u620f\u7684\u4f53\u9a8c\u66f4\u4f73", 
            "title": "\u9664\u4e86\u52a0\u5165\u52a8\u4f5c\u7ba1\u7406\u5668\u5916\u7684\u6539\u8fdb"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb05-Priests & Devils\u52a8\u4f5c\u5206\u79bb\u7248/#_3", 
            "text": "", 
            "title": "\u6e38\u620f\u6548\u679c"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb05-Priests & Devils\u52a8\u4f5c\u5206\u79bb\u7248/#_4", 
            "text": "", 
            "title": "\u5efa\u7acb\u52a8\u4f5c\u7ba1\u7406\u5668"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb05-Priests & Devils\u52a8\u4f5c\u5206\u79bb\u7248/#_5", 
            "text": "\u5728\u4e0a\u4e00\u4e2a\u7248\u672c\u7684\u7b80\u5355\u7684\u7267\u5e08\u4e0e\u6076\u9b54\u7684\u6e38\u620f\u4e2d\uff0c\u6211\u4e3a\u4e86\u907f\u514dFirstSceneController\u4e2d\u5bf9\u4e8e\u7269\u4f53\u79fb\u52a8\u64cd\u4f5c\u7684\u4ee3\u7801\u91cf\u8fc7\u591a\uff0c\u628a\u7269\u4f53\u7684\u52a8\u4f5c\u5c01\u88c5\u5728GameObjectController\u91cc\u9762\uff0c\u901a\u8fc7\u8fd9\u79cd\u505a\u6cd5\uff0cFirstSceneController\u7684\u4ee3\u7801\u91cf\u7684\u786e\u5f97\u5230\u4e86\u4e00\u5b9a\u7684\u51cf\u5c11\uff0c\u4f46\u662f\u8fd9\u6837\u7684\u8bdd\u6211\u6bcf\u5199\u4e00\u4e2aGameObjectController\u6211\u5c31\u8981\u591a\u5199\u4e00\u4e2a\u7269\u4f53\u8fd0\u52a8\u7684\u51fd\u6570\uff0c\u4e00\u65e6\u9700\u8981\u79fb\u52a8\u7684GameObject\u591a\u8d77\u6765\uff0c\u53ef\u80fd\u5197\u4f59\u7684\u4ee3\u7801\u91cf\u5c31\u4f1a\u5927\u91cf\u589e\u591a\u4e86\uff0c\u800c\u4e14\u4e00\u65e6\u6211\u4eec\u9700\u8981\u4fee\u6539Move\uff0c\u6211\u4eec\u53ef\u80fd\u5c31\u6bcf\u4e00\u4e2a\u7c7b\u90fd\u8981\u8fdb\u884c\u4fee\u6539\u4e86\uff0c\u663e\u7136\u8fd9\u5bf9\u4e8e\u5f00\u53d1\u8005\u975e\u5e38\u4e0d\u53cb\u597d\u3002  \u8fd9\u4e2a\u65f6\u5019\uff0c\u52a8\u4f5c\u7ba1\u7406\u5668\u7684\u610f\u4e49\u5c31\u4f53\u73b0\u51fa\u6765\u4e86\uff0c\u5c31\u4ee5\u6211\u4eec\u8fd9\u6b21\u7684\u4f5c\u4e1a\u4e3a\u4f8b\u5b50\uff0cMove\u7684\u4e00\u7c7b\u7684\u52a8\u4f5c\u62bd\u8c61\u6210\u4e00\u4e2a\u52a8\u4f5c\u7c7bMoveAction\uff0c\u7136\u540e\u901a\u8fc7ActionManager\u5bf9\u5176\u8fdb\u884c\u7ba1\u7406\u3002\u6211\u4eec\u5728\u9700\u8981\u7269\u4f53\u8fdb\u884c\u79fb\u52a8\u65f6\uff0c\u53ea\u9700\u8981\u65b0\u5efa\u4e00\u4e2aMoveAction\uff0c\u8c03\u7528ActionManaer\u7684addAction\uff0c\u628a\u5177\u4f53\u7684\u53c2\u6570\u4f20\u7ed9\u5b83\uff0cActionManager\u5c31\u4f1a\u6267\u884c\u6211\u4eec\u7684\u52a8\u4f5c\uff0c\u6211\u4eec\u518d\u4e5f\u4e0d\u7528\u5c06Move\u8fd9\u7c7b\u7684\u52a8\u4f5c\u4e00\u4e2a\u4e00\u4e2a\u5199\u5728\u6211\u4eec\u7684GameObjController\u4e2d\uff0c\u5927\u5927\u51cf\u5c11\u4e86\u6211\u4eec\u7684\u4ee3\u7801\u91cf\uff0c\u5927\u5927\u63d0\u9ad8\u4e86\u6211\u4eec\u4ee3\u7801\u7684\u590d\u7528\u6027\uff0c\u4e00\u65e6\u52a8\u4f5c\u65b9\u9762\u7684\u9700\u6c42\u4fee\u6539\uff0c\u6211\u4eec\u4e5f\u53ea\u9700\u8981\u4fee\u6539\u8be5Action\u7c7b\u7684\u5185\u5bb9\uff0c\u4ee5\u53ca\u76f8\u5173\u8c03\u7528\u521b\u5efa\u8be5Action\u7684\u5730\u65b9\uff0c\u66f4\u52a0 \u5229\u4e8e\u6211\u4eec\u7684\u7ef4\u62a4\u4ee5\u53ca\u8ba9\u7a0b\u5e8f\u66f4\u80fd\u9002\u5e94\u9700\u6c42\u53d8\u5316 \u3002   \u5728\u4e86\u89e3\u4e86\u52a8\u4f5c\u7ba1\u7406\u5668\u7684\u610f\u4e49\u4e4b\u540e\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5f00\u59cb\u6211\u4eec\u52a8\u4f5c\u7ba1\u7406\u5668\u7684\u7f16\u5199\u4e86\uff0c\u6211\u4eec\u5148\u753b\u4e00\u4e2a\u52a8\u4f5c\u7ba1\u7406\u5668\u7684UML\u56fe\u7406\u6e05\u4e00\u4e0b\u601d\u8def \n\u7136\u540e\u4e0e\u4e0a\u4e00\u8282\u8bfe\u7684UML\u56fe\u7ed3\u5408\u8d77\u6765\u53d8\u6210\u6574\u4e2a\u7a0b\u5e8f\u7684UML\u56fe\uff0c\u753b\u51fa\u6765UML\u56fe\u4e4b\u540e\uff0c\u6211\u4eec\u7a0b\u5e8f\u7684\u67b6\u6784\u5c31\u5f88\u6e05\u6670\u4e86\u3002  \u4e0b\u9762\u6211\u4eec\u5206\u7c7b\u8fdb\u884c\u63cf\u8ff0", 
            "title": "\u5efa\u7acb\u52a8\u4f5c\u7ba1\u7406\u5668\u7684\u610f\u4e49"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb05-Priests & Devils\u52a8\u4f5c\u5206\u79bb\u7248/#actioncallback", 
            "text": "\u8fd9\u4e2a\u65b9\u6cd5\u4e3b\u8981\u662f\u63d0\u4f9b\u4e00\u4e2a\u8ba9\u52a8\u4f5c\u5b8c\u6210\u65f6\u8c03\u7528\u7684\u63a5\u53e3\uff0c\u4e00\u65e6\u52a8\u4f5c\u5b8c\u6210\uff0c\u8be5\u63a5\u53e3\u5bf9\u5e94\u5b9e\u73b0\u7684\u65b9\u6cd5\u5c31\u4f1a\u88ab\u8c03\u7528\uff0c\u52a8\u4f5c\u7ba1\u7406\u5668\u53ef\u4ee5\u5bf9\u52a8\u4f5c\u7684\u5b8c\u6210\u8fdb\u884c\u54cd\u5e94\u3002  public   interface   ActionCallback   { \n     void   actionDone   ( SSAction   source );  }", 
            "title": "ActionCallBack"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb05-Priests & Devils\u52a8\u4f5c\u5206\u79bb\u7248/#ssaction", 
            "text": "SSAction\u8fd9\u4e2a\u7c7b\u5c31\u662f\u6240\u6709\u52a8\u4f5c\u5bf9\u8c61\u7c7b\u62bd\u8c61\u51fa\u6765\u7684\u4e00\u4e2a\u4e0d\u9700\u8981\u7ed1\u5b9a GameObject \u5bf9\u8c61\u7684\u53ef\u7f16\u7a0b\u57fa\u7c7b\uff0c\u5176\u52a8\u4f5c\u7684\u5b9e\u73b0\u7531\u5176\u5b50\u7c7b\u5b9e\u73b0Update\u4e2d\u7684\u5185\u5bb9\u5b9e\u73b0\uff0c\u8fd9\u4e2a\u5728\u540e\u9762\u7684MoveAction\u5c31\u6709\u4f53\u73b0\uff0c\u6240\u6709\u7684SSAction\u5bf9\u8c61\u53d7ActionManager\u7ba1\u7406\u3002  public   class   SSAction   :   ScriptableObject   { \n     public   bool   enable   =   true ; \n     public   bool   destroy   =   false ; \n\n     public   GameObject   gameObject ; \n     public   Transform   transform ; \n     public   ActionCallback   callback ; \n\n     public   virtual   void   Start () \n     { \n         throw   new   System . NotImplementedException (); \n     } \n\n     public   virtual   void   Update () \n     { \n         throw   new   System . NotImplementedException (); \n     }  }", 
            "title": "SSAction"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb05-Priests & Devils\u52a8\u4f5c\u5206\u79bb\u7248/#moveaction", 
            "text": "MoveAction\u5c31\u662f\u4e0a\u9762SSAction\u7684\u4e00\u4e2a\u5b50\u7c7b\uff0c\u5b83\u7684\u4f5c\u7528\u5c31\u662f\u6839\u636e\u7528\u6237\u6240\u63d0\u4f9b\u7684\u76ee\u7684\u5730\u548c\u901f\u5ea6\uff0c\u4f7f\u5f97\u7269\u4f53\u5b8c\u6210\u4e00\u5b9a\u901f\u5ea6\u7684\u5411\u67d0\u4e00\u76ee\u7684\u5730\u7684\u76f4\u7ebf\u8fd0\u52a8\u3002\u5176\u901a\u8fc7Update\u7684\u5b9e\u73b0\u6765\u5b8c\u6210\u9010\u5e27\u7684\u5bf9\u4e8e\u7269\u4f53\u4f4d\u7f6e\u7684\u53d8\u52a8\uff0c\u5b9e\u73b0\u4e00\u4e2a\u6240\u8c13\u7684\u7269\u4f53\u7684\"\u52a8\u4f5c\"\u3002  public   class   MoveAction   :   SSAction   { \n     public   Vector3   target ; \n     public   float   speed ; \n\n     private   MoveAction (){ \n     } \n\n     public   static   MoveAction   getAction ( Vector3   target ,   float   speed )   { \n         MoveAction   action   =   ScriptableObject . CreateInstance MoveAction   (); \n         action . target   =   target ; \n         action . speed   =   speed ; \n         return   action ; \n     } \n\n     // Use this for initialization \n     public   override   void   Start   ()   { \n\n     } \n\n     // Update is called once per frame \n     public   override   void   Update   ()   { \n         transform . position   =   Vector3 . MoveTowards ( transform . position ,   target ,   speed * Time . deltaTime ); \n         if   ( transform . transform . position   ==   target )   { \n             destroy   =   true ; \n             callback . actionDone   ( this ); \n         } \n     }  }", 
            "title": "MoveAction"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb05-Priests & Devils\u52a8\u4f5c\u5206\u79bb\u7248/#ccsequenceaction", 
            "text": "\u8fd9\u662f\u4e00\u4e2a\u52a8\u4f5c\u987a\u5e8f\u6267\u884c\u5e8f\u5217\u7684\u662fSSAction\u7684\u5b50\u7c7b\uff0c\u5176\u901a\u8fc7\u4e00\u4e2aAction\u7684List\uff0c\u548cactionDone\u5bf9\u4e8eList\u7684\u7ef4\u62a4\u4ee5\u53caUpdate\u5bf9\u4e8e\u8c03\u7528\u54ea\u4e2aAction\u7684Update\u65b9\u6cd5\u7684\u63a7\u5236\uff0c\u5b9e\u73b0\u4e86\u4e00\u4e2a\u52a8\u4f5c\u987a\u5e8f\u6267\u884c\u7684\u6548\u679c\u3002\u5341\u5206\u65b9\u4fbf\u4e86\u6211\u4eec\u5bf9\u4e8e\u4e00\u4e2a\u8fde\u7eed\u52a8\u4f5c\u7684\u7f16\u7a0b\u3002  public   class   CCSequenceAction   :   SSAction ,   ActionCallback   { \n     public   List SSAction   sequence ; \n     public   int   repeat   =   1 ;   // 1- only do it for once, -1- repeat forever \n     public   int   currentActionIndex   =   0 ; \n\n     public   static   CCSequenceAction   getAction ( int   repeat ,   int   currentActionIndex ,   List SSAction   sequence )   { \n         CCSequenceAction   action   =   ScriptableObject . CreateInstance CCSequenceAction (); \n         action . sequence   =   sequence ; \n         action . repeat   =   repeat ; \n         action . currentActionIndex   =   currentActionIndex ; \n         return   action ; \n     } \n\n     public   override   void   Update ()   { \n         if   ( sequence . Count   ==   0 ) return ; \n         if   ( currentActionIndex     sequence . Count )   { \n             sequence [ currentActionIndex ]. Update (); \n         } \n     } \n\n     public   void   actionDone ( SSAction   source )   { \n         source . destroy   =   false ; \n         this . currentActionIndex ++; \n         if   ( this . currentActionIndex   =   sequence . Count )   { \n             this . currentActionIndex   =   0 ; \n             if   ( repeat     0 )   repeat --; \n             if   ( repeat   ==   0 )   { \n                 this . destroy   =   true ; \n                 this . callback . actionDone ( this ); \n             } \n         } \n     } \n\n     public   override   void   Start ()   { \n         foreach ( SSAction   action   in   sequence )   { \n             action . gameObject   =   this . gameObject ; \n             action . transform   =   this . transform ; \n             action . callback   =   this ; \n             action . Start (); \n         } \n     } \n\n     void   OnDestroy ()   { \n         foreach ( SSAction   action   in   sequence )   { \n             DestroyObject ( action ); \n         } \n     }  }", 
            "title": "CCSequenceAction"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb05-Priests & Devils\u52a8\u4f5c\u5206\u79bb\u7248/#ssactionmanager", 
            "text": "\u8fd9\u4e2a\u5c31\u662f\u6211\u4eec\u8fd9\u4e00\u671f\u7684\u4e3b\u89d2ActionManager\u4e86\uff0c\u5176\u8d1f\u8d23\u4e86action\u7684\u589e\u52a0\u3001\u5220\u9664\u3001\u6267\u884c\u3002\u5b83\u901a\u8fc7\u5728Update\u4e2d\u8c03\u7528SSAction\u7684Update\u65b9\u6cd5\uff0c\u5b9e\u73b0\u5bf9\u4e8e\u52a8\u4f5c\u7684\u4e00\u4e2a\u8c03\u5ea6\uff0c\u7ba1\u7406\u52a8\u4f5c\u7684\u81ea\u52a8\u6267\u884c\u3002  public   class   SSActionManager   :   MonoBehaviour ,   ActionCallback   { \n     private   Dictionary int ,   SSAction   actions   =   new   Dictionary int ,   SSAction (); \n     private   List SSAction   waitingToAdd   =   new   List SSAction (); \n     private   List int   watingToDelete   =   new   List int (); \n\n     protected   void   Update ()   { \n         foreach ( SSAction   ac   in   waitingToAdd )   { \n             actions [ ac . GetInstanceID ()]   =   ac ; \n         } \n         waitingToAdd . Clear (); \n\n         foreach ( KeyValuePair int ,   SSAction   kv   in   actions )   { \n             SSAction   ac   =   kv . Value ; \n             if   ( ac . destroy )   { \n                 watingToDelete . Add ( ac . GetInstanceID ()); \n             }   else   if   ( ac . enable )   { \n                 ac . Update (); \n             } \n         } \n\n         foreach ( int   key   in   watingToDelete )   { \n             SSAction   ac   =   actions [ key ]; \n             actions . Remove ( key ); \n             DestroyObject ( ac ); \n         } \n         watingToDelete . Clear (); \n     } \n\n     public   void   addAction ( GameObject   gameObject ,   SSAction   action ,   ActionCallback   callback )   { \n         action . gameObject   =   gameObject ; \n         action . transform   =   gameObject . transform ; \n         action . callback   =   callback ; \n         waitingToAdd . Add ( action ); \n         action . Start (); \n     } \n\n     public   void   actionDone ( SSAction   source )   { \n\n     }  }", 
            "title": "SSActionManager"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb05-Priests & Devils\u52a8\u4f5c\u5206\u79bb\u7248/#firstsceneactionmanager", 
            "text": "FirstSceneActionManager\u5c31\u662f\u6211\u4eec\u4e0a\u9762SSActionManager\u7684\u4e00\u4e2a\u5b50\u7c7b\uff0c\u5bf9\u4e8e\u6211\u4eec\u573a\u666f\u4e2d\u5177\u4f53\u7684\u52a8\u4f5c\u8fdb\u884c\u4e86\u5c01\u88c5\uff0c\u6211\u4eec\u53ea\u9700\u8981\u5728FirstSceneController\u4e2d\u8c03\u7528\u8be5\u65b9\u6cd5\uff0c\u5c31\u53ef\u4ee5\u5b9e\u73b0\u6211\u4eec\u4e4b\u524d\u7684Move\u4e86\uff0c\u5341\u5206\u65b9\u4fbf\u4e86\u6211\u4eec\u7684\u7f16\u7a0b\u3002  public   class   FirstSceneActionManager   :   SSActionManager   { \n     public   void   toggleBoat ( BoatController   boat )   { \n         MoveAction   action   =   MoveAction . getAction   ( boat . getTarget   (),   boat . speed ); \n         this . addAction   ( boat . getBoat   (),   action ,   this ); \n         boat . toggle   (); \n     } \n\n     public   void   moveCharacter ( ICharacterController   character ,   Vector3   target )   { \n         Vector3   nowPos   =   character . getPos   (); \n         Vector3   tmpPos   =   nowPos ; \n         if   ( target . y     nowPos . y )   { \n             tmpPos . y   =   target . y ; \n         }   else   { \n             tmpPos . x   =   target . x ; \n         } \n         SSAction   action1   =   MoveAction . getAction ( tmpPos ,   character . speed ); \n         SSAction   action2   =   MoveAction . getAction ( target ,   character . speed ); \n         SSAction   sequenceAction   =   CCSequenceAction . getAction ( 1 ,   0 ,   new   List SSAction { action1 ,   action2 }); \n         this . addAction ( character . getInstance (),   sequenceAction ,   this ); \n     }  }", 
            "title": "FirstSceneActionManager"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb05-Priests & Devils\u52a8\u4f5c\u5206\u79bb\u7248/#firstcontroller", 
            "text": "\u5728\u5b8c\u6210\u4e86FirstSceneActionManager\u540e\uff0c\u6211\u4eec\u628aGameObjectController\u4e2d\u4ee5\u53caFirstController\u4e2d\u4e00\u4e9b\u5173\u4e8e\u52a8\u4f5c\u7684\u90e8\u5206\u5220\u9664\uff0c\u7136\u540e\u5728\u539f\u6765\u52a8\u4f5c\u7684\u90e8\u5206\u8c03\u7528FirstSceneActionManager\u63d0\u4f9b\u65b0\u7684\u65b9\u6cd5\u5c31\u53ef\u4ee5\u4e86\u3002(\u4e0d\u8fc7\u56e0\u4e3a\u4e00\u5f00\u59cb\u8bbe\u8ba1\u67b6\u6784\u7684\u65f6\u5019\u6ca1\u6709\u8003\u8651\u52a0\u5165\u52a8\u4f5c\u7ba1\u7406\u5668\uff0c\u52a0\u4e4b\u6700\u8fd1\u65f6\u95f4\u8f83\u7d27\uff0c\u6ca1\u6709\u592a\u591a\u65f6\u95f4\u5bf9\u6e38\u620f\u8fdb\u884c\u91cd\u6784\uff0c\u6240\u4ee5FirstController\u4e2d\u4ecd\u7136\u6709\u7740\u90e8\u5206\u5173\u4e8e\u5224\u65ad\u7269\u4f53\u8fd0\u52a8\u7684\u903b\u8f91)  public   class   FirstController   :   MonoBehaviour ,   ISceneController ,   IUserAction   { \n     UserGUI   userGUI ; \n\n     public   LandController   rightLand ; \n     public   LandController   leftLand ; \n     public   BoatController   boat ; \n     public   ICharacterController []   characters ; \n     private   FirstSceneActionManager   actionManager ; \n\n     void   Awake () \n     { \n         GameDirector   director   =   GameDirector . getInstance (); \n         director . currentSceneController   =   this ; \n         userGUI   =   gameObject . AddComponent UserGUI ()   as   UserGUI ; \n         genGameObjects (); \n     } \n\n     void   Start ()   { \n         actionManager   =   GetComponent FirstSceneActionManager   (); \n     } \n\n     public   void   genGameObjects () \n     { \n         characters   =   new   ICharacterController [ 6 ]; \n         boat   =   new   BoatController (); \n         leftLand   =   new   LandController (- 1 ); \n         rightLand   =   new   LandController ( 1 ); \n\n         for   ( int   i   =   0 ;   i     3 ;   i ++) \n         { \n             ICharacterController   priest   =   new   ICharacterController ( 0 ,   priest   +   i ); \n             priest . setPosition ( rightLand . getEmptyPosition ()); \n             priest . getOnLand ( rightLand ); \n             rightLand . getOnLand ( priest ); \n             characters [ i ]   =   priest ; \n         } \n\n         for   ( int   i   =   0 ;   i     3 ;   i ++) \n         { \n             ICharacterController   demon   =   new   ICharacterController ( 1 ,   demon   +   i ); \n             demon . setPosition ( rightLand . getEmptyPosition ()); \n             demon . getOnLand ( rightLand ); \n             rightLand . getOnLand ( demon ); \n             characters [ i + 3 ]   =   demon ; \n         } \n     } \n\n\n     public   void   ClickCharacter ( ICharacterController   character ) \n     { \n         if   ( userGUI . status   !=   0   ||   ! boat . available ()) \n         { \n             return ; \n         } \n         if   ( character . isOnBoat ())   { \n             LandController   land ; \n             if   ( boat . getBoatPos ()   ==   0 ) \n             { \n                 land   =   leftLand ; \n             } \n             else \n             { \n                 land   =   rightLand ; \n             } \n             boat . getOffBoat ( character . getName ()); \n             actionManager . moveCharacter   ( character ,   land . getEmptyPosition   ()); \n             character . getOnLand ( land ); \n             land . getOnLand ( character ); \n         } \n         else \n         { \n             LandController   land   =   character . getLandController (); \n             if   ( boat . getEmptyIndex ()   ==   - 1 ) \n                 return ; \n             int   landPos   =   land . getType (),   boatPos   =   ( boat . getBoatPos ()   ==   0 )   ?   - 1   :   1 ; \n             if   ( landPos   !=   boatPos ) \n                 return ; \n             land . getOffLand ( character . getName ()); \n             actionManager . moveCharacter   ( character ,   boat . getEmptyPosition   ()); \n             character . getOnBoat ( boat ,   boat . getEmptyIndex ()); \n             boat . getOnBoat ( character ); \n         } \n         userGUI . status   =   checkResult (); \n     } \n\n     public   void   ToggleBoat () \n     { \n         if   ( userGUI . status   !=   0   ||   boat . isEmpty ()   ||   ! boat . available ()) \n             return ; \n         actionManager . toggleBoat   ( boat ); \n         userGUI . status   =   checkResult (); \n     } \n\n     int   checkResult () \n     { \n         int   leftPriests   =   0 ; \n         int   rightPriests   =   0 ; \n         int   leftDemons   =   0 ; \n         int   rightDemons   =   0 ; \n\n         int []   leftStatus   =   leftLand . getStatus (); \n         leftPriests   +=   leftStatus [ 0 ]; \n         leftDemons   +=   leftStatus [ 1 ]; \n\n         if   ( leftPriests   +   leftDemons   ==   6 ) \n             return   2 ; \n\n         int []   rightStatus   =   rightLand . getStatus (); \n         rightPriests   +=   rightStatus [ 0 ]; \n         rightDemons   +=   rightStatus [ 1 ]; \n\n         int []   boatStatus   =   boat . getBoatStatus (); \n         if   ( boat . getBoatPos ()   ==   0 ) \n         { \n             leftPriests   +=   boatStatus [ 0 ]; \n             leftDemons   +=   boatStatus [ 1 ]; \n         } \n         else \n         { \n             rightPriests   +=   boatStatus [ 0 ]; \n             rightDemons   +=   boatStatus [ 1 ]; \n         } \n\n         if   ( leftPriests     0     leftPriests     leftDemons ) \n             return   1 ; \n         if   ( rightPriests     0     rightPriests     rightDemons ) \n             return   1 ; \n\n         return   0 ; \n     } \n\n     public   void   restart () \n     { \n         boat . reset (); \n         leftLand . reset (); \n         rightLand . reset (); \n         for   ( int   i   =   0 ;   i     characters . Length ;   i ++) \n             characters [ i ]. reset (); \n     }  }    \u5230\u8fd9\u91cc\uff0c\u8fd9\u5468\u7684\u4f5c\u4e1a\u5c31\u5b8c\u6210\u5566\uff0c\u4e0d\u8bf4\u4e86\uff0c\u5148\u53bb\u809d\u73b0\u64cd\u4e86(\u9003\ud83c\udf1a  \u611f\u8c22\u9605\u8bfb\u6211\u7684\u535a\u5ba2\uff01\ud83d\ude0b", 
            "title": "FirstController"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb06-Hit UFO\u7f16\u7a0b\u5b9e\u8df5/", 
            "text": "Homework4 HitUFO\uff01 \u6e38\u620f\u7f16\u7a0b\u5b9e\u8df5\n\n\n\u4f5c\u4e1a\u8981\u6c42\n\n\n\n\n\u5185\u5bb9\u8981\u6c42\n\n\n\u6e38\u620f\u6709 n \u4e2a round\uff0c\u6bcf\u4e2a round \u90fd\u5305\u62ec10 \u6b21 trial\n\n\n\u6bcf\u4e2a trial \u7684\u98de\u789f\u7684\u8272\u5f69\u3001\u5927\u5c0f\u3001\u53d1\u5c04\u4f4d\u7f6e\u3001\u901f\u5ea6\u3001\u89d2\u5ea6\u3001\u540c\u65f6\u51fa\u73b0\u7684\u4e2a\u6570\u90fd\u53ef\u80fd\u4e0d\u540c\u3002\u5b83\u4eec\u7531\u8be5 round \u7684 ruler \u63a7\u5236\n\n\n\u6bcf\u4e2a trial \u7684\u98de\u789f\u6709\u968f\u673a\u6027\uff0c\u603b\u4f53\u96be\u5ea6\u968f round \u4e0a\u5347\n\n\n\u9f20\u6807\u70b9\u4e2d\u5f97\u5206\uff0c\u5f97\u5206\u89c4\u5219\u6309\u8272\u5f69\u3001\u5927\u5c0f\u3001\u901f\u5ea6\u4e0d\u540c\u8ba1\u7b97\uff0c\u89c4\u5219\u53ef\u81ea\u7531\u8bbe\u5b9a\n\n\n\n\n\n\n\u6e38\u620f\u8981\u6c42\n\n\n\u4f7f\u7528\u5e26\u7f13\u5b58\u7684\u5de5\u5382\u6a21\u5f0f\u7ba1\u7406\u4e0d\u540c\u98de\u789f\u7684\u751f\u4ea7\u4e0e\u56de\u6536\uff0c\u8be5\u5de5\u5382\u5fc5\u987b\u662f\u573a\u666f\u5355\u5b9e\u4f8b\u7684\uff01\u5177\u4f53\u5b9e\u73b0\u89c1\u53c2\u8003\u8d44\u6e90 Singleton \u6a21\u677f\u7c7b\n\n\n\u5c3d\u53ef\u80fd\u4f7f\u7528\u524d\u9762 MVC \u7ed3\u6784\u5b9e\u73b0\u4eba\u673a\u4ea4\u4e92\u4e0e\u6e38\u620f\u6a21\u578b\u5206\u79bb\n\n\n\n\n\n\n\n\n\u4f5c\u4e1a\u5b9e\u73b0\n\n\n\u672c\u5468\u7684\u5185\u5bb9\u5728\u6709\u4e86\u4e4b\u524dMVC\u67b6\u6784\u4ee5\u53ca\u52a8\u4f5c\u7ba1\u7406\u5668\u7684\u57fa\u7840\u4e4b\u4e0a\uff0c\u5176\u5b9e\u672c\u6b21\u4f5c\u4e1a\u7684\u5b9e\u73b0\u8f83\u4e3a\u7b80\u5355\u3002\u6309\u7167\u4e4b\u524d\u7684\u60ef\u4f8b\uff0c\u4e3a\u4e86\u7f16\u7a0b\u7684\u6761\u7406\u6027\uff0c\u6211\u4eec\u5148\u8bbe\u8ba1\u51fa\u6211\u4eec\u8fd9\u6b21\u4f5c\u4e1a\u7684UML\u56fe\n\n\n\u89c6\u9891\u6f14\u793a\n\n\n\n\nHit UFO!\n\n\nHit UFO! (With GUN)\n\n\n\n\n\n\nUML\u56fe\n\n\n\n\n\n\n\u5176\u4e2dFirstCharacterController\u7c7b\u662f\u4e3aGUN\u7248\u672c\u521b\u5efa\u7684\u3002\n\n\n\n\n\n\n\u5206\u7c7b\u4ecb\u7ecd\n\n\n\u9996\u5148\uff0c\u6211\u4eec\u6765\u4ecb\u7ecd\u4e00\u4e0b\u8fd9\u6b21\u4f5c\u4e1a\u7684\u91cd\u4e2d\u4e4b\u91cd\uff0c\u5de5\u5382\u7c7b\u7684\u5b9e\u73b0\uff0c\u8fd9\u6b21\u7684\u4f5c\u4e1a\u4e00\u5171\u6709\u4e24\u4e2a\u5de5\u5382\u7c7b\uff0c\u4e00\u4e2a\u662fUFO\u751f\u6210\u7684\u5de5\u5382\uff0c\u4e00\u4e2a\u662f\u7206\u70b8\u751f\u6210\u7684\u5de5\u5382\uff0c\n\u901a\u8fc7\u5e26\u7f13\u5b58\u7684\u5de5\u5382\u5bf9\u8c61\u7684\u5b9e\u73b0\uff0c\u6211\u4eec\u51cf\u5c11\u4e86\u6e38\u620f\u5bf9\u8c61\u7684\u521b\u5efa\u4ee5\u53ca\u9500\u6bc1\u7684\u6b21\u6570\uff0c\u53ef\u4ee5\u5927\u5927\u51cf\u5c11\u6e38\u620f\u7684\u5f00\u9500\uff0c\u5e76\u4e14\u6e38\u620f\u5bf9\u8c61\u7684\u521b\u5efa\u548c\u9500\u6bc1\u7531\u4e00\u4e2a\u5bf9\u8c61\u7edf\u4e00\u7ba1\u7406\uff0c\u4f7f\u5f97\u4e1a\u52a1\u903b\u8f91\u66f4\u52a0\u660e\u786e\uff0c\u4ece\u800c\u4f7f\u6211\u4eec\u7684\u7a0b\u5e8f\u66f4\u52a0\u5bb9\u6613\u6269\u5c55\u3002\n\n\n\u4e0b\u9762\u6211\u4eec\u5148\u6765\u770b\u770b\u8fd9\u4e24\u4e2a\u7c7b\n\n\nUFOFactory\n\n\npublic\n \nclass\n \nUFOFactory\n \n:\n \nMonoBehaviour\n \n{\n\n    \nQueue\nUFOController\n \nwaitingQueue\n;\n\n    \nList\nUFOController\n \nrunningList\n;\n\n\n    \nGameObject\n \nbasic\n;\n\n\n    \nprivate\n \nvoid\n \nAwake\n()\n\n    \n{\n\n        \nwaitingQueue\n \n=\n \nnew\n \nQueue\nUFOController\n();\n\n        \nrunningList\n \n=\n \nnew\n \nList\nUFOController\n();\n\n\n        \nbasic\n \n=\n \nInstantiate\n(\nResources\n.\nLoad\n(\nPrefabs/UFO\n,\n \ntypeof\n(\nGameObject\n)))\n \nas\n \nGameObject\n;\n\n        \nbasic\n.\nSetActive\n(\nfalse\n);\n\n    \n}\n\n\n    \npublic\n \nUFOController\n \nGetUFO\n(\nUFOData\n \ndata\n)\n\n    \n{\n\n        \nUFOController\n \nufo\n;\n\n        \nif\n \n(\nwaitingQueue\n.\nCount\n \n \n0\n)\n\n            \nufo\n \n=\n \nwaitingQueue\n.\nDequeue\n();\n\n        \nelse\n\n        \n{\n\n            \nGameObject\n \nnewUFO\n \n=\n \nGameObject\n.\nInstantiate\n(\nbasic\n);\n\n            \nufo\n \n=\n \nnew\n \nUFOController\n(\nnewUFO\n);\n\n            \nnewUFO\n.\ntransform\n.\nposition\n \n+=\n \nVector3\n.\nforward\n \n*\n \nRandom\n.\nvalue\n \n*\n \n10\n;\n\n        \n}\n\n        \nufo\n.\nsetAttribute\n(\ndata\n);\n\n        \nrunningList\n.\nAdd\n(\nufo\n);\n\n        \nufo\n.\nappear\n();\n\n        \nreturn\n \nufo\n;\n\n    \n}\n\n\n    \npublic\n \nList\nUFOController\n \nGetRunningList\n()\n\n    \n{\n\n        \nreturn\n \nthis\n.\nrunningList\n;\n\n    \n}\n\n\n    \npublic\n \nUFOController\n[]\n \ninitAll\n \n(\nUFOData\n \ndata\n,\n \nint\n \nnum\n)\n\n    \n{\n\n        \nUFOController\n[]\n \nlist\n \n=\n \nnew\n \nUFOController\n[\nnum\n];\n\n        \nfor\n \n(\nint\n \ni\n \n=\n \n0\n;\n \ni\n \n \nnum\n;\n \ni\n++)\n\n        \n{\n\n            \nlist\n[\ni\n]\n \n=\n \nGetUFO\n(\ndata\n);\n\n        \n}\n\n        \nreturn\n \nlist\n;\n\n    \n}\n\n\n    \npublic\n \nvoid\n \nrecycle\n(\nUFOController\n \nufo\n)\n\n    \n{\n\n        \nufo\n.\ndisappear\n();\n\n        \nwaitingQueue\n.\nEnqueue\n(\nufo\n);\n\n        \nrunningList\n.\nRemove\n(\nufo\n);\n\n    \n}\n\n\n    \npublic\n \nvoid\n \nrecycleAll\n()\n\n    \n{\n\n        \nwhile\n \n(\nrunningList\n.\nCount\n \n!=\n \n0\n)\n\n        \n{\n\n            \nrecycle\n(\nrunningList\n[\n0\n]);\n\n        \n}\n\n    \n}\n\n\n}\n\n\n\n\n\n\nExplosionFactory\n\n\npublic\n \nclass\n \nExplosionFactory\n \n:\n \nMonoBehaviour\n \n{\n\n    \nQueue\nGameObject\n \nwaitingQueue\n;\n\n    \nList\nGameObject\n \nrunningList\n;\n\n\n    \nGameObject\n \nbasic\n;\n\n\n    \nprivate\n \nvoid\n \nAwake\n()\n\n    \n{\n\n        \nwaitingQueue\n \n=\n \nnew\n \nQueue\nGameObject\n();\n\n        \nrunningList\n \n=\n \nnew\n \nList\nGameObject\n();\n\n\n        \nbasic\n \n=\n \nInstantiate\n(\nResources\n.\nLoad\n(\nPrefabs/Explosion\n,\n \ntypeof\n(\nGameObject\n)))\n \nas\n \nGameObject\n;\n\n        \nbasic\n.\nSetActive\n(\nfalse\n);\n\n    \n}\n\n\n    \npublic\n \nvoid\n \nexplode\n(\nVector3\n \npos\n)\n\n    \n{\n\n        \nGameObject\n \nexplosion\n;\n\n        \nif\n \n(\nwaitingQueue\n.\nCount\n \n==\n \n0\n)\n \n{\n\n            \nexplosion\n \n=\n \nGameObject\n.\nInstantiate\n \n(\nbasic\n);\n\n            \nexplosion\n.\nAddComponent\nSelfRecycle\n \n().\nfactory\n \n=\n \nthis\n;\n\n        \n}\n \n        \nelse\n \n        \n{\n\n            \nexplosion\n \n=\n \nwaitingQueue\n.\nDequeue\n \n();\n\n        \n}\n\n        \nrunningList\n.\nAdd\n \n(\nexplosion\n);\n\n        \nexplosion\n.\nGetComponent\nSelfRecycle\n \n().\nstartTimer\n \n(\n0.2f\n);\n\n\n        \nexplosion\n.\nSetActive\n \n(\ntrue\n);\n\n        \nexplosion\n.\ntransform\n.\nposition\n \n=\n \npos\n;\n\n    \n}\n\n\n    \npublic\n \nvoid\n \nrecycle\n(\nGameObject\n \nexplosion\n)\n\n    \n{\n\n        \nexplosion\n.\nSetActive\n \n(\nfalse\n);\n\n        \nwaitingQueue\n.\nEnqueue\n(\nexplosion\n);\n\n        \nrunningList\n.\nRemove\n(\nexplosion\n);\n\n    \n}\n\n\n}\n\n\n\n\n\n\nFlyAction\n\n\n\u5728\u8fd9\u91cc\u6211\u4f7f\u7528\u7684\u662f\u6211\u4eec\u7b2c\u4e00\u4e2a\u661f\u671f\u6240\u5199\u7684\u629b\u7269\u7ebf\u8fd0\u52a8\u7684\u4ee3\u7801\uff0c\u5916\u90e8\u901a\u8fc7getAction\u63d0\u4f9bUFO\u7684x, y\u7684\u521d\u901f\u5ea6\uff0c\u751f\u6210\u7269\u4f53\u7684\u901f\u5ea6\u5411\u91cf\uff0c\u7136\u540e\u6bcf\u4e00\u5e27\u90fd\u7ed9\u7269\u4f53\u52a0\u4e0a\u5bf9\u5e94\u91cd\u529b\u7684\u79fb\u52a8\u548c\u521d\u901f\u5ea6\u7684\u79fb\u52a8\u5373\u53ef\u5f97\u5230\u7269\u4f53\u7684\u629b\u7269\u7ebf\u3002\n\n\npublic\n \nclass\n \nFlyAction\n \n:\n \nSSAction\n \n{\n\n    \npublic\n \nfloat\n \nVx\n;\n\n    \npublic\n \nfloat\n \nVy\n;\n\n    \npublic\n \nVector3\n \nspeed\n;\n\n    \npublic\n \nVector3\n \ngravity\n;\n\n\n    \nprivate\n \nFlyAction\n()\n \n    \n{\n\n    \n}\n\n\n    \npublic\n \nstatic\n \nFlyAction\n \ngetAction\n(\nfloat\n \nvx\n,\n \nfloat\n \nvy\n)\n \n    \n{\n\n        \nFlyAction\n \naction\n \n=\n \nScriptableObject\n.\nCreateInstance\nFlyAction\n \n();\n\n        \naction\n.\ngravity\n \n=\n \nVector3\n.\nzero\n;\n\n        \naction\n.\nVx\n \n=\n \nvx\n;\n\n        \naction\n.\nVy\n \n=\n \nvy\n;\n\n        \nreturn\n \naction\n;\n\n    \n}\n\n\n    \n// Use this for initialization\n\n    \npublic\n \noverride\n \nvoid\n \nStart\n \n()\n \n    \n{\n\n        \nspeed\n \n=\n \nnew\n \nVector3\n \n(\nVx\n,\n \nVy\n,\n \n0\n);\n\n    \n}\n\n\n    \n// Update is called once per frame\n\n    \npublic\n \noverride\n \nvoid\n \nUpdate\n \n()\n \n    \n{\n\n        \nif\n \n(\n2\n \n*\n \nVy\n \n+\n \ngravity\n.\ny\n \n \n0.00001\n)\n \n        \n{\n\n            \ngravity\n.\ny\n \n-=\n \n10\n \n*\n \nTime\n.\nfixedDeltaTime\n;\n\n            \ntransform\n.\nTranslate\n \n(\nspeed\n \n*\n \nTime\n.\nfixedDeltaTime\n);\n\n            \ntransform\n.\nTranslate\n \n(\ngravity\n \n*\n \nTime\n.\nfixedDeltaTime\n);\n\n        \n}\n\n        \nelse\n \n        \n{\n\n            \ndestroy\n \n=\n \ntrue\n;\n\n            \ncallback\n.\nactionDone\n \n(\nthis\n);\n\n        \n}\n\n    \n}\n\n\n}\n\n\n\n\n\n\nFire\n\n\nFire\u7c7b\u662f\u6e38\u620f\u7684\u63d0\u4f9b\u5f00\u706b\u64cd\u4f5c\u7684\u7c7b\uff0c\u901a\u8fc7\u8be5\u7c7b\uff0c\u6211\u4eec\u53ef\u4ee5\u83b7\u53d6\u7528\u6237\u7684\u8f93\u5165\uff0c\u5e76\u4e14\u5bf9\u4e8e\u7528\u6237\u64cd\u4f5c\u8fdb\u884c\u76f8\u5e94\u7684\u5904\u7406\uff0c\u6211\u4eec\u672c\u6b21\u5b9e\u9a8c\u4e3b\u8981\u7528\u5230\u4e86Ray\u6765\u5b9e\u73b0\u7528\u6237\u7684\u5c04\u51fb\u64cd\u4f5c\uff0c\u901a\u8fc7Raycast\u6211\u4eec\u53ef\u4ee5\u83b7\u53d6\u5c04\u7ebf\u51fb\u4e2d\u7684\u7269\u4f53\uff0c\u5e76\u4e14\u628a\u5176\u901a\u8fc7\u76f8\u5e94\u7684\u63a5\u53e3\u4f20\u7ed9\u6211\u4eec\u7684\u573a\u8bb0(SceneControll)\uff0c\u5b8c\u6210\u76f8\u5e94\u7684\u64cd\u4f5c\u3002\n\n\npublic\n \nclass\n \nFire\n \n:\n \nMonoBehaviour\n \n{\n\n    \npublic\n \nnew\n \nCamera\n \ncamera\n;\n\n    \npublic\n \nFirstController\n \nsceneController\n;\n\n    \nLayerMask\n \nlayer\n;\n\n\n    \nvoid\n \nAwake\n()\n\n    \n{\n\n        \nlayer\n \n=\n \nLayerMask\n.\nGetMask\n(\nUFO\n,\n \nTerrian\n);\n\n    \n}\n\n\n    \n// Use this for initialization\n\n    \nvoid\n \nStart\n \n()\n \n{\n\n        \ncamera\n \n=\n \nCamera\n.\nmain\n;\n\n        \nsceneController\n \n=\n \nGameDirector\n.\ngetInstance\n().\ncurrentSceneController\n \nas\n \nFirstController\n;\n\n    \n}\n\n\n    \n// Update is called once per frame\n\n    \nvoid\n \nUpdate\n \n()\n \n{\n\n        \nif\n \n(\nInput\n.\nGetButton\n(\nFire1\n))\n\n        \n{\n\n            \nRay\n \nray\n \n=\n \ncamera\n.\nScreenPointToRay\n(\nInput\n.\nmousePosition\n);\n\n            \nRaycastHit\n \nhit\n;\n\n\n            \nif\n \n(\nPhysics\n.\nRaycast\n(\nray\n,\n \nout\n \nhit\n,\n \nMathf\n.\nInfinity\n \n,\nlayer\n))\n\n            \n{\n\n                \nif\n \n(\nhit\n.\ntransform\n.\ngameObject\n.\nlayer\n \n==\n \n8\n)\n\n                \n{\n\n                    \nsceneController\n.\nshootUFO\n(\nhit\n.\ntransform\n.\ngameObject\n.\nGetComponent\nUFOCtrl\n().\nufoController\n);\n\n                \n}\n\n                \nelse\n \nif\n \n(\nhit\n.\ntransform\n.\ngameObject\n.\nlayer\n \n==\n \n9\n)\n\n                \n{\n\n                    \nsceneController\n.\nshootGround\n \n(\nhit\n.\npoint\n);\n\n                \n}\n\n            \n}\n\n        \n}\n\n    \n}\n\n\n}\n\n\n\n\n\n\nScoreRecorder\n\n\nScoreRecorder\u7684\u4f5c\u7528\u5c31\u662f\u6211\u4eec\u6e38\u620f\u7684\u8ba1\u5206\u5458\uff0c\u6211\u4eec\u79ef\u5206\u6570\u636e\u7ef4\u62a4\u6ca1\u6709\u653e\u5728\u573a\u8bb0\u91cc\u9762\uff0c\u800c\u662f\u628a\u5176\u5206\u79bb\u4e86\u51fa\u6765\u505a\u4e86\u4e00\u4e2a\u8bb0\u5206\u5458\uff0c\u7531\u8bb0\u5206\u5458\u6765\u7ef4\u62a4\u6211\u4eec\u7684\u79ef\u5206\n\n\npublic\n \nclass\n \nScoreRecorder\n{\n\n    \nprivate\n \nint\n \nscore\n;\n\n\n    \nText\n \ngameInfo\n;\n\n\n    \nprivate\n \nstatic\n \nScoreRecorder\n \ninstance\n;\n\n    \npublic\n \nstatic\n \nScoreRecorder\n \ngetInstance\n()\n\n    \n{\n\n        \nif\n \n(\ninstance\n \n==\n \nnull\n)\n\n        \n{\n\n            \ninstance\n \n=\n \nnew\n \nScoreRecorder\n();\n\n        \n}\n\n        \nreturn\n \ninstance\n;\n\n    \n}\n\n\n    \nprivate\n \nScoreRecorder\n()\n\n    \n{\n\n        \ngameInfo\n \n=\n \n(\nGameObject\n.\nInstantiate\n(\nResources\n.\nLoad\n(\nPrefabs/ScoreInfo\n))\n \nas\n \nGameObject\n).\ntransform\n.\nFind\n(\nText\n).\nGetComponent\nText\n();\n\n        \ngameInfo\n.\ntext\n \n=\n \n \n+\n \nscore\n;\n\n    \n}\n\n\n    \npublic\n \nvoid\n \nrecord\n(\nint\n \ndifficulty\n)\n\n    \n{\n\n        \nscore\n \n+=\n \ndifficulty\n+\n1\n;\n\n        \ngameInfo\n.\ntext\n \n=\n \n \n+\n \nscore\n;\n\n    \n}\n\n\n    \npublic\n \nint\n \ngetScore\n()\n\n    \n{\n\n        \nreturn\n \nscore\n;\n\n    \n}\n\n\n}\n\n\n\n\n\n\nFirstController\n\n\nFirstController\u7c7b\u5c31\u662f\u6211\u4eec\u8fd9\u6b21\u6e38\u620f\u573a\u666f\u7684\u573a\u8bb0\u4e86\uff0c\u5728\u4e4b\u524d\u5b66\u4e60\u7684\u57fa\u7840\u4e4b\u4e0a\uff0c\u8fd9\u4e00\u6b21\u6e38\u620f\u67b6\u6784\u7684\u8bbe\u8ba1\u66f4\u52a0\u5408\u7406\uff0c\u573a\u8bb0\u76f8\u6bd4\u4e0a\u4e00\u6b21\u7684\u6e38\u620f\u66f4\u52a0\u7b80\u6d01\u6613\u770b\uff0c\u53ef\u8bfb\u6027\u66f4\u5f3a\u3002\n\n\npublic\n \nclass\n \nFirstController\n \n:\n \nMonoBehaviour\n,\n \nISceneController\n \n{\n\n    \nGameDirector\n \ngameDirector\n;\n\n    \nFirstSceneActionManager\n \nactionManager\n;\n\n    \npublic\n \nUFOFactory\n \nufoFactory\n;\n\n    \nExplosionFactory\n \nexplosionFactory\n;\n\n\n    \nScoreRecorder\n \nscoreRecorder\n;\n\n    \nTimerController\n \ntimerController\n;\n\n    \nDifficultyController\n \ndifficulty\n;\n\n\n    \nint\n \ngameStatus\n;\n\n    \nint\n \nround\n \n=\n \n1\n;\n\n    \nint\n \nemitNum\n;\n\n    \nint\n \nscoreInRound\n;\n\n    \nint\n \nfpsCount\n;\n\n    \nbool\n \nrunning\n;\n\n    \nGUIStyle\n \nheaderStyle\n;\n\n    \nGUIStyle\n \nbuttonStyle\n;\n\n    \nText\n \nroundText\n;\n\n\n    \nvoid\n \nAwake\n()\n\n    \n{\n\n        \ngameDirector\n \n=\n \nGameDirector\n.\ngetInstance\n();\n\n        \ngameDirector\n.\ncurrentSceneController\n \n=\n \nthis\n;\n\n        \nactionManager\n \n=\n \ngameObject\n.\nAddComponent\nFirstSceneActionManager\n();\n\n        \nufoFactory\n \n=\n \ngameObject\n.\nAddComponent\nUFOFactory\n();\n\n        \nexplosionFactory\n \n=\n \ngameObject\n.\nAddComponent\nExplosionFactory\n \n();\n\n        \ndifficulty\n \n=\n \nDifficultyController\n.\ngetInstance\n();\n\n        \ntimerController\n \n=\n \ngameObject\n.\nAddComponent\nTimerController\n();\n\n        \nscoreRecorder\n \n=\n \nScoreRecorder\n.\ngetInstance\n();\n\n\n        \nloadResources\n();\n\n    \n}\n\n\n    \npublic\n \nvoid\n \nStart\n()\n\n    \n{\n\n        \ngameStatus\n \n=\n \n0\n;\n\n        \ndifficulty\n.\nsetDifficulty\n(\n0\n);\n\n        \nround\n \n=\n \n1\n;\n\n        \nroundText\n \n=\n \n(\nGameObject\n.\nInstantiate\n(\nResources\n.\nLoad\n(\nPrefabs/RoundInfo\n))\n \nas\n \nGameObject\n).\ntransform\n.\nFind\n(\nText\n).\nGetComponent\nText\n();\n\n        \nroundText\n.\ntext\n \n=\n \n \n+\n \nround\n;\n\n        \nfpsCount\n \n=\n \n0\n;\n\n        \nheaderStyle\n \n=\n \nnew\n \nGUIStyle\n();\n\n        \nheaderStyle\n.\nfontSize\n \n=\n \n40\n;\n\n        \nheaderStyle\n.\nalignment\n \n=\n \nTextAnchor\n.\nMiddleCenter\n;\n\n        \nbuttonStyle\n \n=\n \nnew\n \nGUIStyle\n(\nbutton\n);\n\n        \nbuttonStyle\n.\nfontSize\n \n=\n \n30\n;\n\n        \nrunning\n \n=\n \nfalse\n;\n\n    \n}\n\n\n    \nvoid\n \nOnGUI\n()\n \n    \n{\n\n        \nif\n \n(\ngameStatus\n \n==\n \n0\n)\n \n        \n{\n\n            \nGUI\n.\nLabel\n(\nnew\n \nRect\n(\nScreen\n.\nwidth\n \n/\n \n2\n \n-\n \n45\n,\n \nScreen\n.\nheight\n \n/\n \n2\n \n-\n \n90\n,\n \n100\n,\n \n50\n),\n \nHit the UFO!\n,\n \nheaderStyle\n);\n\n            \nif\n \n(\nGUI\n.\nButton\n(\nnew\n \nRect\n(\nScreen\n.\nwidth\n \n/\n \n2\n \n-\n \n45\n,\n \nScreen\n.\nheight\n \n/\n \n2\n,\n \n100\n,\n \n50\n),\n \nPlay!\n,\nbuttonStyle\n))\n\n            \n{\n\n                \nreplay\n \n();\n  \n            \n}\n\n\n        \n}\n\n        \nelse\n \nif\n \n(\ngameStatus\n \n==\n \n2\n)\n \n        \n{\n\n            \nGUI\n.\nLabel\n(\nnew\n \nRect\n(\nScreen\n.\nwidth\n \n/\n \n2\n \n-\n \n45\n,\n \nScreen\n.\nheight\n \n/\n \n2\n \n-\n \n90\n,\n \n100\n,\n \n50\n),\n \nYou get \n+\n \nscoreRecorder\n.\ngetScore\n()+\n points in this game!\n,\n \nheaderStyle\n);\n\n            \nif\n \n(\nGUI\n.\nButton\n(\nnew\n \nRect\n(\nScreen\n.\nwidth\n \n/\n \n2\n \n-\n \n90\n,\n \nScreen\n.\nheight\n \n/\n \n2\n,\n \n200\n,\n \n50\n),\n \nPlay Again\n,\nbuttonStyle\n))\n\n            \n{\n\n                \nreplay\n \n();\n  \n            \n}\n\n        \n}\n\n    \n}\n\n\n    \nvoid\n \nUpdate\n()\n\n    \n{\n\n        \nif\n \n(\nrunning\n \n \ngameStatus\n \n==\n \n1\n)\n\n        \n{\n\n            \nfpsCount\n++;\n\n            \nif\n \n(\nfpsCount\n \n==\n \n60\n)\n\n            \n{\n\n                \nif\n \n(\nemitNum\n \n \ndifficulty\n.\ngetEmitNum\n \n())\n \n{\n\n                    \nemitUFO\n \n();\n\n                    \nfpsCount\n \n=\n \n0\n;\n\n                    \nemitNum\n++;\n\n                \n}\n \nelse\n \nif\n \n(\nemitNum\n \n==\n \ndifficulty\n.\ngetEmitNum\n \n())\n \n{\n\n                    \nif\n \n(\nscoreInRound\n \n \ndifficulty\n.\ngetSuccessScore\n \n())\n \n{\n\n                        \ngameStatus\n \n=\n \n2\n;\n\n                    \n}\n\n                    \nelse\n\n                    \n{\n\n                        \nInvoke\n(\nstartRound\n,\n \n3\n);\n\n                        \ntimerController\n.\nsetTime\n(\n3\n);\n\n                        \ndifficulty\n.\nsetDifficultyByScore\n \n(\nscoreRecorder\n.\ngetScore\n \n());\n\n                    \n}\n\n                \n}\n\n            \n}\n\n        \n}\n\n        \nelse\n\n        \n{\n\n            \nif\n \n(\nInput\n.\nGetKeyDown\n \n(\nenter\n)\n \n||\n \nInput\n.\nGetKeyDown\n \n(\nreturn\n))\n\n                \nreplay\n \n();\n\n        \n}\n\n    \n}\n\n\n    \npublic\n \nvoid\n \nloadResources\n()\n\n    \n{\n\n        \nInstantiate\n(\nResources\n.\nLoad\n(\nPrefabs/Land\n));\n\n    \n}\n\n\n    \nvoid\n \nstartRound\n()\n\n    \n{\n\n        \nrunning\n \n=\n \ntrue\n;\n\n        \nroundText\n.\ntext\n \n=\n \n \n+\n \nround\n++;\n\n        \nemitNum\n \n=\n \n0\n;\n\n        \nscoreInRound\n \n=\n \n0\n;\n\n        \nfpsCount\n \n=\n \n0\n;\n\n    \n}\n\n\n    \nvoid\n \nemitUFO\n()\n\n    \n{\n\n        \nUFOController\n \nufoCtrl\n \n=\n \nufoFactory\n.\nGetUFO\n(\ndifficulty\n.\ngetUFOAttributes\n());\n\n        \nufoCtrl\n.\nappear\n \n();\n\n        \nactionManager\n.\naddActionToUFO\n(\nufoCtrl\n.\nGetObject\n(),\n \ndifficulty\n.\ngetUFOAttributes\n().\nspeed\n);\n\n    \n}\n\n\n    \npublic\n \nvoid\n \nshootUFO\n(\nUFOController\n \nufo\n)\n\n    \n{\n\n        \nscoreInRound\n++;\n\n        \nscoreRecorder\n.\nrecord\n(\ndifficulty\n.\ngetDifficulty\n());\n\n        \nactionManager\n.\nremoveActionByObj\n(\nufo\n.\nGetObject\n());\n\n        \nexplosionFactory\n.\nexplode\n \n(\nufo\n.\nGetObject\n \n().\ntransform\n.\nposition\n);\n\n        \nufoFactory\n.\nrecycle\n(\nufo\n);\n\n    \n}\n\n\n    \npublic\n \nvoid\n \nshootGround\n(\nVector3\n \npos\n)\n \n    \n{\n\n        \nexplosionFactory\n.\nexplode\n \n(\npos\n);\n\n    \n}\n\n\n    \npublic\n \nvoid\n \nreplay\n()\n \n    \n{\n\n        \ngameStatus\n \n=\n \n1\n;\n\n        \nufoFactory\n.\nrecycleAll\n();\n\n        \nround\n \n=\n \n1\n;\n\n        \nroundText\n.\ntext\n \n=\n \n \n+\n \nround\n++;\n\n        \nInvoke\n(\nstartRound\n,\n \n3\n);\n\n        \ntimerController\n.\nsetTime\n(\n3\n);\n\n        \ndifficulty\n.\nresetDifficulty\n \n();\n\n        \nscoreRecorder\n.\nreset\n \n();\n\n    \n}\n\n\n}\n\n\n\n\n\n\n\n\n\u6e38\u620f\u6548\u679c\u56fe\n\n\n\n\n\n\n\n\n\u603b\u7ed3\n\n\n\u901a\u8fc7\u5b8c\u6210\u8fd9\u4e00\u6b21\u7684\u6e38\u620f\uff0c\u6211\u4f53\u4f1a\u5230\u4e86\u4e4b\u524d\u6211\u4eec\u6240\u5199\u7684MVC\u3001\u52a8\u4f5c\u7ba1\u7406\u5668\u7684\u5de8\u5927\u4f5c\u7528\uff0c\u6709\u4e86\u8fd9\u4e9b\u57fa\u672c\u7684\u67b6\u6784\uff0c\u6211\u4eec\u6e38\u620f\u7684\u5b9e\u73b0\u66f4\u52a0\u7b80\u6613\uff0c\u57fa\u672c\u53ea\u7528\u5b9e\u73b0\u6211\u4eec\u7684\u6e38\u620f\u7269\u4f53\u7684Controller\u3001\u5404\u4e2a\u6e38\u620f\u529f\u80fd\"\u8d1f\u8d23\u4eba\"\u7684Controller\uff0c\u7136\u540e\u901a\u8fc7\u573a\u8bb0\u5bf9\u4e8e\u5404\u4e2aController\u8fdb\u884c\u6574\u5408\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5f97\u5230\u6211\u4eec\u7684\u6574\u4e2a\u6e38\u620f\uff0c\u53ea\u8981\u6211\u4eec\u8bbe\u8ba1\u597d\u4e86\u6211\u4eec\u7684UML\u56fe\uff0c\u6211\u4eec\u5f88\u5feb\u5c31\u53ef\u4ee5\u5b9e\u73b0\u51fa\u6211\u4eec\u7684\u6574\u4e2a\u6e38\u620f\u3002", 
            "title": "\u5b66\u4e60\u7b14\u8bb06-Hit UFO\u7f16\u7a0b\u5b9e\u8df5"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb06-Hit UFO\u7f16\u7a0b\u5b9e\u8df5/#homework4-hitufo", 
            "text": "", 
            "title": "Homework4 HitUFO\uff01 \u6e38\u620f\u7f16\u7a0b\u5b9e\u8df5"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb06-Hit UFO\u7f16\u7a0b\u5b9e\u8df5/#_1", 
            "text": "\u5185\u5bb9\u8981\u6c42  \u6e38\u620f\u6709 n \u4e2a round\uff0c\u6bcf\u4e2a round \u90fd\u5305\u62ec10 \u6b21 trial  \u6bcf\u4e2a trial \u7684\u98de\u789f\u7684\u8272\u5f69\u3001\u5927\u5c0f\u3001\u53d1\u5c04\u4f4d\u7f6e\u3001\u901f\u5ea6\u3001\u89d2\u5ea6\u3001\u540c\u65f6\u51fa\u73b0\u7684\u4e2a\u6570\u90fd\u53ef\u80fd\u4e0d\u540c\u3002\u5b83\u4eec\u7531\u8be5 round \u7684 ruler \u63a7\u5236  \u6bcf\u4e2a trial \u7684\u98de\u789f\u6709\u968f\u673a\u6027\uff0c\u603b\u4f53\u96be\u5ea6\u968f round \u4e0a\u5347  \u9f20\u6807\u70b9\u4e2d\u5f97\u5206\uff0c\u5f97\u5206\u89c4\u5219\u6309\u8272\u5f69\u3001\u5927\u5c0f\u3001\u901f\u5ea6\u4e0d\u540c\u8ba1\u7b97\uff0c\u89c4\u5219\u53ef\u81ea\u7531\u8bbe\u5b9a    \u6e38\u620f\u8981\u6c42  \u4f7f\u7528\u5e26\u7f13\u5b58\u7684\u5de5\u5382\u6a21\u5f0f\u7ba1\u7406\u4e0d\u540c\u98de\u789f\u7684\u751f\u4ea7\u4e0e\u56de\u6536\uff0c\u8be5\u5de5\u5382\u5fc5\u987b\u662f\u573a\u666f\u5355\u5b9e\u4f8b\u7684\uff01\u5177\u4f53\u5b9e\u73b0\u89c1\u53c2\u8003\u8d44\u6e90 Singleton \u6a21\u677f\u7c7b  \u5c3d\u53ef\u80fd\u4f7f\u7528\u524d\u9762 MVC \u7ed3\u6784\u5b9e\u73b0\u4eba\u673a\u4ea4\u4e92\u4e0e\u6e38\u620f\u6a21\u578b\u5206\u79bb", 
            "title": "\u4f5c\u4e1a\u8981\u6c42"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb06-Hit UFO\u7f16\u7a0b\u5b9e\u8df5/#_2", 
            "text": "\u672c\u5468\u7684\u5185\u5bb9\u5728\u6709\u4e86\u4e4b\u524dMVC\u67b6\u6784\u4ee5\u53ca\u52a8\u4f5c\u7ba1\u7406\u5668\u7684\u57fa\u7840\u4e4b\u4e0a\uff0c\u5176\u5b9e\u672c\u6b21\u4f5c\u4e1a\u7684\u5b9e\u73b0\u8f83\u4e3a\u7b80\u5355\u3002\u6309\u7167\u4e4b\u524d\u7684\u60ef\u4f8b\uff0c\u4e3a\u4e86\u7f16\u7a0b\u7684\u6761\u7406\u6027\uff0c\u6211\u4eec\u5148\u8bbe\u8ba1\u51fa\u6211\u4eec\u8fd9\u6b21\u4f5c\u4e1a\u7684UML\u56fe", 
            "title": "\u4f5c\u4e1a\u5b9e\u73b0"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb06-Hit UFO\u7f16\u7a0b\u5b9e\u8df5/#_3", 
            "text": "Hit UFO!  Hit UFO! (With GUN)", 
            "title": "\u89c6\u9891\u6f14\u793a"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb06-Hit UFO\u7f16\u7a0b\u5b9e\u8df5/#uml", 
            "text": "\u5176\u4e2dFirstCharacterController\u7c7b\u662f\u4e3aGUN\u7248\u672c\u521b\u5efa\u7684\u3002", 
            "title": "UML\u56fe"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb06-Hit UFO\u7f16\u7a0b\u5b9e\u8df5/#_4", 
            "text": "\u9996\u5148\uff0c\u6211\u4eec\u6765\u4ecb\u7ecd\u4e00\u4e0b\u8fd9\u6b21\u4f5c\u4e1a\u7684\u91cd\u4e2d\u4e4b\u91cd\uff0c\u5de5\u5382\u7c7b\u7684\u5b9e\u73b0\uff0c\u8fd9\u6b21\u7684\u4f5c\u4e1a\u4e00\u5171\u6709\u4e24\u4e2a\u5de5\u5382\u7c7b\uff0c\u4e00\u4e2a\u662fUFO\u751f\u6210\u7684\u5de5\u5382\uff0c\u4e00\u4e2a\u662f\u7206\u70b8\u751f\u6210\u7684\u5de5\u5382\uff0c \u901a\u8fc7\u5e26\u7f13\u5b58\u7684\u5de5\u5382\u5bf9\u8c61\u7684\u5b9e\u73b0\uff0c\u6211\u4eec\u51cf\u5c11\u4e86\u6e38\u620f\u5bf9\u8c61\u7684\u521b\u5efa\u4ee5\u53ca\u9500\u6bc1\u7684\u6b21\u6570\uff0c\u53ef\u4ee5\u5927\u5927\u51cf\u5c11\u6e38\u620f\u7684\u5f00\u9500\uff0c\u5e76\u4e14\u6e38\u620f\u5bf9\u8c61\u7684\u521b\u5efa\u548c\u9500\u6bc1\u7531\u4e00\u4e2a\u5bf9\u8c61\u7edf\u4e00\u7ba1\u7406\uff0c\u4f7f\u5f97\u4e1a\u52a1\u903b\u8f91\u66f4\u52a0\u660e\u786e\uff0c\u4ece\u800c\u4f7f\u6211\u4eec\u7684\u7a0b\u5e8f\u66f4\u52a0\u5bb9\u6613\u6269\u5c55\u3002  \u4e0b\u9762\u6211\u4eec\u5148\u6765\u770b\u770b\u8fd9\u4e24\u4e2a\u7c7b", 
            "title": "\u5206\u7c7b\u4ecb\u7ecd"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb06-Hit UFO\u7f16\u7a0b\u5b9e\u8df5/#ufofactory", 
            "text": "public   class   UFOFactory   :   MonoBehaviour   { \n     Queue UFOController   waitingQueue ; \n     List UFOController   runningList ; \n\n     GameObject   basic ; \n\n     private   void   Awake () \n     { \n         waitingQueue   =   new   Queue UFOController (); \n         runningList   =   new   List UFOController (); \n\n         basic   =   Instantiate ( Resources . Load ( Prefabs/UFO ,   typeof ( GameObject )))   as   GameObject ; \n         basic . SetActive ( false ); \n     } \n\n     public   UFOController   GetUFO ( UFOData   data ) \n     { \n         UFOController   ufo ; \n         if   ( waitingQueue . Count     0 ) \n             ufo   =   waitingQueue . Dequeue (); \n         else \n         { \n             GameObject   newUFO   =   GameObject . Instantiate ( basic ); \n             ufo   =   new   UFOController ( newUFO ); \n             newUFO . transform . position   +=   Vector3 . forward   *   Random . value   *   10 ; \n         } \n         ufo . setAttribute ( data ); \n         runningList . Add ( ufo ); \n         ufo . appear (); \n         return   ufo ; \n     } \n\n     public   List UFOController   GetRunningList () \n     { \n         return   this . runningList ; \n     } \n\n     public   UFOController []   initAll   ( UFOData   data ,   int   num ) \n     { \n         UFOController []   list   =   new   UFOController [ num ]; \n         for   ( int   i   =   0 ;   i     num ;   i ++) \n         { \n             list [ i ]   =   GetUFO ( data ); \n         } \n         return   list ; \n     } \n\n     public   void   recycle ( UFOController   ufo ) \n     { \n         ufo . disappear (); \n         waitingQueue . Enqueue ( ufo ); \n         runningList . Remove ( ufo ); \n     } \n\n     public   void   recycleAll () \n     { \n         while   ( runningList . Count   !=   0 ) \n         { \n             recycle ( runningList [ 0 ]); \n         } \n     }  }", 
            "title": "UFOFactory"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb06-Hit UFO\u7f16\u7a0b\u5b9e\u8df5/#explosionfactory", 
            "text": "public   class   ExplosionFactory   :   MonoBehaviour   { \n     Queue GameObject   waitingQueue ; \n     List GameObject   runningList ; \n\n     GameObject   basic ; \n\n     private   void   Awake () \n     { \n         waitingQueue   =   new   Queue GameObject (); \n         runningList   =   new   List GameObject (); \n\n         basic   =   Instantiate ( Resources . Load ( Prefabs/Explosion ,   typeof ( GameObject )))   as   GameObject ; \n         basic . SetActive ( false ); \n     } \n\n     public   void   explode ( Vector3   pos ) \n     { \n         GameObject   explosion ; \n         if   ( waitingQueue . Count   ==   0 )   { \n             explosion   =   GameObject . Instantiate   ( basic ); \n             explosion . AddComponent SelfRecycle   (). factory   =   this ; \n         }  \n         else  \n         { \n             explosion   =   waitingQueue . Dequeue   (); \n         } \n         runningList . Add   ( explosion ); \n         explosion . GetComponent SelfRecycle   (). startTimer   ( 0.2f ); \n\n         explosion . SetActive   ( true ); \n         explosion . transform . position   =   pos ; \n     } \n\n     public   void   recycle ( GameObject   explosion ) \n     { \n         explosion . SetActive   ( false ); \n         waitingQueue . Enqueue ( explosion ); \n         runningList . Remove ( explosion ); \n     }  }", 
            "title": "ExplosionFactory"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb06-Hit UFO\u7f16\u7a0b\u5b9e\u8df5/#flyaction", 
            "text": "\u5728\u8fd9\u91cc\u6211\u4f7f\u7528\u7684\u662f\u6211\u4eec\u7b2c\u4e00\u4e2a\u661f\u671f\u6240\u5199\u7684\u629b\u7269\u7ebf\u8fd0\u52a8\u7684\u4ee3\u7801\uff0c\u5916\u90e8\u901a\u8fc7getAction\u63d0\u4f9bUFO\u7684x, y\u7684\u521d\u901f\u5ea6\uff0c\u751f\u6210\u7269\u4f53\u7684\u901f\u5ea6\u5411\u91cf\uff0c\u7136\u540e\u6bcf\u4e00\u5e27\u90fd\u7ed9\u7269\u4f53\u52a0\u4e0a\u5bf9\u5e94\u91cd\u529b\u7684\u79fb\u52a8\u548c\u521d\u901f\u5ea6\u7684\u79fb\u52a8\u5373\u53ef\u5f97\u5230\u7269\u4f53\u7684\u629b\u7269\u7ebf\u3002  public   class   FlyAction   :   SSAction   { \n     public   float   Vx ; \n     public   float   Vy ; \n     public   Vector3   speed ; \n     public   Vector3   gravity ; \n\n     private   FlyAction ()  \n     { \n     } \n\n     public   static   FlyAction   getAction ( float   vx ,   float   vy )  \n     { \n         FlyAction   action   =   ScriptableObject . CreateInstance FlyAction   (); \n         action . gravity   =   Vector3 . zero ; \n         action . Vx   =   vx ; \n         action . Vy   =   vy ; \n         return   action ; \n     } \n\n     // Use this for initialization \n     public   override   void   Start   ()  \n     { \n         speed   =   new   Vector3   ( Vx ,   Vy ,   0 ); \n     } \n\n     // Update is called once per frame \n     public   override   void   Update   ()  \n     { \n         if   ( 2   *   Vy   +   gravity . y     0.00001 )  \n         { \n             gravity . y   -=   10   *   Time . fixedDeltaTime ; \n             transform . Translate   ( speed   *   Time . fixedDeltaTime ); \n             transform . Translate   ( gravity   *   Time . fixedDeltaTime ); \n         } \n         else  \n         { \n             destroy   =   true ; \n             callback . actionDone   ( this ); \n         } \n     }  }", 
            "title": "FlyAction"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb06-Hit UFO\u7f16\u7a0b\u5b9e\u8df5/#fire", 
            "text": "Fire\u7c7b\u662f\u6e38\u620f\u7684\u63d0\u4f9b\u5f00\u706b\u64cd\u4f5c\u7684\u7c7b\uff0c\u901a\u8fc7\u8be5\u7c7b\uff0c\u6211\u4eec\u53ef\u4ee5\u83b7\u53d6\u7528\u6237\u7684\u8f93\u5165\uff0c\u5e76\u4e14\u5bf9\u4e8e\u7528\u6237\u64cd\u4f5c\u8fdb\u884c\u76f8\u5e94\u7684\u5904\u7406\uff0c\u6211\u4eec\u672c\u6b21\u5b9e\u9a8c\u4e3b\u8981\u7528\u5230\u4e86Ray\u6765\u5b9e\u73b0\u7528\u6237\u7684\u5c04\u51fb\u64cd\u4f5c\uff0c\u901a\u8fc7Raycast\u6211\u4eec\u53ef\u4ee5\u83b7\u53d6\u5c04\u7ebf\u51fb\u4e2d\u7684\u7269\u4f53\uff0c\u5e76\u4e14\u628a\u5176\u901a\u8fc7\u76f8\u5e94\u7684\u63a5\u53e3\u4f20\u7ed9\u6211\u4eec\u7684\u573a\u8bb0(SceneControll)\uff0c\u5b8c\u6210\u76f8\u5e94\u7684\u64cd\u4f5c\u3002  public   class   Fire   :   MonoBehaviour   { \n     public   new   Camera   camera ; \n     public   FirstController   sceneController ; \n     LayerMask   layer ; \n\n     void   Awake () \n     { \n         layer   =   LayerMask . GetMask ( UFO ,   Terrian ); \n     } \n\n     // Use this for initialization \n     void   Start   ()   { \n         camera   =   Camera . main ; \n         sceneController   =   GameDirector . getInstance (). currentSceneController   as   FirstController ; \n     } \n\n     // Update is called once per frame \n     void   Update   ()   { \n         if   ( Input . GetButton ( Fire1 )) \n         { \n             Ray   ray   =   camera . ScreenPointToRay ( Input . mousePosition ); \n             RaycastHit   hit ; \n\n             if   ( Physics . Raycast ( ray ,   out   hit ,   Mathf . Infinity   , layer )) \n             { \n                 if   ( hit . transform . gameObject . layer   ==   8 ) \n                 { \n                     sceneController . shootUFO ( hit . transform . gameObject . GetComponent UFOCtrl (). ufoController ); \n                 } \n                 else   if   ( hit . transform . gameObject . layer   ==   9 ) \n                 { \n                     sceneController . shootGround   ( hit . point ); \n                 } \n             } \n         } \n     }  }", 
            "title": "Fire"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb06-Hit UFO\u7f16\u7a0b\u5b9e\u8df5/#scorerecorder", 
            "text": "ScoreRecorder\u7684\u4f5c\u7528\u5c31\u662f\u6211\u4eec\u6e38\u620f\u7684\u8ba1\u5206\u5458\uff0c\u6211\u4eec\u79ef\u5206\u6570\u636e\u7ef4\u62a4\u6ca1\u6709\u653e\u5728\u573a\u8bb0\u91cc\u9762\uff0c\u800c\u662f\u628a\u5176\u5206\u79bb\u4e86\u51fa\u6765\u505a\u4e86\u4e00\u4e2a\u8bb0\u5206\u5458\uff0c\u7531\u8bb0\u5206\u5458\u6765\u7ef4\u62a4\u6211\u4eec\u7684\u79ef\u5206  public   class   ScoreRecorder { \n     private   int   score ; \n\n     Text   gameInfo ; \n\n     private   static   ScoreRecorder   instance ; \n     public   static   ScoreRecorder   getInstance () \n     { \n         if   ( instance   ==   null ) \n         { \n             instance   =   new   ScoreRecorder (); \n         } \n         return   instance ; \n     } \n\n     private   ScoreRecorder () \n     { \n         gameInfo   =   ( GameObject . Instantiate ( Resources . Load ( Prefabs/ScoreInfo ))   as   GameObject ). transform . Find ( Text ). GetComponent Text (); \n         gameInfo . text   =     +   score ; \n     } \n\n     public   void   record ( int   difficulty ) \n     { \n         score   +=   difficulty + 1 ; \n         gameInfo . text   =     +   score ; \n     } \n\n     public   int   getScore () \n     { \n         return   score ; \n     }  }", 
            "title": "ScoreRecorder"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb06-Hit UFO\u7f16\u7a0b\u5b9e\u8df5/#firstcontroller", 
            "text": "FirstController\u7c7b\u5c31\u662f\u6211\u4eec\u8fd9\u6b21\u6e38\u620f\u573a\u666f\u7684\u573a\u8bb0\u4e86\uff0c\u5728\u4e4b\u524d\u5b66\u4e60\u7684\u57fa\u7840\u4e4b\u4e0a\uff0c\u8fd9\u4e00\u6b21\u6e38\u620f\u67b6\u6784\u7684\u8bbe\u8ba1\u66f4\u52a0\u5408\u7406\uff0c\u573a\u8bb0\u76f8\u6bd4\u4e0a\u4e00\u6b21\u7684\u6e38\u620f\u66f4\u52a0\u7b80\u6d01\u6613\u770b\uff0c\u53ef\u8bfb\u6027\u66f4\u5f3a\u3002  public   class   FirstController   :   MonoBehaviour ,   ISceneController   { \n     GameDirector   gameDirector ; \n     FirstSceneActionManager   actionManager ; \n     public   UFOFactory   ufoFactory ; \n     ExplosionFactory   explosionFactory ; \n\n     ScoreRecorder   scoreRecorder ; \n     TimerController   timerController ; \n     DifficultyController   difficulty ; \n\n     int   gameStatus ; \n     int   round   =   1 ; \n     int   emitNum ; \n     int   scoreInRound ; \n     int   fpsCount ; \n     bool   running ; \n     GUIStyle   headerStyle ; \n     GUIStyle   buttonStyle ; \n     Text   roundText ; \n\n     void   Awake () \n     { \n         gameDirector   =   GameDirector . getInstance (); \n         gameDirector . currentSceneController   =   this ; \n         actionManager   =   gameObject . AddComponent FirstSceneActionManager (); \n         ufoFactory   =   gameObject . AddComponent UFOFactory (); \n         explosionFactory   =   gameObject . AddComponent ExplosionFactory   (); \n         difficulty   =   DifficultyController . getInstance (); \n         timerController   =   gameObject . AddComponent TimerController (); \n         scoreRecorder   =   ScoreRecorder . getInstance (); \n\n         loadResources (); \n     } \n\n     public   void   Start () \n     { \n         gameStatus   =   0 ; \n         difficulty . setDifficulty ( 0 ); \n         round   =   1 ; \n         roundText   =   ( GameObject . Instantiate ( Resources . Load ( Prefabs/RoundInfo ))   as   GameObject ). transform . Find ( Text ). GetComponent Text (); \n         roundText . text   =     +   round ; \n         fpsCount   =   0 ; \n         headerStyle   =   new   GUIStyle (); \n         headerStyle . fontSize   =   40 ; \n         headerStyle . alignment   =   TextAnchor . MiddleCenter ; \n         buttonStyle   =   new   GUIStyle ( button ); \n         buttonStyle . fontSize   =   30 ; \n         running   =   false ; \n     } \n\n     void   OnGUI ()  \n     { \n         if   ( gameStatus   ==   0 )  \n         { \n             GUI . Label ( new   Rect ( Screen . width   /   2   -   45 ,   Screen . height   /   2   -   90 ,   100 ,   50 ),   Hit the UFO! ,   headerStyle ); \n             if   ( GUI . Button ( new   Rect ( Screen . width   /   2   -   45 ,   Screen . height   /   2 ,   100 ,   50 ),   Play! , buttonStyle )) \n             { \n                 replay   ();   \n             } \n\n         } \n         else   if   ( gameStatus   ==   2 )  \n         { \n             GUI . Label ( new   Rect ( Screen . width   /   2   -   45 ,   Screen . height   /   2   -   90 ,   100 ,   50 ),   You get  +   scoreRecorder . getScore ()+  points in this game! ,   headerStyle ); \n             if   ( GUI . Button ( new   Rect ( Screen . width   /   2   -   90 ,   Screen . height   /   2 ,   200 ,   50 ),   Play Again , buttonStyle )) \n             { \n                 replay   ();   \n             } \n         } \n     } \n\n     void   Update () \n     { \n         if   ( running     gameStatus   ==   1 ) \n         { \n             fpsCount ++; \n             if   ( fpsCount   ==   60 ) \n             { \n                 if   ( emitNum     difficulty . getEmitNum   ())   { \n                     emitUFO   (); \n                     fpsCount   =   0 ; \n                     emitNum ++; \n                 }   else   if   ( emitNum   ==   difficulty . getEmitNum   ())   { \n                     if   ( scoreInRound     difficulty . getSuccessScore   ())   { \n                         gameStatus   =   2 ; \n                     } \n                     else \n                     { \n                         Invoke ( startRound ,   3 ); \n                         timerController . setTime ( 3 ); \n                         difficulty . setDifficultyByScore   ( scoreRecorder . getScore   ()); \n                     } \n                 } \n             } \n         } \n         else \n         { \n             if   ( Input . GetKeyDown   ( enter )   ||   Input . GetKeyDown   ( return )) \n                 replay   (); \n         } \n     } \n\n     public   void   loadResources () \n     { \n         Instantiate ( Resources . Load ( Prefabs/Land )); \n     } \n\n     void   startRound () \n     { \n         running   =   true ; \n         roundText . text   =     +   round ++; \n         emitNum   =   0 ; \n         scoreInRound   =   0 ; \n         fpsCount   =   0 ; \n     } \n\n     void   emitUFO () \n     { \n         UFOController   ufoCtrl   =   ufoFactory . GetUFO ( difficulty . getUFOAttributes ()); \n         ufoCtrl . appear   (); \n         actionManager . addActionToUFO ( ufoCtrl . GetObject (),   difficulty . getUFOAttributes (). speed ); \n     } \n\n     public   void   shootUFO ( UFOController   ufo ) \n     { \n         scoreInRound ++; \n         scoreRecorder . record ( difficulty . getDifficulty ()); \n         actionManager . removeActionByObj ( ufo . GetObject ()); \n         explosionFactory . explode   ( ufo . GetObject   (). transform . position ); \n         ufoFactory . recycle ( ufo ); \n     } \n\n     public   void   shootGround ( Vector3   pos )  \n     { \n         explosionFactory . explode   ( pos ); \n     } \n\n     public   void   replay ()  \n     { \n         gameStatus   =   1 ; \n         ufoFactory . recycleAll (); \n         round   =   1 ; \n         roundText . text   =     +   round ++; \n         Invoke ( startRound ,   3 ); \n         timerController . setTime ( 3 ); \n         difficulty . resetDifficulty   (); \n         scoreRecorder . reset   (); \n     }  }", 
            "title": "FirstController"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb06-Hit UFO\u7f16\u7a0b\u5b9e\u8df5/#_5", 
            "text": "", 
            "title": "\u6e38\u620f\u6548\u679c\u56fe"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb06-Hit UFO\u7f16\u7a0b\u5b9e\u8df5/#_6", 
            "text": "\u901a\u8fc7\u5b8c\u6210\u8fd9\u4e00\u6b21\u7684\u6e38\u620f\uff0c\u6211\u4f53\u4f1a\u5230\u4e86\u4e4b\u524d\u6211\u4eec\u6240\u5199\u7684MVC\u3001\u52a8\u4f5c\u7ba1\u7406\u5668\u7684\u5de8\u5927\u4f5c\u7528\uff0c\u6709\u4e86\u8fd9\u4e9b\u57fa\u672c\u7684\u67b6\u6784\uff0c\u6211\u4eec\u6e38\u620f\u7684\u5b9e\u73b0\u66f4\u52a0\u7b80\u6613\uff0c\u57fa\u672c\u53ea\u7528\u5b9e\u73b0\u6211\u4eec\u7684\u6e38\u620f\u7269\u4f53\u7684Controller\u3001\u5404\u4e2a\u6e38\u620f\u529f\u80fd\"\u8d1f\u8d23\u4eba\"\u7684Controller\uff0c\u7136\u540e\u901a\u8fc7\u573a\u8bb0\u5bf9\u4e8e\u5404\u4e2aController\u8fdb\u884c\u6574\u5408\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5f97\u5230\u6211\u4eec\u7684\u6574\u4e2a\u6e38\u620f\uff0c\u53ea\u8981\u6211\u4eec\u8bbe\u8ba1\u597d\u4e86\u6211\u4eec\u7684UML\u56fe\uff0c\u6211\u4eec\u5f88\u5feb\u5c31\u53ef\u4ee5\u5b9e\u73b0\u51fa\u6211\u4eec\u7684\u6574\u4e2a\u6e38\u620f\u3002", 
            "title": "\u603b\u7ed3"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb07-\u81ea\u5b9a\u4e49Component(Editor)/", 
            "text": "\u81ea\u5b9a\u4e49Component\n\n\n\u5236\u4f5c\u4e00\u4e2aUnity\u7684Inspector\u754c\u9762\u4e2d\u7684Editor \u64cd\u4f5c\u7ec4\u4ef6\n\n\n\u5236\u4f5c\u8fc7\u7a0b\n\n\n\n\n\u65b0\u5efa\u4e00\u4e2aInspector\u7c7b, \u4e0b\u9762\u7ed9\u51fa\u4e00\u4e2aInspector\u7c7b\u7684\u7b80\u5355\u6837\u4f8b\n\n\n\n\n[CustomEditor(typeof(XX))]\n\n\npublic\n \nclass\n \nxxEditor\n \n:\n \nEditor\n \n{\n\n    \npublic\n \noverride\n \nvoid\n \nOnInspectorGUI\n()\n \n{\n\n        \nvar\n \ntarget\n \n=\n \n(\nXX\n)(\nserializedObject\n.\ntargetObject\n);\n\n        \ntarget\n.\nspeed\n \n=\n \nEditorGUILayout\n.\nSlider\n(\nSpeed\n,\n \ntarget\n.\nspeed\n,\n \n0\n,\n \n100\n);\n\n        \nProgressBar\n(\ntarget\n.\nspeed\n,\n \nSpeed\n);\n\n\n        \ntarget\n.\ncolor\n \n=\n \nEditorGUILayout\n.\nColorField\n(\nColor\n,\n \ntarget\n.\ncolor\n);\n\n    \n}\n\n\n    \nprivate\n \nvoid\n \nProgressBar\n(\nfloat\n \nvalue\n,\n \nstring\n \nlabel\n)\n \n{\n\n        \nRect\n \nrect\n \n=\n \nGUILayoutUtility\n.\nGetRect\n(\n20\n,\n \n20\n,\n \nTextField\n);\n\n        \nEditorGUI\n.\nProgressBar\n(\nrect\n,\n \nvalue\n,\n \nlabel\n);\n\n        \nEditorGUILayout\n.\nSpace\n();\n\n    \n}\n\n\n}\n\n\n\n\n\n\n\n\n\u7136\u540e\uff0c\u6211\u4eec\u53ea\u8981\u628aXX ADD\u5230\u4e00\u4e2aGameObject\u4e0a\uff0cInspector\u4e2d\u5c31\u4f1a\u51fa\u73b0\u6211\u4eec\u521a\u521a\u5199\u7684Editor\u4e86\u3002", 
            "title": "\u5b66\u4e60\u7b14\u8bb07-\u81ea\u5b9a\u4e49Component(Editor)"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb07-\u81ea\u5b9a\u4e49Component(Editor)/#component", 
            "text": "", 
            "title": "\u81ea\u5b9a\u4e49Component"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb07-\u81ea\u5b9a\u4e49Component(Editor)/#unityinspectoreditor", 
            "text": "", 
            "title": "\u5236\u4f5c\u4e00\u4e2aUnity\u7684Inspector\u754c\u9762\u4e2d\u7684Editor \u64cd\u4f5c\u7ec4\u4ef6"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb07-\u81ea\u5b9a\u4e49Component(Editor)/#_1", 
            "text": "\u65b0\u5efa\u4e00\u4e2aInspector\u7c7b, \u4e0b\u9762\u7ed9\u51fa\u4e00\u4e2aInspector\u7c7b\u7684\u7b80\u5355\u6837\u4f8b   [CustomEditor(typeof(XX))]  public   class   xxEditor   :   Editor   { \n     public   override   void   OnInspectorGUI ()   { \n         var   target   =   ( XX )( serializedObject . targetObject ); \n         target . speed   =   EditorGUILayout . Slider ( Speed ,   target . speed ,   0 ,   100 ); \n         ProgressBar ( target . speed ,   Speed ); \n\n         target . color   =   EditorGUILayout . ColorField ( Color ,   target . color ); \n     } \n\n     private   void   ProgressBar ( float   value ,   string   label )   { \n         Rect   rect   =   GUILayoutUtility . GetRect ( 20 ,   20 ,   TextField ); \n         EditorGUI . ProgressBar ( rect ,   value ,   label ); \n         EditorGUILayout . Space (); \n     }  }    \u7136\u540e\uff0c\u6211\u4eec\u53ea\u8981\u628aXX ADD\u5230\u4e00\u4e2aGameObject\u4e0a\uff0cInspector\u4e2d\u5c31\u4f1a\u51fa\u73b0\u6211\u4eec\u521a\u521a\u5199\u7684Editor\u4e86\u3002", 
            "title": "\u5236\u4f5c\u8fc7\u7a0b"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb08-adapter\u6a21\u5f0f\u7684\u6253\u98de\u789f\u6e38\u620f/", 
            "text": "Homework5-adapter\u6a21\u5f0f\u7684\u6253\u98de\u789f\u6e38\u620f\n\n\n\u8fd9\u5468\u7684\u4efb\u52a1\u4e3b\u8981\u5c31\u662f\u901a\u8fc7\u7ed9\u6253\u98de\u789f\u6e38\u620f\u52a0\u4e0aadapter\u6a21\u5f0f\u8ba9\u6211\u4eec\u719f\u6089adapter\u6a21\u5f0f\uff0c\u4f53\u4f1a\u5230Apapter\u6a21\u5f0f\u7ed9\u6211\u4eec\u7f16\u7a0b\u5e26\u6765\u7684\u4f5c\u7528\uff0c\u63d0\u5347\u6211\u4eec\u9762\u5411\u5bf9\u8c61\u7684\u8bbe\u8ba1\u6280\u5de7\u3002\n\n\n\u6f14\u793a\u89c6\u9891\n\n\n\u89c6\u9891\u6f14\u793a\u7f51\u7ad9: \nHit UFO!\n \n\u672c\u5468\u7684\u6e38\u620f\u6548\u679c\u548c\u4e0a\u5468\u5dee\u4e0d\u591a\uff0c\u5c31\u662f\u591a\u4e86\u4e00\u4e2a\u53f3\u952e\u70b9\u51fb\u9f20\u6807\u5207\u6362\u52a8\u4f5c\u7ba1\u7406\u5668\u7684\u529f\u80fd\u3002\n\n\n\u5b8c\u6210\u7684\u7c7b\n\n\n\u5176\u5b9e\u5728\u4e0a\u4e00\u5468\u5df2\u5b8c\u6210\u4f5c\u4e1a\u7684\u57fa\u7840\u4e0a\uff0c\u8fd9\u4e00\u5468\u5e76\u4e0d\u7528\u52a0\u4ec0\u4e48\u7279\u522b\u7684\u4e1c\u897f\u3002\u53ea\u9700\u8981\u5199\u51fa\u4e00\u4e2a\u57fa\u672c\u7684ActionManagerTarget\u7684\u63a5\u53e3(\u7c7b\u4f3c\u4e0a\u56fe\u4e2d\u7684IActionManager), \u7136\u540e\u5b9e\u73b0\u4e00\u4e2a\u4f9b\u573a\u666f\u63a7\u5236\u5668\u8c03\u7528\u7684ActionManagerAdapter,\u7136\u540e\u5b9e\u73b0\u6211\u4eec\u8fd9\u6b21\u9700\u8981\u5b9e\u73b0\u7684PhysicsActionManager, \u628a\u539f\u6765\u8c03\u7528FirstSceneActionController\u7684\u5730\u65b9\u6362\u6210\u8c03\u7528\u6211\u4eec\u65b0\u5b9e\u73b0\u7684ActionManagerAdapter\uff0c\u90a3\u4e48\u8fd9\u5468\u7684\u4f5c\u4e1a\u5c31\u5b8c\u6210\u4e86\u3002\u4e0b\u9762\u6211\u4eec\u5206\u7c7b\u6765\u8bf4\u8bf4\n\n\nActionManagerTarget\n\n\n\u8fd9\u4e2a\u63a5\u53e3\u91cc\u58f0\u660e\u7684\u5c31\u662f\u6211\u4eec\u52a8\u4f5c\u7ba1\u7406\u5668\u6240\u9700\u7684\u57fa\u672c\u51fd\u6570\uff0c\u4ee5\u53ca\u4e00\u4e2a\u5207\u6362\u52a8\u4f5c\u7ba1\u7406\u5668\u7684\u529f\u80fd\u3002\u901a\u8fc7\u4f7f\u7528\u8fd9\u4e2a\u7edf\u4e00\u7684\u63a5\u53e3\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u591a\u4e2a\u52a8\u4f5c\u7ba1\u7406\u5668\u4e4b\u95f4\u65e0\u7f1d\u5207\u6362.\n\n\npublic\n \ninterface\n \nActionManagerTarget\n \n\n{\n\n    \nint\n \ngetMode\n();\n\n\n    \nvoid\n \nswitchActionManager\n();\n\n\n    \nvoid\n \naddAction\n \n(\nGameObject\n \nufo\n,\n \nfloat\n \nspeed\n);\n\n\n    \nvoid\n \nremoveActionOf\n \n(\nGameObject\n \nufo\n);\n\n\n}\n\n\n\n\n\n\nActionManagerAdapter\n\n\n\u8fd9\u91cc\u5c31\u662f\u5bf9\u4e8e\u6211\u4eec\u58f0\u660e\u7684\u4e00\u4e2a\u63a5\u53e3\u7684\u5b9e\u73b0\uff0c\u901a\u8fc7\u5b9e\u73b0\u8fd9\u4e2a\u63a5\u53e3\u4ee5\u4f9b\u573a\u666f\u63a7\u5236\u5668\u8c03\u7528\uff0c\u6211\u4eec\u7ed9\u6e38\u620f\u52a0\u4e0a\u7684Adapter\u6a21\u5f0f\u7684\u5de5\u4f5c\u5c31\u5b8c\u6210\u4e00\u5927\u534a\u4e86\uff0c\u5269\u4e0b\u7684\u57fa\u672c\u5c31\u662f\u5b8c\u6210PhysicsActionManager\u4e86\u3002\n\n\npublic\n \nclass\n \nActionManagerAdapter\n \n:\n \nActionManagerTarget\n \n\n{\n\n    \nFirstSceneActionManager\n \nfirstSceneActionManager\n;\n\n    \nPhysicsActionManager\n \nphysicsActionManager\n;\n\n\n    \nint\n \nmode\n \n=\n \n0\n;\n \n// 0: firstSceneActionManager, 1: physicsActionManager\n\n\n    \npublic\n \nint\n \ngetMode\n()\n \n    \n{\n\n        \nreturn\n \nmode\n;\n\n    \n}\n\n\n    \npublic\n \nvoid\n \nswitchActionManager\n()\n \n    \n{\n\n        \nmode\n \n=\n \n1\n \n-\n \nmode\n;\n\n    \n}\n\n\n    \npublic\n \nActionManagerAdapter\n(\nGameObject\n \nmain\n)\n \n    \n{\n\n        \nfirstSceneActionManager\n \n=\n \nmain\n.\nAddComponent\n \n \nFirstSceneActionManager\n \n();\n\n        \nphysicsActionManager\n \n=\n \nmain\n.\nAddComponent\nPhysicsActionManager\n \n();\n\n        \nmode\n \n=\n \n0\n;\n\n    \n}\n\n\n    \npublic\n \nvoid\n \naddAction\n(\nGameObject\n \nufo\n,\n \nfloat\n \nspeed\n)\n \n    \n{\n\n        \nif\n \n(\nmode\n \n==\n \n0\n)\n\n        \n{\n\n            \nfirstSceneActionManager\n.\naddActionToUFO\n \n(\nufo\n,\n \nspeed\n);\n\n        \n}\n\n        \nelse\n\n        \n{\n\n            \nphysicsActionManager\n.\naddForceToObj\n \n(\nufo\n,\n \nspeed\n);\n\n        \n}\n\n    \n}\n\n\n    \npublic\n \nvoid\n \nremoveActionOf\n(\nGameObject\n \nufo\n)\n \n    \n{\n\n        \nif\n \n(\nmode\n \n==\n \n0\n)\n \n        \n{\n\n            \nfirstSceneActionManager\n.\nremoveActionByObj\n \n(\nufo\n);\n\n        \n}\n\n        \nelse\n\n        \n{\n\n            \nphysicsActionManager\n.\nremoveForceOfObj\n \n(\nufo\n);\n\n        \n}\n\n    \n}\n\n\n}\n\n\n\n\n\n\nPhysicsActionManage\n\n\n\u5728\u8fd9\u91cc\u56e0\u4e3a\u7ed9\u6211\u4eec\u7684ufo\u52a0\u4e0a\u4e86\u521a\u4f53\uff0c\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u52a0\u4e0a\u529b\u3001\u521d\u901f\u5ea6\uff0c\u53bb\u6389\u529b\u7684\u65b9\u5f0f\uff0c\u7ed9\u52a8\u4f5c\u52a0\u4e0a\u5bf9\u5e94\u7684\u52a8\u4f5c\uff0c\u8bbe\u901f\u5ea6\u4e3a0\u7684\u64cd\u4f5c\u5b9e\u73b0\u52a8\u4f5c\u7684\u7ba1\u7406\u3002\n\n\npublic\n \nclass\n \nPhysicsActionManager\n \n:\n \nMonoBehaviour\n \n{\n\n    \npublic\n \nvoid\n \naddForceToObj\n \n(\nGameObject\n \nufo\n,\n \nfloat\n \nspeed\n)\n \n    \n{\n\n        \nint\n \nposition\n \n=\n \n(\nRandom\n.\nRange\n \n(\n1\n,\n \n3\n)\n \n \n2\n)\n \n?\n \n-\n1\n \n:\n \n1\n;\n\n        \nufo\n.\ntransform\n.\nposition\n \n=\n \nnew\n \nVector3\n \n(-\n10\n \n*\n \nposition\n,\n \nRandom\n.\nRange\n \n(\n4\n,\n \n6\n),\n \n5\n);\n\n        \nVector3\n \nspeedVector\n \n=\n \nnew\n \nVector3\n \n(\nRandom\n.\nRange\n \n((\nint\n)\nspeed\n,\n \n(\nint\n)(\n1.5\n \n*\n \nspeed\n))\n \n*\n \nposition\n,\n \nRandom\n.\nRange\n \n((\nint\n)\nspeed\n,\n \n(\nint\n)(\n1.2\n \n*\n \nspeed\n)),\n \n0\n);\n\n        \nufo\n.\nGetComponent\nRigidbody\n \n().\nuseGravity\n \n=\n \ntrue\n;\n\n        \nufo\n.\nGetComponent\nRigidbody\n \n().\nvelocity\n \n=\n \nspeedVector\n;\n\n    \n}\n\n\n    \npublic\n \nvoid\n \nremoveForceOfObj\n \n(\nGameObject\n \nufo\n)\n\n    \n{\n\n       \nufo\n.\nGetComponent\nRigidbody\n \n().\nuseGravity\n \n=\n \nfalse\n;\n\n       \nufo\n.\nGetComponent\nRigidbody\n \n().\nvelocity\n \n=\n \nVector3\n.\nzero\n;\n\n    \n}\n\n\n\n}\n\n\n\n\n\n\n\u5b9e\u73b0\u4e86\u8fd9\u4e9b\u7c7b\u4e4b\u540e\uff0c\u52a0\u4e0a\u5176\u4ed6\u4ee3\u7801\u7684\u4e00\u4e9b\u5fae\u5c0f\u7684\u4fee\u6574\uff0c\u5373\u4e00\u4e9b\u5730\u65b9\u5bf9\u4e8e\u5207\u6362\u573a\u666f\u63a7\u5236\u5668\u529f\u80fd\u7684\u8c03\u7528\u7684\u8bbe\u7f6e(\u6e38\u620f\u573a\u666f\u5185\u53f3\u952e\u70b9\u51fb)\u4ee5\u53ca\u4e00\u4e9b\u52a0\u5165\u4e86\u65b0\u7684PhysicsActionManager\u540e\u51fa\u4e86\u4e00\u4e9b\u5c0fBug\u7684\u4fee\u590d\u548c\u52a0\u4e86\u4e00\u4e9b\u6e38\u620f\u7684\u5f69\u86cb(\u98de\u789f\u76f8\u649e\u4f1a\ud83d\udca5\uff0c\u4f60\u6253\u5f97\u4e0d\u5feb\u7684\u8bdd\u6709\u65f6\u5c31\u6253\u4e0d\u5230\u4e86\uff0c\u54c8\u54c8)\uff0c\u6211\u4eec\u5c31\u5b8c\u6210\u8fd9\u5468\u7684\u4f5c\u4e1a\u4e86\uff0c\u8fd9\u5468\u7684\u8fd9\u4e2a\u4f5c\u4e1a\u76f8\u5bf9\u524d\u51e0\u5468\u5176\u5b9e\u4efb\u52a1\u91cf\u5e76\u4e0d\u5927\uff0c\u6240\u4ee5\uff0c\u7ee7\u7eed\u809d\u5c04\u7bad\u5c0f\u6e38\u620f\u53bb\u5566\ud83c\udf1a!", 
            "title": "\u5b66\u4e60\u7b14\u8bb08-adapter\u6a21\u5f0f\u7684\u6253\u98de\u789f\u6e38\u620f"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb08-adapter\u6a21\u5f0f\u7684\u6253\u98de\u789f\u6e38\u620f/#homework5-adapter", 
            "text": "\u8fd9\u5468\u7684\u4efb\u52a1\u4e3b\u8981\u5c31\u662f\u901a\u8fc7\u7ed9\u6253\u98de\u789f\u6e38\u620f\u52a0\u4e0aadapter\u6a21\u5f0f\u8ba9\u6211\u4eec\u719f\u6089adapter\u6a21\u5f0f\uff0c\u4f53\u4f1a\u5230Apapter\u6a21\u5f0f\u7ed9\u6211\u4eec\u7f16\u7a0b\u5e26\u6765\u7684\u4f5c\u7528\uff0c\u63d0\u5347\u6211\u4eec\u9762\u5411\u5bf9\u8c61\u7684\u8bbe\u8ba1\u6280\u5de7\u3002", 
            "title": "Homework5-adapter\u6a21\u5f0f\u7684\u6253\u98de\u789f\u6e38\u620f"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb08-adapter\u6a21\u5f0f\u7684\u6253\u98de\u789f\u6e38\u620f/#_1", 
            "text": "\u89c6\u9891\u6f14\u793a\u7f51\u7ad9:  Hit UFO!  \n\u672c\u5468\u7684\u6e38\u620f\u6548\u679c\u548c\u4e0a\u5468\u5dee\u4e0d\u591a\uff0c\u5c31\u662f\u591a\u4e86\u4e00\u4e2a\u53f3\u952e\u70b9\u51fb\u9f20\u6807\u5207\u6362\u52a8\u4f5c\u7ba1\u7406\u5668\u7684\u529f\u80fd\u3002", 
            "title": "\u6f14\u793a\u89c6\u9891"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb08-adapter\u6a21\u5f0f\u7684\u6253\u98de\u789f\u6e38\u620f/#_2", 
            "text": "\u5176\u5b9e\u5728\u4e0a\u4e00\u5468\u5df2\u5b8c\u6210\u4f5c\u4e1a\u7684\u57fa\u7840\u4e0a\uff0c\u8fd9\u4e00\u5468\u5e76\u4e0d\u7528\u52a0\u4ec0\u4e48\u7279\u522b\u7684\u4e1c\u897f\u3002\u53ea\u9700\u8981\u5199\u51fa\u4e00\u4e2a\u57fa\u672c\u7684ActionManagerTarget\u7684\u63a5\u53e3(\u7c7b\u4f3c\u4e0a\u56fe\u4e2d\u7684IActionManager), \u7136\u540e\u5b9e\u73b0\u4e00\u4e2a\u4f9b\u573a\u666f\u63a7\u5236\u5668\u8c03\u7528\u7684ActionManagerAdapter,\u7136\u540e\u5b9e\u73b0\u6211\u4eec\u8fd9\u6b21\u9700\u8981\u5b9e\u73b0\u7684PhysicsActionManager, \u628a\u539f\u6765\u8c03\u7528FirstSceneActionController\u7684\u5730\u65b9\u6362\u6210\u8c03\u7528\u6211\u4eec\u65b0\u5b9e\u73b0\u7684ActionManagerAdapter\uff0c\u90a3\u4e48\u8fd9\u5468\u7684\u4f5c\u4e1a\u5c31\u5b8c\u6210\u4e86\u3002\u4e0b\u9762\u6211\u4eec\u5206\u7c7b\u6765\u8bf4\u8bf4", 
            "title": "\u5b8c\u6210\u7684\u7c7b"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb08-adapter\u6a21\u5f0f\u7684\u6253\u98de\u789f\u6e38\u620f/#actionmanagertarget", 
            "text": "\u8fd9\u4e2a\u63a5\u53e3\u91cc\u58f0\u660e\u7684\u5c31\u662f\u6211\u4eec\u52a8\u4f5c\u7ba1\u7406\u5668\u6240\u9700\u7684\u57fa\u672c\u51fd\u6570\uff0c\u4ee5\u53ca\u4e00\u4e2a\u5207\u6362\u52a8\u4f5c\u7ba1\u7406\u5668\u7684\u529f\u80fd\u3002\u901a\u8fc7\u4f7f\u7528\u8fd9\u4e2a\u7edf\u4e00\u7684\u63a5\u53e3\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u591a\u4e2a\u52a8\u4f5c\u7ba1\u7406\u5668\u4e4b\u95f4\u65e0\u7f1d\u5207\u6362.  public   interface   ActionManagerTarget   { \n     int   getMode (); \n\n     void   switchActionManager (); \n\n     void   addAction   ( GameObject   ufo ,   float   speed ); \n\n     void   removeActionOf   ( GameObject   ufo );  }", 
            "title": "ActionManagerTarget"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb08-adapter\u6a21\u5f0f\u7684\u6253\u98de\u789f\u6e38\u620f/#actionmanageradapter", 
            "text": "\u8fd9\u91cc\u5c31\u662f\u5bf9\u4e8e\u6211\u4eec\u58f0\u660e\u7684\u4e00\u4e2a\u63a5\u53e3\u7684\u5b9e\u73b0\uff0c\u901a\u8fc7\u5b9e\u73b0\u8fd9\u4e2a\u63a5\u53e3\u4ee5\u4f9b\u573a\u666f\u63a7\u5236\u5668\u8c03\u7528\uff0c\u6211\u4eec\u7ed9\u6e38\u620f\u52a0\u4e0a\u7684Adapter\u6a21\u5f0f\u7684\u5de5\u4f5c\u5c31\u5b8c\u6210\u4e00\u5927\u534a\u4e86\uff0c\u5269\u4e0b\u7684\u57fa\u672c\u5c31\u662f\u5b8c\u6210PhysicsActionManager\u4e86\u3002  public   class   ActionManagerAdapter   :   ActionManagerTarget   { \n     FirstSceneActionManager   firstSceneActionManager ; \n     PhysicsActionManager   physicsActionManager ; \n\n     int   mode   =   0 ;   // 0: firstSceneActionManager, 1: physicsActionManager \n\n     public   int   getMode ()  \n     { \n         return   mode ; \n     } \n\n     public   void   switchActionManager ()  \n     { \n         mode   =   1   -   mode ; \n     } \n\n     public   ActionManagerAdapter ( GameObject   main )  \n     { \n         firstSceneActionManager   =   main . AddComponent     FirstSceneActionManager   (); \n         physicsActionManager   =   main . AddComponent PhysicsActionManager   (); \n         mode   =   0 ; \n     } \n\n     public   void   addAction ( GameObject   ufo ,   float   speed )  \n     { \n         if   ( mode   ==   0 ) \n         { \n             firstSceneActionManager . addActionToUFO   ( ufo ,   speed ); \n         } \n         else \n         { \n             physicsActionManager . addForceToObj   ( ufo ,   speed ); \n         } \n     } \n\n     public   void   removeActionOf ( GameObject   ufo )  \n     { \n         if   ( mode   ==   0 )  \n         { \n             firstSceneActionManager . removeActionByObj   ( ufo ); \n         } \n         else \n         { \n             physicsActionManager . removeForceOfObj   ( ufo ); \n         } \n     }  }", 
            "title": "ActionManagerAdapter"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb08-adapter\u6a21\u5f0f\u7684\u6253\u98de\u789f\u6e38\u620f/#physicsactionmanage", 
            "text": "\u5728\u8fd9\u91cc\u56e0\u4e3a\u7ed9\u6211\u4eec\u7684ufo\u52a0\u4e0a\u4e86\u521a\u4f53\uff0c\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u52a0\u4e0a\u529b\u3001\u521d\u901f\u5ea6\uff0c\u53bb\u6389\u529b\u7684\u65b9\u5f0f\uff0c\u7ed9\u52a8\u4f5c\u52a0\u4e0a\u5bf9\u5e94\u7684\u52a8\u4f5c\uff0c\u8bbe\u901f\u5ea6\u4e3a0\u7684\u64cd\u4f5c\u5b9e\u73b0\u52a8\u4f5c\u7684\u7ba1\u7406\u3002  public   class   PhysicsActionManager   :   MonoBehaviour   { \n     public   void   addForceToObj   ( GameObject   ufo ,   float   speed )  \n     { \n         int   position   =   ( Random . Range   ( 1 ,   3 )     2 )   ?   - 1   :   1 ; \n         ufo . transform . position   =   new   Vector3   (- 10   *   position ,   Random . Range   ( 4 ,   6 ),   5 ); \n         Vector3   speedVector   =   new   Vector3   ( Random . Range   (( int ) speed ,   ( int )( 1.5   *   speed ))   *   position ,   Random . Range   (( int ) speed ,   ( int )( 1.2   *   speed )),   0 ); \n         ufo . GetComponent Rigidbody   (). useGravity   =   true ; \n         ufo . GetComponent Rigidbody   (). velocity   =   speedVector ; \n     } \n\n     public   void   removeForceOfObj   ( GameObject   ufo ) \n     { \n        ufo . GetComponent Rigidbody   (). useGravity   =   false ; \n        ufo . GetComponent Rigidbody   (). velocity   =   Vector3 . zero ; \n     }  }   \u5b9e\u73b0\u4e86\u8fd9\u4e9b\u7c7b\u4e4b\u540e\uff0c\u52a0\u4e0a\u5176\u4ed6\u4ee3\u7801\u7684\u4e00\u4e9b\u5fae\u5c0f\u7684\u4fee\u6574\uff0c\u5373\u4e00\u4e9b\u5730\u65b9\u5bf9\u4e8e\u5207\u6362\u573a\u666f\u63a7\u5236\u5668\u529f\u80fd\u7684\u8c03\u7528\u7684\u8bbe\u7f6e(\u6e38\u620f\u573a\u666f\u5185\u53f3\u952e\u70b9\u51fb)\u4ee5\u53ca\u4e00\u4e9b\u52a0\u5165\u4e86\u65b0\u7684PhysicsActionManager\u540e\u51fa\u4e86\u4e00\u4e9b\u5c0fBug\u7684\u4fee\u590d\u548c\u52a0\u4e86\u4e00\u4e9b\u6e38\u620f\u7684\u5f69\u86cb(\u98de\u789f\u76f8\u649e\u4f1a\ud83d\udca5\uff0c\u4f60\u6253\u5f97\u4e0d\u5feb\u7684\u8bdd\u6709\u65f6\u5c31\u6253\u4e0d\u5230\u4e86\uff0c\u54c8\u54c8)\uff0c\u6211\u4eec\u5c31\u5b8c\u6210\u8fd9\u5468\u7684\u4f5c\u4e1a\u4e86\uff0c\u8fd9\u5468\u7684\u8fd9\u4e2a\u4f5c\u4e1a\u76f8\u5bf9\u524d\u51e0\u5468\u5176\u5b9e\u4efb\u52a1\u91cf\u5e76\u4e0d\u5927\uff0c\u6240\u4ee5\uff0c\u7ee7\u7eed\u809d\u5c04\u7bad\u5c0f\u6e38\u620f\u53bb\u5566\ud83c\udf1a!", 
            "title": "PhysicsActionManage"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb09-\u5c04\u7bad\u5c0f\u6e38\u620f/", 
            "text": "Homework5-\u5c04\u7bad\u5c0f\u6e38\u620f\n\n\n\u6e38\u620f\u8981\u6c42\n\n\n\n\n\u9776\u5bf9\u8c61\u4e3a 5 \u73af\uff0c\u6309\u73af\u8ba1\u5206\uff1b\n\n\n\u7bad\u5bf9\u8c61\uff0c\u5c04\u4e2d\u540e\u8981\u63d2\u5728\u9776\u4e0a\n\n\n\u589e\u5f3a\u8981\u6c42\uff1a\u5c04\u4e2d\u540e\uff0c\u7bad\u5bf9\u8c61\u4ea7\u751f\u98a4\u6296\u6548\u679c\uff0c\u5230\u4e0b\u4e00\u6b21\u5c04\u51fb \u6216 1\u79d2\u4ee5\u540e\uff08\u672a\u5b9e\u73b0\uff09\n\n\n\u6e38\u620f\u4ec5\u4e00\u8f6e\uff0c\u65e0\u9650 trials\uff1b\n\n\n\u589e\u5f3a\u8981\u6c42\uff1a\u6dfb\u52a0\u4e00\u4e2a\u98ce\u5411\u548c\u5f3a\u5ea6\u6807\u5fd7\uff0c\u63d0\u9ad8\u96be\u5ea6\n\n\n\n\n\u5b9e\u73b0\u6548\u679c\n\n\n\u89c6\u9891\u6f14\u793a\u7f51\u7ad9\u4e3a\nArrowGame\n\n\n\u4e0b\u9762\u662f\u6e38\u620f\u7684\u622a\u56fe\n\n\n\n\n\n\n\n\nUML\u56fe\n\n\n\n\n\u6e38\u620f\u5b9e\u73b0\n\n\n\u505a\u4e86\u8fd9\u51e0\u6b21\u7684\u4f5c\u4e1a\u4ee5\u540e\uff0c\u6211\u53d1\u73b0\u57fa\u672c\u67b6\u6784\u7684\u4ee3\u7801\u90fd\u51e0\u4e4e\u53ef\u4ee5\u590d\u7528\uff0c\u6240\u4ee5\u6211\u76f4\u63a5\u628a\u4e00\u4e9b\u57fa\u672c\u7684\u6bcf\u6b21\u7528\u5230\u7684\u4ee3\u7801\u5f04\u4e86\u4e00\u4e2aBasicCode\u6587\u4ef6\u5939\uff0cActionManager\u4e5f\u6446\u653e\u5728\u5185\uff0c\u7f16\u5199\u6e38\u620f\u7684\u65f6\u5019\uff0c\u5728\u5176\u57fa\u7840\u4e0a\u589e\u52a0\u5c31\u597d\u4e86\u3002\n\n\n\u6839\u636e\u6211\u4eec\u753b\u51fa\u7684UML\u56fe\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u6211\u4eec\u8fd9\u6b21\u9700\u8981\u5b8c\u6210\u7684\u7c7b\u4e0d\u7b97\u591a, \u57fa\u7840\u7684\u4ee3\u7801\u90fd\u6709\uff0c\u4e0d\u4e0d\u4e0d\u8fc7\u8fd9\u6b21\u4f5c\u4e1a\u4e2d\u7684PhysicsActionManager\uff0c\u6211\u7ecf\u8fc7\u4e0a\u4e00\u6b21\u4f5c\u4e1a\u7684\u7f16\u8f91\uff0c\u7ecf\u8fc7\u601d\u8003\uff0c\u89c9\u5f97\u5176\u5e94\u8be5\u7ee7\u627f\u6211\u4eec\u7684SSActionManager\uff0c\u8fd9\u6837\u4e0d\u4ec5\u53ef\u4ee5\u8ba9\u6211\u4eec\u51cf\u5c11\u4e86\u4e00\u4e2a\u63a5\u53e3\u7c7b\u7684\u4e66\u5199\uff0c\u8fd8\u628a\u5176\u6574\u5408\u5230\u6574\u4e2aActionManager\u7684\u7cfb\u7edf\u4e2d\uff0c\u62e5\u6709ActionCallback\u7b49\u7684\u529f\u80fd\uff0c\u52a8\u4f5c\u7684\u5b8c\u6210\u7684\u5224\u65ad\u53ef\u4ee5\u76f4\u63a5\u5728\u81ea\u8eab\u7684Update\u91cc\u5b8c\u6210\uff0c\u6bd4\u8d77\u4e0a\u4e00\u6b21\u4f5c\u4e1a\u4f18\u5316\u4e86\u633a\u591a\u3002\n\n\n\u73b0\u5728\u6211\u4eec\u5206\u7c7b\u8bf4\u8bf4\n\n\nArrowFlyAction\n\n\n\u8fd9\u6b21\u4f5c\u4e1a\u6700\u57fa\u672c\u7684\u80af\u5b9a\u5c31\u662f\u6211\u4eec\u7bad\u7684\u52a8\u4f5c\u4e86\uff0c\u8fd9\u91cc\u6211\u4e0d\u4ec5\u5305\u542b\u4e86\u5c04\u7bad\u51fa\u53bb\u7684\u52a8\u4f5c\uff0c\u8fd8\u5305\u542b\u4e86\u98ce\u5411\u5bf9\u4e8e\u7bad\u4ea7\u751f\u7684\u52a8\u4f5c\uff0c\u81f3\u4e8e\u4e3a\u4ec0\u4e48\u6211\u4f1a\u628a\u98ce\u529b\u5bf9\u7bad\u7684\u5f71\u54cd\u5b9e\u4f53\u5316\u6210\u52a8\u4f5c\u5728\u6e38\u620f\u4e2d\u5462\uff0c\u56e0\u4e3a\u901a\u8fc7\u4f7f\u7528ActionManager\u53bb\u7ba1\u7406\u98ce\u529b\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u573a\u666f\u63a7\u5236\u5668\u4e2d\u51cf\u5c11\u76f8\u5e94\u7684\u4ee3\u7801\u3002\n\n\nArrowFlyAction\u5b9e\u73b0\u5982\u4e0b\n\n\npublic\n \nclass\n \nArrowFlyAction\n \n:\n \nSSAction\n \n{\n\n    \npublic\n \nint\n \ntype\n;\n \n// 0: windAction, 1: shootAction\n\n    \npublic\n \nVector3\n \nspeed\n;\n\n    \nbool\n \nfirstTime\n \n=\n \nfalse\n;\n\n\n    \nprivate\n \nArrowFlyAction\n()\n \n{}\n\n\n    \npublic\n \nstatic\n \nArrowFlyAction\n \nGetSSAction\n(\nint\n \ntype\n,\n \nVector3\n \nspeed\n)\n \n{\n\n        \nArrowFlyAction\n \narrowFlyAction\n \n=\n \nScriptableObject\n.\nCreateInstance\nArrowFlyAction\n \n();\n\n        \narrowFlyAction\n.\nspeed\n \n=\n \nspeed\n;\n\n        \narrowFlyAction\n.\nfirstTime\n \n=\n \ntrue\n;\n\n        \narrowFlyAction\n.\ntype\n \n=\n \ntype\n;\n\n        \nreturn\n \narrowFlyAction\n;\n\n    \n}\n\n\n    \npublic\n \noverride\n \nvoid\n \nStart\n()\n \n{}\n\n\n    \npublic\n \noverride\n \nvoid\n \nUpdate\n()\n \n{\n\n        \nif\n \n(\nfirstTime\n)\n \n{\n\n            \nif\n \n(\ntype\n \n==\n \n0\n)\n \n{\n\n                \n// wind\n\n                \nthis\n.\ngameObject\n.\nGetComponent\nRigidbody\n \n().\nAddForce\n \n(\nspeed\n,\n \nForceMode\n.\nForce\n);\n\n            \n}\n \nelse\n \n{\n\n                \n// shoot\n\n                \nthis\n.\ngameObject\n.\nGetComponent\nRigidbody\n \n().\nAddForce\n \n(\nspeed\n,\n \nForceMode\n.\nVelocityChange\n);\n\n            \n}\n\n            \nfirstTime\n \n=\n \nfalse\n;\n\n        \n}\n\n        \nif\n \n(\nthis\n.\ngameObject\n.\ntransform\n.\nposition\n.\nz\n \n \n50\n)\n \n{\n\n            \nthis\n.\ndestroy\n \n=\n \ntrue\n;\n\n            \nthis\n.\ncallback\n.\nactionDone\n \n(\nthis\n);\n\n        \n}\n\n        \nif\n \n(\nthis\n.\ngameObject\n.\nGetComponent\nArrowControl\n \n().\narrowController\n.\navailable\n \n==\n \nfalse\n)\n \n{\n\n            \nthis\n.\ndestroy\n \n=\n \ntrue\n;\n\n        \n}\n\n    \n}\n\n\n}\n\n\n\n\n\n\nPhysicsActionManager\n\n\n\u548c\u6211\u4e00\u5f00\u59cb\u8bf4\u7684\u4e00\u6837\uff0c\u6211\u7684PhysicsActionManager\u7ee7\u627f\u4e86SSActionManager\u7c7b,\u5e76\u5b9e\u73b0\u4e86ActionCallback\u63a5\u53e3\u4ee5\u5b8c\u6210\u4e8b\u4ef6\u7ed3\u675f\u7684\u5904\u7406\u3002\u8be5\u7c7b\u5b9e\u73b0\u633a\u7b80\u5355\uff0c\u8fd9\u91cc\u4e0d\u591aBB\n\n\npublic\n \nclass\n \nPhysicsActionManager\n \n:\n \nSSActionManager\n,\n \nActionCallback\n \n{\n\n    \npublic\n \nFirstController\n \nfirstController\n;\n\n\n    \npublic\n \nvoid\n \nStart\n \n()\n \n{\n\n        \nfirstController\n \n=\n \n(\nFirstController\n)\nGameDirector\n.\ngetInstance\n \n().\ncurrentSceneController\n;\n\n        \nfirstController\n.\nphysicsActionManager\n \n=\n \nthis\n;\n\n    \n}\n\n\n    \npublic\n \nvoid\n \nUpdate\n()\n \n{\n\n        \nbase\n.\nUpdate\n \n();\n\n    \n}\n\n\n    \npublic\n \nvoid\n \nactionDone\n \n(\nSSAction\n \nsource\n)\n \n{\n\n        \nif\n \n(((\nArrowFlyAction\n)\nsource\n).\ntype\n \n==\n \n1\n)\n \n{\n\n            \nfirstController\n.\narrowFactory\n.\nrecycle\n \n(((\nArrowFlyAction\n)\nsource\n).\ngameObject\n.\nGetComponent\nArrowControl\n \n().\narrowController\n);\n\n            \nfirstController\n.\nshootFinish\n \n=\n \ntrue\n;\n\n        \n}\n\n    \n}\n\n\n}\n\n\n\n\n\n\n\u5230\u8fd9\u91cc\uff0c\u57fa\u7840\u7684\u90e8\u5206\u5c31\u5dee\u4e0d\u591a\u4e86\uff0c\u8fd8\u5269\u4e0b\u8d1f\u8d23\u5177\u4f53\u529f\u80fd\u7684\u5404\u4e2a\u7c7b\u4e0e\u6211\u4eec\u7684\u573a\u666f\u63a7\u5236\u5668\u3002\n\n\nCheckCrack\n\n\n\u6211\u4eec\u5148\u6765\u770b\u770b\u6211\u7528\u4e8e\u68c0\u67e5\u7269\u4f53\u78b0\u649e\u4ee5\u63d0\u4f9b\u7ed9\u8ba1\u5206\u5668\uff0c\u5e76\u4e14\u4f7f\u5f97\u7bad\u4f53\u78b0\u5230\u9776\u5b50\u540e\u63d2\u5728\u9776\u4e0a(\u505c\u4f4f)\u7684\u7c7b\n\n\n\u8fd9\u91cc\u4e3b\u8981\u7528\u5230\u4e86OnTriggerEnter\u6765\u786e\u5b9a\u7bad\u4f53\u78b0\u5230\u9776\u5b50\u8fd9\u4e00\u4e8b\u4ef6\uff0c\u53ea\u8981\u6211\u4eec\u7684CheckCrack Add\u5230\u5404\u4e2a\u5206\u6570\u5bf9\u5e94\u7684GameObject\u4e2d\uff0c\u6211\u4eec\u7684\u9776\u5b50\u5c31\u80fd\u83b7\u53d6\u7bad\u5c04\u5230\u7684\u4f4d\u7f6e\uff0c\u4ea4\u7ed9\u8ba1\u5206\u5458\u8ba1\u5206\u3002\n\n\n\u5728\u8fd9\u91cc\uff0c\u53ef\u80fd\u56e0\u4e3a\u6211\u9776\u5b50\u5b9e\u73b0\u7684\u4e0d\u592a\u597d\uff0c\u6211\u7684\u7bad\u5728\u5c04\u4e2d\u9776\u5b50\u540e\uff0c\u63d2\u5165\u9776\u5b50\u91cc\u9762\uff0c\u4ece\u800c\u4e5f\u4f1a\u89e6\u53d1\u540e\u9762\u9776\u5b50\u7684\u89e6\u53d1\u5668\uff0c\u6240\u4ee5\u8fd9\u91cc\u53ef\u4ee5\u770b\u5230\uff0c\u6211\u7684ArrowController\u91cc\u52a0\u5165\u4e86\u4e00\u4e2aavailable\uff0c\u8fd9\u6837\u4fdd\u8bc1\u7bad\u4e00\u65e6\u63d2\u5165\u5c31\u4e0d\u518d\u5904\u7406\u5bf9\u5e94\u7684\u89e6\u53d1\u4e8b\u4ef6\u3002\n\n\npublic\n \nclass\n \nCheckCrack\n \n:\n \nMonoBehaviour\n \n{\n\n    \npublic\n \nFirstController\n \nfirstController\n;\n\n    \npublic\n \nScoreRecorder\n \nscoreRecorder\n;\n\n\n    \nvoid\n \nStart\n()\n \n{\n\n        \nfirstController\n \n=\n \n(\nFirstController\n)\nGameDirector\n.\ngetInstance\n \n().\ncurrentSceneController\n;\n\n        \nscoreRecorder\n \n=\n \nScoreRecorder\n.\ngetInstance\n \n();\n\n    \n}\n\n\n    \nvoid\n \nOnTriggerEnter\n(\nCollider\n \narrow\n)\n \n{\n\n        \nif\n \n(\narrow\n.\ngameObject\n.\nGetComponent\nArrowControl\n \n().\narrowController\n.\navailable\n \n==\n \ntrue\n)\n \n{\n\n            \narrow\n.\ngameObject\n.\nGetComponent\nRigidbody\n \n().\nvelocity\n \n=\n \nVector3\n.\nzero\n;\n\n            \narrow\n.\ngameObject\n.\nGetComponent\nRigidbody\n \n().\nisKinematic\n \n=\n \ntrue\n;\n\n            \narrow\n.\ngameObject\n.\nGetComponent\nArrowControl\n \n().\narrowController\n.\navailable\n \n=\n \nfalse\n;\n\n            \narrow\n.\ngameObject\n.\ntransform\n.\nGetComponent\nCollider\n \n().\nenabled\n \n=\n \nfalse\n;\n\n            \nfirstController\n.\nshootFinish\n \n=\n \ntrue\n;\n\n            \nfirstController\n.\nshowCamera\n.\nshowCamera\n \n();\n\n            \nscoreRecorder\n.\nrecord\n \n(\ngameObject\n);\n\n        \n}\n\n    \n}\n\n\n}\n\n\n\n\n\n\nScoreRecorder\n\n\n\u8ba1\u5206\u5458\u7684\u5b9e\u73b0\u548c\u4e0a\u6b21\u7c7b\u4f3c\uff0c\u4e0d\u8fc7\u8fd9\u4e00\u6b21\u662f\u6839\u636eGameObbject\u7684\u540d\u5b57\u6765\u52a0\u5206\n\n\npublic\n \nclass\n \nScoreRecorder\n \n{\n\n    \npublic\n \nint\n \nscore\n \n=\n \n0\n;\n\n\n    \nText\n \ngameInfo\n;\n\n\n    \nprivate\n \nstatic\n \nScoreRecorder\n \ninstance\n;\n\n    \npublic\n \nstatic\n \nScoreRecorder\n \ngetInstance\n()\n\n    \n{\n\n        \nif\n \n(\ninstance\n \n==\n \nnull\n)\n\n        \n{\n\n            \ninstance\n \n=\n \nnew\n \nScoreRecorder\n();\n\n        \n}\n\n        \nreturn\n \ninstance\n;\n\n    \n}\n\n\n    \nprivate\n \nScoreRecorder\n()\n \n{\n\n        \ngameInfo\n \n=\n \n(\nGameObject\n.\nInstantiate\n \n(\nResources\n.\nLoad\n \n(\nPrefabs/ScoreInfo\n))\n \nas\n \nGameObject\n).\ntransform\n.\nFind\n \n(\nText\n).\nGetComponent\nText\n \n();\n\n        \ngameInfo\n.\ntext\n \n=\n \n \n+\n \nscore\n;\n\n    \n}\n\n\n    \npublic\n \nvoid\n \nrecord\n(\nGameObject\n \nhitObj\n)\n \n{\n\n        \nswitch\n \n(\nhitObj\n.\nname\n)\n \n{\n\n            \ncase\n \n1\n:\n\n                \nscore\n \n+=\n \n1\n;\n\n                \nbreak\n;\n\n            \ncase\n \n2\n:\n\n                \nscore\n \n+=\n \n2\n;\n\n                \nbreak\n;\n\n            \ncase\n \n3\n:\n\n                \nscore\n \n+=\n \n3\n;\n\n                \nbreak\n;\n\n            \ncase\n \n4\n:\n\n                \nscore\n \n+=\n \n4\n;\n\n                \nbreak\n;\n\n            \ncase\n \n5\n:\n\n                \nscore\n \n+=\n \n5\n;\n\n                \nbreak\n;\n\n        \n}\n\n        \ngameInfo\n.\ntext\n \n=\n \n \n+\n \nscore\n;\n\n    \n}\n\n\n\n    \npublic\n \nint\n \ngetScore\n()\n \n{\n\n        \nreturn\n \nscore\n;\n\n    \n}\n\n\n    \npublic\n \nvoid\n \nreset\n()\n \n{\n\n        \nscore\n \n=\n \n0\n;\n\n        \ngameInfo\n.\ntext\n \n=\n \n \n+\n \nscore\n;\n\n    \n}\n\n\n}\n\n\n\n\n\n\nshowSubCamera\n\n\n\u8fd9\u91cc\u6211\u52a0\u4e86\u4e2a\u5b50\u6444\u50cf\u5934\u7684\u529f\u80fd\uff0c\u82e5\u73a9\u5bb6\u5c04\u4e2d\u9776\u5b50\uff0c\u6211\u4f1a\u6fc0\u6d3b\u8be5\u6444\u50cf\u5934\uff0c\u4f7f\u73a9\u5bb6\u6e05\u6670\u770b\u5230\u7bad\u5c04\u4e2d\u7684\u4f4d\u7f6e\n\n\npublic\n \nclass\n \nshowSubCamera\n \n:\n \nMonoBehaviour\n \n{\n\n    \nprivate\n \nfloat\n \ntime\n \n=\n \n0\n;\n\n    \nprivate\n \nbool\n \nshow\n \n=\n \nfalse\n;\n\n    \nGameObject\n \ncameraObj\n;\n\n\n    \n// Use this for initialization\n\n    \nvoid\n \nStart\n \n()\n \n{\n\n        \nshow\n \n=\n \nfalse\n;\n\n        \ncameraObj\n \n=\n \n(\nGameObject\n.\nInstantiate\n \n(\nResources\n.\nLoad\n \n(\nPrefabs/SubCamera\n))\n \nas\n \nGameObject\n);\n\n        \ncameraObj\n.\nSetActive\n \n(\nfalse\n);\n\n    \n}\n\n\n    \npublic\n \nvoid\n \nshowCamera\n()\n \n{\n\n        \ncameraObj\n.\nSetActive\n \n(\ntrue\n);\n\n        \nshow\n \n=\n \ntrue\n;\n\n        \ntime\n \n=\n \n1\n;\n\n    \n}\n\n\n    \n// Update is called once per frame\n\n    \nvoid\n \nUpdate\n \n()\n \n{\n\n        \nif\n \n(\nshow\n)\n \n{\n\n            \ntime\n \n-=\n \nTime\n.\ndeltaTime\n;\n\n            \nif\n \n(\ntime\n \n=\n \n0\n)\n \n{\n\n                \nshow\n \n=\n \nfalse\n;\n\n                \ncameraObj\n.\nSetActive\n \n(\nfalse\n);\n\n            \n}\n\n        \n}\n\n    \n}\n\n\n}\n\n\n\n\n\n\nWindMake\n\n\n\u6e38\u620f\u4e2d\u6211\u76f4\u63a5\u5b9e\u73b0\u4e86\u4e00\u4e2aWindMake\u7c7b\u6765\u7ba1\u7406\u98ce\u7684\u751f\u6210\uff0c\u6bcf240\u5e27\u6570\u66f4\u6362\u4e00\u4e2a\u98ce\u5411\uff0c\u5e76\u4e14\u628a\u5176\u5b9e\u65f6\u7684\u98ce\u5411\u663e\u793a\u5230\u6e38\u620f\u753b\u9762\u7684\u5de6\u4e0a\u89d2\n\n\npublic\n \nclass\n \nWindMake\n \n:\n \nMonoBehaviour\n \n{\n\n    \npublic\n \nVector3\n \nWind\n;\n\n    \nText\n \ngameInfo\n;\n\n    \nint\n \nfpsCount\n \n=\n \n0\n;\n\n\n    \nvoid\n \nAwake\n()\n \n{\n\n        \ngameInfo\n \n=\n \n(\nGameObject\n.\nInstantiate\n \n(\nResources\n.\nLoad\n \n(\nPrefabs/WindInfo\n))\n \nas\n \nGameObject\n).\ntransform\n.\nFind\n \n(\nText\n).\nGetComponent\nText\n \n();\n\n        \nmakeWind\n \n();\n\n        \nfpsCount\n \n=\n \n0\n;\n\n    \n}\n\n\n    \nvoid\n \nUpdate\n()\n \n{\n\n        \nfpsCount\n++;\n\n        \nif\n \n(\nfpsCount\n \n==\n \n240\n)\n \n{\n\n            \nWind\n \n=\n \nmakeWind\n \n();\n\n            \nfpsCount\n \n=\n \n0\n;\n\n        \n}\n// 240\u5e27\u6362\u4e00\u4e2a\u98ce\u5411\n\n    \n}\n\n\n    \npublic\n \nVector3\n \nmakeWind\n()\n \n{\n\n        \nfloat\n \ny\n \n=\n \nRandom\n.\nRange\n \n(-\n100\n,\n \n100\n);\n\n        \nfloat\n \nz\n \n=\n \nRandom\n.\nRange\n \n(-\n30\n,\n \n0\n);\n\n        \nfloat\n \nx\n \n=\n \nRandom\n.\nRange\n \n(-\n50\n,\n \n50\n);\n\n        \ngameInfo\n.\ntext\n \n=\n \n(\n \n+\n \nx\n \n+\n \n,\n \n+\n \ny\n \n+\n \n,\n \n+\n \nz\n \n+\n \n)\n;\n\n        \nreturn\n \nnew\n \nVector3\n \n(\nx\n,\n \ny\n,\n \nz\n);\n\n    \n}\n\n\n    \npublic\n \nVector3\n \ngetWind\n()\n \n{\n\n        \nreturn\n \nWind\n;\n\n    \n}\n\n\n}\n\n\n\n\n\n\n\u8bf4\u5230\u8fd9\u91cc\uff0c\u7a81\u7136\u770b\u5230\u8fd8\u6709\u6211\u4eec\u7684ArrowFactory\u6ca1\u6709\u8bb2\ud83c\udf1a\n\n\nArrowFactory\n\n\n\u5b9e\u73b0\u548c\u57fa\u672c\u7684Factory\u7c7b\u4f3c\uff0c\u6ca1\u6709\u4ec0\u4e48\u53ef\u8bb2\u7684, \u5c31\u662f\u52a0\u4e0a\u4e86\u5bf9\u4e8e\u521a\u4f53\u7684\u521d\u59cb\u5316\u7b49\u7684\u4e00\u4e9b\u5185\u5bb9\n\n\npublic\n \nclass\n \nArrowFactory\n \n:\n \nMonoBehaviour\n \n{\n\n    \nQueue\nArrowController\n \nwaitingQueue\n;\n\n    \nList\nArrowController\n \nrunningList\n;\n\n\n    \nprivate\n \nFirstController\n \nfirstController\n;\n\n\n\n    \nGameObject\n \nbasic\n;\n\n\n    \nprivate\n \nvoid\n \nAwake\n()\n \n{\n\n        \nwaitingQueue\n \n=\n \nnew\n \nQueue\nArrowController\n \n();\n\n        \nrunningList\n \n=\n \nnew\n \nList\nArrowController\n \n();\n\n\n        \nbasic\n \n=\n \nInstantiate\n \n(\nResources\n.\nLoad\n \n(\nPrefabs/Arrow\n,\n \ntypeof\n(\nGameObject\n))\n \nas\n \nGameObject\n);\n\n        \nbasic\n.\nSetActive\n \n(\nfalse\n);\n\n    \n}\n\n\n    \npublic\n \nArrowController\n \ngetArrow\n()\n \n{\n\n        \nArrowController\n \narrow\n;\n\n        \nif\n \n(\nwaitingQueue\n.\nCount\n \n==\n \n0\n)\n \n{\n\n            \nGameObject\n \nnewArrow\n \n=\n \nGameObject\n.\nInstantiate\n \n(\nbasic\n);\n\n            \narrow\n \n=\n \nnew\n \nArrowController\n \n(\nnewArrow\n);\n\n        \n}\n \nelse\n \n{\n\n            \narrow\n \n=\n \nwaitingQueue\n.\nDequeue\n \n();\n\n        \n}\n\n        \narrow\n.\ngetObject\n \n().\ntransform\n.\nparent\n \n=\n \n((\nFirstController\n)\nGameDirector\n.\ngetInstance\n \n().\ncurrentSceneController\n).\nBow\n.\ntransform\n;\n\n        \narrow\n.\ngetObject\n().\nGetComponent\nRigidbody\n \n().\nvelocity\n \n=\n \nVector3\n.\nzero\n;\n\n        \narrow\n.\ngetObject\n \n().\ntransform\n.\nlocalPosition\n \n=\n \nnew\n \nVector3\n \n(\n0\n,\n \n2\n,\n \n1\n);\n\n        \narrow\n.\ngetObject\n \n().\nGetComponent\nRigidbody\n \n().\nisKinematic\n \n=\n \ntrue\n;\n\n        \narrow\n.\ngetObject\n \n().\ntransform\n.\nGetComponent\nCollider\n \n().\nenabled\n \n=\n \ntrue\n;\n\n        \narrow\n.\nappear\n \n();\n\n        \nrunningList\n.\nAdd\n \n(\narrow\n);\n\n        \nreturn\n \narrow\n;\n\n    \n}\n\n\n    \npublic\n \nvoid\n \nrecycle\n(\nArrowController\n \narrow\n)\n \n{\n\n        \narrow\n.\ndisappear\n \n();\n\n        \narrow\n.\ngetObject\n \n().\ntransform\n.\nposition\n \n=\n \nnew\n \nVector3\n \n(\n0\n,\n \n0\n,\n \n-\n8\n);\n\n        \narrow\n.\ngetObject\n \n().\ntransform\n.\nGetComponent\nCollider\n \n().\nenabled\n \n=\n \nfalse\n;\n\n        \nrunningList\n.\nRemove\n \n(\narrow\n);\n\n        \nwaitingQueue\n.\nEnqueue\n \n(\narrow\n);\n\n    \n}\n\n\n    \npublic\n \nvoid\n \nrecycleAll\n()\n \n{\n\n        \nwhile\n \n(\nrunningList\n.\nCount\n \n!=\n \n0\n)\n\n        \n{\n\n            \nrecycle\n(\nrunningList\n[\n0\n]);\n\n        \n}\n\n    \n}\n\n\n}\n\n\n\n\n\n\nArrowController\n\n\n\u8fd9\u91cc\u4e3a\u4e86\u65b9\u4fbfArrow\u7684\u5b9e\u73b0\uff0c\u6211\u5728\u8fd9\u6b21\u4f5c\u4e1a\u4e2d\u4e5f\u4e00\u6837\u5b9e\u73b0\u4e86ArrowController\u7c7b\uff0c\u52a0\u5165\u4e86\u7bad\u4f53\u7684\u57fa\u672c\u72b6\u6001\u7684\u4fe1\u606f\uff0c\u5e76\u65b9\u4fbf\u4e86\u4e4b\u540e\u7684\u62d3\u5c55\u3002\n\n\npublic\n \nclass\n \nArrowController\n{\n\n    \nGameObject\n \narrow\n;\n\n    \nArrowControl\n \narrowControl\n;\n\n    \npublic\n \nbool\n \navailable\n \n=\n \nfalse\n;\n\n\n    \npublic\n \nArrowController\n \n(\nGameObject\n \ngameObject\n)\n \n{\n\n        \nthis\n.\narrow\n \n=\n \ngameObject\n;\n\n        \narrowControl\n \n=\n \ngameObject\n.\nAddComponent\nArrowControl\n \n();\n\n        \narrowControl\n.\narrowController\n \n=\n \nthis\n;\n\n    \n}\n\n\n    \npublic\n \nvoid\n \nappear\n()\n\n    \n{\n\n        \navailable\n \n=\n \ntrue\n;\n\n        \narrow\n.\nSetActive\n(\ntrue\n);\n\n    \n}\n\n\n    \npublic\n \nvoid\n \ndisappear\n()\n\n    \n{\n\n        \narrow\n.\nSetActive\n(\nfalse\n);\n\n    \n}\n\n\n    \npublic\n \nGameObject\n \ngetObject\n()\n \n{\n\n        \nreturn\n \narrow\n;\n\n    \n}\n\n\n}\n\n\n\n\n\n\nArrowControl\u7c7b\n\n\n\u8fd9\u4e2a\u7c7b\u4e3b\u8981\u662f\u7528\u4e8eGameObject\u83b7\u53d6\u5176\u5bf9\u5e94\u7684Controller\n\n\npublic\n \nclass\n \nArrowControl\n \n:\n \nMonoBehaviour\n \n{\n\n    \npublic\n \nArrowController\n \narrowController\n;\n\n\n}\n\n\n\n\n\n\nFirstController\u7c7b\n\n\n\u5199\u5b8c\u5404\u4e2a\u529f\u80fd\u7684\u7c7b\u540e\uff0c\u5c31\u5269\u4e0b\u6211\u4eec\u7684\u6e38\u620f\u573a\u666f\u63a7\u5236\u5668\u4e86,\u8fd9\u91cc\u57fa\u672c\u5c31\u662f\u5404\u4e2a\u7c7b\u7684\u6574\u5408\u4ee5\u53ca\u7528\u6237\u4ea4\u4e92\u7684\u5b9e\u73b0\uff0c\u5b9e\u73b0\u4e0d\u96be\u3002\n\n\npublic\n \nclass\n \nFirstController\n \n:\n \nMonoBehaviour\n,\n \nISceneController\n \n{\n\n    \npublic\n \nPhysicsActionManager\n \nphysicsActionManager\n;\n\n\n    \npublic\n \nGameDirector\n \ngameDirector\n;\n\n    \npublic\n \nGameObject\n \nBow\n;\n\n    \npublic\n \nArrowController\n \narrow\n;\n\n    \npublic\n \nScoreRecorder\n \nscoreRecorder\n;\n\n\n    \npublic\n \nArrowFactory\n \narrowFactory\n;\n\n    \npublic\n \nWindMake\n \nwindMake\n;\n\n    \npublic\n \nshowSubCamera\n \nshowCamera\n;\n\n\n    \nGUIStyle\n \ngameInfoStyle\n;\n\n    \npublic\n \nbool\n \nshootFinish\n \n=\n \ntrue\n;\n \n// whether arrow hit success\n\n\n    \nvoid\n \nAwake\n()\n \n{\n\n        \narrowFactory\n \n=\n \ngameObject\n.\nAddComponent\nArrowFactory\n \n();\n\n        \nwindMake\n \n=\n \ngameObject\n.\nAddComponent\nWindMake\n \n();\n\n        \nphysicsActionManager\n \n=\n \ngameObject\n.\nAddComponent\nPhysicsActionManager\n \n();\n\n        \nscoreRecorder\n \n=\n \nScoreRecorder\n.\ngetInstance\n \n();\n\n        \nshowCamera\n \n=\n \ngameObject\n.\nAddComponent\nshowSubCamera\n \n();\n\n\n        \ngameDirector\n \n=\n \nGameDirector\n.\ngetInstance\n \n();\n\n        \ngameDirector\n.\ncurrentSceneController\n \n=\n \nthis\n;\n\n    \n}\n\n\n    \n// Use this for initialization\n\n    \nvoid\n \nStart\n \n()\n \n{\n\n        \nloadResources\n \n();\n\n        \nCursor\n.\nlockState\n \n=\n \nCursorLockMode\n.\nLocked\n;\n\n        \nCursor\n.\nvisible\n \n=\n \nfalse\n;\n\n        \ngameInfoStyle\n \n=\n \nnew\n \nGUIStyle\n \n();\n\n        \ngameInfoStyle\n.\nfontSize\n \n=\n \n25\n;\n\n    \n}\n\n\n    \nvoid\n \nOnGUI\n()\n \n{\n\n        \nGUI\n.\nLabel\n \n(\nnew\n \nRect\n \n(\n20\n,\n \n80\n,\n \n200\n,\n \n50\n),\n \nPress space to restart!\n,\n \ngameInfoStyle\n);\n\n    \n}\n\n\n\n    \n// Update is called once per frame\n\n    \nvoid\n \nUpdate\n \n()\n \n{\n\n        \nfloat\n \noffsetX\n \n=\n \nInput\n.\nGetAxis\n \n(\nMouse X\n);\n\n        \nfloat\n \noffsetY\n \n=\n \nInput\n.\nGetAxis\n \n(\nMouse Y\n);\n\n        \nmoveBow\n \n(\noffsetX\n,\n \noffsetY\n);\n\n\n        \nif\n \n(\nInput\n.\nGetKeyDown\n(\nescape\n))\n \n{\n\n            \nCursor\n.\nvisible\n \n=\n \ntrue\n;\n\n            \nCursor\n.\nlockState\n \n=\n \nCursorLockMode\n.\nNone\n;\n\n        \n}\n\n\n        \nif\n \n(\nInput\n.\nGetButton\n \n(\nFire1\n))\n \n{\n\n            \nCursor\n.\nlockState\n \n=\n \nCursorLockMode\n.\nLocked\n;\n\n            \nCursor\n.\nvisible\n \n=\n \nfalse\n;\n\n            \nshootArrow\n \n();\n\n        \n}\n\n\n        \nif\n \n(\nInput\n.\nGetKeyDown\n \n(\nspace\n))\n \n{\n\n            \nreset\n \n();\n\n        \n}\n\n\n        \nif\n \n(\nshootFinish\n \n \narrow\n \n==\n \nnull\n)\n \n{\n\n            \narrow\n \n=\n \narrowFactory\n.\ngetArrow\n \n();\n\n        \n}\n\n\n    \n}\n\n\n    \npublic\n \nvoid\n \nmoveBow\n(\nfloat\n \noffsetX\n,\n \nfloat\n \noffsetY\n)\n \n{\n\n        \nfloat\n \nposy\n \n=\n \nMathf\n.\nClamp\n(\nBow\n.\ntransform\n.\nposition\n.\ny\n \n+\n \noffsetY\n,\n \n1\n,\n \n30\n);\n\n        \nBow\n.\ntransform\n.\nposition\n \n=\n \nnew\n \nVector3\n \n(\nBow\n.\ntransform\n.\nposition\n.\nx\n \n+\n \noffsetX\n,\n \nposy\n,\n \nBow\n.\ntransform\n.\nposition\n.\nz\n);\n\n    \n}\n\n\n    \npublic\n \nvoid\n \nshootArrow\n()\n \n{\n\n        \nif\n \n(\narrow\n \n!=\n \nnull\n)\n \n{\n\n            \nGameObject\n \narrowObj\n \n=\n \narrow\n.\ngetObject\n \n();\n\n            \narrowObj\n.\nGetComponent\nRigidbody\n \n().\nisKinematic\n \n=\n \nfalse\n;\n\n            \nVector3\n \ndir\n \n=\n \narrowObj\n.\ntransform\n.\nup\n \n*\n \n-\n1\n;\n\n            \nArrowFlyAction\n \narrowAction\n \n=\n \nArrowFlyAction\n.\nGetSSAction\n \n(\n1\n,\n \ndir\n \n*\n \n30\n);\n\n            \nArrowFlyAction\n \nwindAction\n \n=\n \nArrowFlyAction\n.\nGetSSAction\n \n(\n0\n,\n \nwindMake\n.\ngetWind\n());\n\n            \nphysicsActionManager\n.\naddAction\n \n(\narrowObj\n,\n \narrowAction\n,\n \nphysicsActionManager\n);\n\n            \nphysicsActionManager\n.\naddAction\n \n(\narrowObj\n,\n \nwindAction\n,\n \nphysicsActionManager\n);\n\n            \narrowObj\n.\ntransform\n.\nparent\n \n=\n \nnull\n;\n\n            \narrow\n \n=\n \nnull\n;\n\n            \nshootFinish\n \n=\n \nfalse\n;\n\n        \n}\n\n    \n}\n\n\n    \npublic\n \nvoid\n \nloadResources\n()\n \n{\n\n        \nInstantiate\n(\nResources\n.\nLoad\n(\nPrefabs/Land\n));\n\n        \nInstantiate\n(\nResources\n.\nLoad\n(\nPrefabs/Target\n));\n\n        \nBow\n \n=\n \nInstantiate\n(\nResources\n.\nLoad\n(\nPrefabs/Bow\n))\n \nas\n \nGameObject\n;\n  \n        \narrow\n \n=\n \narrowFactory\n.\ngetArrow\n \n();\n\n    \n}\n\n\n    \nvoid\n \nreset\n()\n \n{\n\n        \narrow\n \n=\n \nnull\n;\n\n        \nshootFinish\n \n=\n \ntrue\n;\n\n        \nscoreRecorder\n.\nreset\n \n();\n\n        \narrowFactory\n.\nrecycleAll\n \n();\n\n    \n}\n\n\n}\n\n\n\n\n\n\n\n\n\u5230\u8fd9\u91cc\u8fd9\u5468\u7684\u4f5c\u4e1a\u5c31\u5b8c\u6210\u4e86\uff0c\u96be\u5ea6\u4e0d\u7b97\u592a\u5927\uff0c\u5728\u5b66\u4e60\u4e86\u7269\u7406\u5f15\u64ce\u7684\u4f7f\u7528\u540e\uff0c\u6211\u4eecAction\u7684\u4f7f\u7528\u66f4\u52a0\u7b80\u5355\uff0c\u53ea\u9700\u8981\u52a0\u4e0a\u5bf9\u5e94\u7684\u529b\u5c31\u53ef\u4ee5\u4e86\uff0c\u5e76\u4e0d\u9700\u8981\u4e00\u4e9b\u590d\u6742\u7684\u8bed\u53e5\uff0c\u800c\u4e14\u6709\u4e86\u4e4b\u524d\u51e0\u5468\u5b8c\u6210\u7684\u57fa\u7840\u7684\u6e38\u620f\u67b6\u6784\uff0c\u6211\u4eec\u57fa\u672c\u5c31\u662f\u5b8c\u6210\u8d1f\u8d23\u6e38\u620f\u5bf9\u8c61\u7684\u521b\u5efa\u529f\u80fd\u7684\u7c7b\uff0c\u5b8c\u6210\u5bf9\u8c61\u57fa\u672c\u52a8\u4f5c\u7684\u7c7b\uff0c\u4ee5\u53ca\u6e38\u620f\u573a\u666f\u4e2d\u5bf9\u5e94\u529f\u80fd\u89e3\u8026\u51fa\u6765\u7684\u7c7b\u3002\u53ea\u8981\u6709\u4e86\u8fd9\u4e9b\u57fa\u672c\u7684\u610f\u8bc6\u540e\uff0c\u6211\u4eec\u5bf9\u4e8e\u5199\u6e38\u620f\u7684\u4e0a\u624b\u8fd8\u662f\u5f88\u5feb\u7684\u3002", 
            "title": "\u5b66\u4e60\u7b14\u8bb09-\u5c04\u7bad\u5c0f\u6e38\u620f"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb09-\u5c04\u7bad\u5c0f\u6e38\u620f/#homework5-", 
            "text": "", 
            "title": "Homework5-\u5c04\u7bad\u5c0f\u6e38\u620f"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb09-\u5c04\u7bad\u5c0f\u6e38\u620f/#_1", 
            "text": "\u9776\u5bf9\u8c61\u4e3a 5 \u73af\uff0c\u6309\u73af\u8ba1\u5206\uff1b  \u7bad\u5bf9\u8c61\uff0c\u5c04\u4e2d\u540e\u8981\u63d2\u5728\u9776\u4e0a  \u589e\u5f3a\u8981\u6c42\uff1a\u5c04\u4e2d\u540e\uff0c\u7bad\u5bf9\u8c61\u4ea7\u751f\u98a4\u6296\u6548\u679c\uff0c\u5230\u4e0b\u4e00\u6b21\u5c04\u51fb \u6216 1\u79d2\u4ee5\u540e\uff08\u672a\u5b9e\u73b0\uff09  \u6e38\u620f\u4ec5\u4e00\u8f6e\uff0c\u65e0\u9650 trials\uff1b  \u589e\u5f3a\u8981\u6c42\uff1a\u6dfb\u52a0\u4e00\u4e2a\u98ce\u5411\u548c\u5f3a\u5ea6\u6807\u5fd7\uff0c\u63d0\u9ad8\u96be\u5ea6", 
            "title": "\u6e38\u620f\u8981\u6c42"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb09-\u5c04\u7bad\u5c0f\u6e38\u620f/#_2", 
            "text": "\u89c6\u9891\u6f14\u793a\u7f51\u7ad9\u4e3a ArrowGame  \u4e0b\u9762\u662f\u6e38\u620f\u7684\u622a\u56fe", 
            "title": "\u5b9e\u73b0\u6548\u679c"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb09-\u5c04\u7bad\u5c0f\u6e38\u620f/#uml", 
            "text": "", 
            "title": "UML\u56fe"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb09-\u5c04\u7bad\u5c0f\u6e38\u620f/#_3", 
            "text": "\u505a\u4e86\u8fd9\u51e0\u6b21\u7684\u4f5c\u4e1a\u4ee5\u540e\uff0c\u6211\u53d1\u73b0\u57fa\u672c\u67b6\u6784\u7684\u4ee3\u7801\u90fd\u51e0\u4e4e\u53ef\u4ee5\u590d\u7528\uff0c\u6240\u4ee5\u6211\u76f4\u63a5\u628a\u4e00\u4e9b\u57fa\u672c\u7684\u6bcf\u6b21\u7528\u5230\u7684\u4ee3\u7801\u5f04\u4e86\u4e00\u4e2aBasicCode\u6587\u4ef6\u5939\uff0cActionManager\u4e5f\u6446\u653e\u5728\u5185\uff0c\u7f16\u5199\u6e38\u620f\u7684\u65f6\u5019\uff0c\u5728\u5176\u57fa\u7840\u4e0a\u589e\u52a0\u5c31\u597d\u4e86\u3002  \u6839\u636e\u6211\u4eec\u753b\u51fa\u7684UML\u56fe\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u6211\u4eec\u8fd9\u6b21\u9700\u8981\u5b8c\u6210\u7684\u7c7b\u4e0d\u7b97\u591a, \u57fa\u7840\u7684\u4ee3\u7801\u90fd\u6709\uff0c\u4e0d\u4e0d\u4e0d\u8fc7\u8fd9\u6b21\u4f5c\u4e1a\u4e2d\u7684PhysicsActionManager\uff0c\u6211\u7ecf\u8fc7\u4e0a\u4e00\u6b21\u4f5c\u4e1a\u7684\u7f16\u8f91\uff0c\u7ecf\u8fc7\u601d\u8003\uff0c\u89c9\u5f97\u5176\u5e94\u8be5\u7ee7\u627f\u6211\u4eec\u7684SSActionManager\uff0c\u8fd9\u6837\u4e0d\u4ec5\u53ef\u4ee5\u8ba9\u6211\u4eec\u51cf\u5c11\u4e86\u4e00\u4e2a\u63a5\u53e3\u7c7b\u7684\u4e66\u5199\uff0c\u8fd8\u628a\u5176\u6574\u5408\u5230\u6574\u4e2aActionManager\u7684\u7cfb\u7edf\u4e2d\uff0c\u62e5\u6709ActionCallback\u7b49\u7684\u529f\u80fd\uff0c\u52a8\u4f5c\u7684\u5b8c\u6210\u7684\u5224\u65ad\u53ef\u4ee5\u76f4\u63a5\u5728\u81ea\u8eab\u7684Update\u91cc\u5b8c\u6210\uff0c\u6bd4\u8d77\u4e0a\u4e00\u6b21\u4f5c\u4e1a\u4f18\u5316\u4e86\u633a\u591a\u3002  \u73b0\u5728\u6211\u4eec\u5206\u7c7b\u8bf4\u8bf4", 
            "title": "\u6e38\u620f\u5b9e\u73b0"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb09-\u5c04\u7bad\u5c0f\u6e38\u620f/#arrowflyaction", 
            "text": "\u8fd9\u6b21\u4f5c\u4e1a\u6700\u57fa\u672c\u7684\u80af\u5b9a\u5c31\u662f\u6211\u4eec\u7bad\u7684\u52a8\u4f5c\u4e86\uff0c\u8fd9\u91cc\u6211\u4e0d\u4ec5\u5305\u542b\u4e86\u5c04\u7bad\u51fa\u53bb\u7684\u52a8\u4f5c\uff0c\u8fd8\u5305\u542b\u4e86\u98ce\u5411\u5bf9\u4e8e\u7bad\u4ea7\u751f\u7684\u52a8\u4f5c\uff0c\u81f3\u4e8e\u4e3a\u4ec0\u4e48\u6211\u4f1a\u628a\u98ce\u529b\u5bf9\u7bad\u7684\u5f71\u54cd\u5b9e\u4f53\u5316\u6210\u52a8\u4f5c\u5728\u6e38\u620f\u4e2d\u5462\uff0c\u56e0\u4e3a\u901a\u8fc7\u4f7f\u7528ActionManager\u53bb\u7ba1\u7406\u98ce\u529b\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u573a\u666f\u63a7\u5236\u5668\u4e2d\u51cf\u5c11\u76f8\u5e94\u7684\u4ee3\u7801\u3002  ArrowFlyAction\u5b9e\u73b0\u5982\u4e0b  public   class   ArrowFlyAction   :   SSAction   { \n     public   int   type ;   // 0: windAction, 1: shootAction \n     public   Vector3   speed ; \n     bool   firstTime   =   false ; \n\n     private   ArrowFlyAction ()   {} \n\n     public   static   ArrowFlyAction   GetSSAction ( int   type ,   Vector3   speed )   { \n         ArrowFlyAction   arrowFlyAction   =   ScriptableObject . CreateInstance ArrowFlyAction   (); \n         arrowFlyAction . speed   =   speed ; \n         arrowFlyAction . firstTime   =   true ; \n         arrowFlyAction . type   =   type ; \n         return   arrowFlyAction ; \n     } \n\n     public   override   void   Start ()   {} \n\n     public   override   void   Update ()   { \n         if   ( firstTime )   { \n             if   ( type   ==   0 )   { \n                 // wind \n                 this . gameObject . GetComponent Rigidbody   (). AddForce   ( speed ,   ForceMode . Force ); \n             }   else   { \n                 // shoot \n                 this . gameObject . GetComponent Rigidbody   (). AddForce   ( speed ,   ForceMode . VelocityChange ); \n             } \n             firstTime   =   false ; \n         } \n         if   ( this . gameObject . transform . position . z     50 )   { \n             this . destroy   =   true ; \n             this . callback . actionDone   ( this ); \n         } \n         if   ( this . gameObject . GetComponent ArrowControl   (). arrowController . available   ==   false )   { \n             this . destroy   =   true ; \n         } \n     }  }", 
            "title": "ArrowFlyAction"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb09-\u5c04\u7bad\u5c0f\u6e38\u620f/#physicsactionmanager", 
            "text": "\u548c\u6211\u4e00\u5f00\u59cb\u8bf4\u7684\u4e00\u6837\uff0c\u6211\u7684PhysicsActionManager\u7ee7\u627f\u4e86SSActionManager\u7c7b,\u5e76\u5b9e\u73b0\u4e86ActionCallback\u63a5\u53e3\u4ee5\u5b8c\u6210\u4e8b\u4ef6\u7ed3\u675f\u7684\u5904\u7406\u3002\u8be5\u7c7b\u5b9e\u73b0\u633a\u7b80\u5355\uff0c\u8fd9\u91cc\u4e0d\u591aBB  public   class   PhysicsActionManager   :   SSActionManager ,   ActionCallback   { \n     public   FirstController   firstController ; \n\n     public   void   Start   ()   { \n         firstController   =   ( FirstController ) GameDirector . getInstance   (). currentSceneController ; \n         firstController . physicsActionManager   =   this ; \n     } \n\n     public   void   Update ()   { \n         base . Update   (); \n     } \n\n     public   void   actionDone   ( SSAction   source )   { \n         if   ((( ArrowFlyAction ) source ). type   ==   1 )   { \n             firstController . arrowFactory . recycle   ((( ArrowFlyAction ) source ). gameObject . GetComponent ArrowControl   (). arrowController ); \n             firstController . shootFinish   =   true ; \n         } \n     }  }   \u5230\u8fd9\u91cc\uff0c\u57fa\u7840\u7684\u90e8\u5206\u5c31\u5dee\u4e0d\u591a\u4e86\uff0c\u8fd8\u5269\u4e0b\u8d1f\u8d23\u5177\u4f53\u529f\u80fd\u7684\u5404\u4e2a\u7c7b\u4e0e\u6211\u4eec\u7684\u573a\u666f\u63a7\u5236\u5668\u3002", 
            "title": "PhysicsActionManager"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb09-\u5c04\u7bad\u5c0f\u6e38\u620f/#checkcrack", 
            "text": "\u6211\u4eec\u5148\u6765\u770b\u770b\u6211\u7528\u4e8e\u68c0\u67e5\u7269\u4f53\u78b0\u649e\u4ee5\u63d0\u4f9b\u7ed9\u8ba1\u5206\u5668\uff0c\u5e76\u4e14\u4f7f\u5f97\u7bad\u4f53\u78b0\u5230\u9776\u5b50\u540e\u63d2\u5728\u9776\u4e0a(\u505c\u4f4f)\u7684\u7c7b  \u8fd9\u91cc\u4e3b\u8981\u7528\u5230\u4e86OnTriggerEnter\u6765\u786e\u5b9a\u7bad\u4f53\u78b0\u5230\u9776\u5b50\u8fd9\u4e00\u4e8b\u4ef6\uff0c\u53ea\u8981\u6211\u4eec\u7684CheckCrack Add\u5230\u5404\u4e2a\u5206\u6570\u5bf9\u5e94\u7684GameObject\u4e2d\uff0c\u6211\u4eec\u7684\u9776\u5b50\u5c31\u80fd\u83b7\u53d6\u7bad\u5c04\u5230\u7684\u4f4d\u7f6e\uff0c\u4ea4\u7ed9\u8ba1\u5206\u5458\u8ba1\u5206\u3002  \u5728\u8fd9\u91cc\uff0c\u53ef\u80fd\u56e0\u4e3a\u6211\u9776\u5b50\u5b9e\u73b0\u7684\u4e0d\u592a\u597d\uff0c\u6211\u7684\u7bad\u5728\u5c04\u4e2d\u9776\u5b50\u540e\uff0c\u63d2\u5165\u9776\u5b50\u91cc\u9762\uff0c\u4ece\u800c\u4e5f\u4f1a\u89e6\u53d1\u540e\u9762\u9776\u5b50\u7684\u89e6\u53d1\u5668\uff0c\u6240\u4ee5\u8fd9\u91cc\u53ef\u4ee5\u770b\u5230\uff0c\u6211\u7684ArrowController\u91cc\u52a0\u5165\u4e86\u4e00\u4e2aavailable\uff0c\u8fd9\u6837\u4fdd\u8bc1\u7bad\u4e00\u65e6\u63d2\u5165\u5c31\u4e0d\u518d\u5904\u7406\u5bf9\u5e94\u7684\u89e6\u53d1\u4e8b\u4ef6\u3002  public   class   CheckCrack   :   MonoBehaviour   { \n     public   FirstController   firstController ; \n     public   ScoreRecorder   scoreRecorder ; \n\n     void   Start ()   { \n         firstController   =   ( FirstController ) GameDirector . getInstance   (). currentSceneController ; \n         scoreRecorder   =   ScoreRecorder . getInstance   (); \n     } \n\n     void   OnTriggerEnter ( Collider   arrow )   { \n         if   ( arrow . gameObject . GetComponent ArrowControl   (). arrowController . available   ==   true )   { \n             arrow . gameObject . GetComponent Rigidbody   (). velocity   =   Vector3 . zero ; \n             arrow . gameObject . GetComponent Rigidbody   (). isKinematic   =   true ; \n             arrow . gameObject . GetComponent ArrowControl   (). arrowController . available   =   false ; \n             arrow . gameObject . transform . GetComponent Collider   (). enabled   =   false ; \n             firstController . shootFinish   =   true ; \n             firstController . showCamera . showCamera   (); \n             scoreRecorder . record   ( gameObject ); \n         } \n     }  }", 
            "title": "CheckCrack"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb09-\u5c04\u7bad\u5c0f\u6e38\u620f/#scorerecorder", 
            "text": "\u8ba1\u5206\u5458\u7684\u5b9e\u73b0\u548c\u4e0a\u6b21\u7c7b\u4f3c\uff0c\u4e0d\u8fc7\u8fd9\u4e00\u6b21\u662f\u6839\u636eGameObbject\u7684\u540d\u5b57\u6765\u52a0\u5206  public   class   ScoreRecorder   { \n     public   int   score   =   0 ; \n\n     Text   gameInfo ; \n\n     private   static   ScoreRecorder   instance ; \n     public   static   ScoreRecorder   getInstance () \n     { \n         if   ( instance   ==   null ) \n         { \n             instance   =   new   ScoreRecorder (); \n         } \n         return   instance ; \n     } \n\n     private   ScoreRecorder ()   { \n         gameInfo   =   ( GameObject . Instantiate   ( Resources . Load   ( Prefabs/ScoreInfo ))   as   GameObject ). transform . Find   ( Text ). GetComponent Text   (); \n         gameInfo . text   =     +   score ; \n     } \n\n     public   void   record ( GameObject   hitObj )   { \n         switch   ( hitObj . name )   { \n             case   1 : \n                 score   +=   1 ; \n                 break ; \n             case   2 : \n                 score   +=   2 ; \n                 break ; \n             case   3 : \n                 score   +=   3 ; \n                 break ; \n             case   4 : \n                 score   +=   4 ; \n                 break ; \n             case   5 : \n                 score   +=   5 ; \n                 break ; \n         } \n         gameInfo . text   =     +   score ; \n     } \n\n\n     public   int   getScore ()   { \n         return   score ; \n     } \n\n     public   void   reset ()   { \n         score   =   0 ; \n         gameInfo . text   =     +   score ; \n     }  }", 
            "title": "ScoreRecorder"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb09-\u5c04\u7bad\u5c0f\u6e38\u620f/#showsubcamera", 
            "text": "\u8fd9\u91cc\u6211\u52a0\u4e86\u4e2a\u5b50\u6444\u50cf\u5934\u7684\u529f\u80fd\uff0c\u82e5\u73a9\u5bb6\u5c04\u4e2d\u9776\u5b50\uff0c\u6211\u4f1a\u6fc0\u6d3b\u8be5\u6444\u50cf\u5934\uff0c\u4f7f\u73a9\u5bb6\u6e05\u6670\u770b\u5230\u7bad\u5c04\u4e2d\u7684\u4f4d\u7f6e  public   class   showSubCamera   :   MonoBehaviour   { \n     private   float   time   =   0 ; \n     private   bool   show   =   false ; \n     GameObject   cameraObj ; \n\n     // Use this for initialization \n     void   Start   ()   { \n         show   =   false ; \n         cameraObj   =   ( GameObject . Instantiate   ( Resources . Load   ( Prefabs/SubCamera ))   as   GameObject ); \n         cameraObj . SetActive   ( false ); \n     } \n\n     public   void   showCamera ()   { \n         cameraObj . SetActive   ( true ); \n         show   =   true ; \n         time   =   1 ; \n     } \n\n     // Update is called once per frame \n     void   Update   ()   { \n         if   ( show )   { \n             time   -=   Time . deltaTime ; \n             if   ( time   =   0 )   { \n                 show   =   false ; \n                 cameraObj . SetActive   ( false ); \n             } \n         } \n     }  }", 
            "title": "showSubCamera"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb09-\u5c04\u7bad\u5c0f\u6e38\u620f/#windmake", 
            "text": "\u6e38\u620f\u4e2d\u6211\u76f4\u63a5\u5b9e\u73b0\u4e86\u4e00\u4e2aWindMake\u7c7b\u6765\u7ba1\u7406\u98ce\u7684\u751f\u6210\uff0c\u6bcf240\u5e27\u6570\u66f4\u6362\u4e00\u4e2a\u98ce\u5411\uff0c\u5e76\u4e14\u628a\u5176\u5b9e\u65f6\u7684\u98ce\u5411\u663e\u793a\u5230\u6e38\u620f\u753b\u9762\u7684\u5de6\u4e0a\u89d2  public   class   WindMake   :   MonoBehaviour   { \n     public   Vector3   Wind ; \n     Text   gameInfo ; \n     int   fpsCount   =   0 ; \n\n     void   Awake ()   { \n         gameInfo   =   ( GameObject . Instantiate   ( Resources . Load   ( Prefabs/WindInfo ))   as   GameObject ). transform . Find   ( Text ). GetComponent Text   (); \n         makeWind   (); \n         fpsCount   =   0 ; \n     } \n\n     void   Update ()   { \n         fpsCount ++; \n         if   ( fpsCount   ==   240 )   { \n             Wind   =   makeWind   (); \n             fpsCount   =   0 ; \n         } // 240\u5e27\u6362\u4e00\u4e2a\u98ce\u5411 \n     } \n\n     public   Vector3   makeWind ()   { \n         float   y   =   Random . Range   (- 100 ,   100 ); \n         float   z   =   Random . Range   (- 30 ,   0 ); \n         float   x   =   Random . Range   (- 50 ,   50 ); \n         gameInfo . text   =   (   +   x   +   ,   +   y   +   ,   +   z   +   ) ; \n         return   new   Vector3   ( x ,   y ,   z ); \n     } \n\n     public   Vector3   getWind ()   { \n         return   Wind ; \n     }  }   \u8bf4\u5230\u8fd9\u91cc\uff0c\u7a81\u7136\u770b\u5230\u8fd8\u6709\u6211\u4eec\u7684ArrowFactory\u6ca1\u6709\u8bb2\ud83c\udf1a", 
            "title": "WindMake"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb09-\u5c04\u7bad\u5c0f\u6e38\u620f/#arrowfactory", 
            "text": "\u5b9e\u73b0\u548c\u57fa\u672c\u7684Factory\u7c7b\u4f3c\uff0c\u6ca1\u6709\u4ec0\u4e48\u53ef\u8bb2\u7684, \u5c31\u662f\u52a0\u4e0a\u4e86\u5bf9\u4e8e\u521a\u4f53\u7684\u521d\u59cb\u5316\u7b49\u7684\u4e00\u4e9b\u5185\u5bb9  public   class   ArrowFactory   :   MonoBehaviour   { \n     Queue ArrowController   waitingQueue ; \n     List ArrowController   runningList ; \n\n     private   FirstController   firstController ; \n\n\n     GameObject   basic ; \n\n     private   void   Awake ()   { \n         waitingQueue   =   new   Queue ArrowController   (); \n         runningList   =   new   List ArrowController   (); \n\n         basic   =   Instantiate   ( Resources . Load   ( Prefabs/Arrow ,   typeof ( GameObject ))   as   GameObject ); \n         basic . SetActive   ( false ); \n     } \n\n     public   ArrowController   getArrow ()   { \n         ArrowController   arrow ; \n         if   ( waitingQueue . Count   ==   0 )   { \n             GameObject   newArrow   =   GameObject . Instantiate   ( basic ); \n             arrow   =   new   ArrowController   ( newArrow ); \n         }   else   { \n             arrow   =   waitingQueue . Dequeue   (); \n         } \n         arrow . getObject   (). transform . parent   =   (( FirstController ) GameDirector . getInstance   (). currentSceneController ). Bow . transform ; \n         arrow . getObject (). GetComponent Rigidbody   (). velocity   =   Vector3 . zero ; \n         arrow . getObject   (). transform . localPosition   =   new   Vector3   ( 0 ,   2 ,   1 ); \n         arrow . getObject   (). GetComponent Rigidbody   (). isKinematic   =   true ; \n         arrow . getObject   (). transform . GetComponent Collider   (). enabled   =   true ; \n         arrow . appear   (); \n         runningList . Add   ( arrow ); \n         return   arrow ; \n     } \n\n     public   void   recycle ( ArrowController   arrow )   { \n         arrow . disappear   (); \n         arrow . getObject   (). transform . position   =   new   Vector3   ( 0 ,   0 ,   - 8 ); \n         arrow . getObject   (). transform . GetComponent Collider   (). enabled   =   false ; \n         runningList . Remove   ( arrow ); \n         waitingQueue . Enqueue   ( arrow ); \n     } \n\n     public   void   recycleAll ()   { \n         while   ( runningList . Count   !=   0 ) \n         { \n             recycle ( runningList [ 0 ]); \n         } \n     }  }", 
            "title": "ArrowFactory"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb09-\u5c04\u7bad\u5c0f\u6e38\u620f/#arrowcontroller", 
            "text": "\u8fd9\u91cc\u4e3a\u4e86\u65b9\u4fbfArrow\u7684\u5b9e\u73b0\uff0c\u6211\u5728\u8fd9\u6b21\u4f5c\u4e1a\u4e2d\u4e5f\u4e00\u6837\u5b9e\u73b0\u4e86ArrowController\u7c7b\uff0c\u52a0\u5165\u4e86\u7bad\u4f53\u7684\u57fa\u672c\u72b6\u6001\u7684\u4fe1\u606f\uff0c\u5e76\u65b9\u4fbf\u4e86\u4e4b\u540e\u7684\u62d3\u5c55\u3002  public   class   ArrowController { \n     GameObject   arrow ; \n     ArrowControl   arrowControl ; \n     public   bool   available   =   false ; \n\n     public   ArrowController   ( GameObject   gameObject )   { \n         this . arrow   =   gameObject ; \n         arrowControl   =   gameObject . AddComponent ArrowControl   (); \n         arrowControl . arrowController   =   this ; \n     } \n\n     public   void   appear () \n     { \n         available   =   true ; \n         arrow . SetActive ( true ); \n     } \n\n     public   void   disappear () \n     { \n         arrow . SetActive ( false ); \n     } \n\n     public   GameObject   getObject ()   { \n         return   arrow ; \n     }  }", 
            "title": "ArrowController"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb09-\u5c04\u7bad\u5c0f\u6e38\u620f/#arrowcontrol", 
            "text": "\u8fd9\u4e2a\u7c7b\u4e3b\u8981\u662f\u7528\u4e8eGameObject\u83b7\u53d6\u5176\u5bf9\u5e94\u7684Controller  public   class   ArrowControl   :   MonoBehaviour   { \n     public   ArrowController   arrowController ;  }", 
            "title": "ArrowControl\u7c7b"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb09-\u5c04\u7bad\u5c0f\u6e38\u620f/#firstcontroller", 
            "text": "\u5199\u5b8c\u5404\u4e2a\u529f\u80fd\u7684\u7c7b\u540e\uff0c\u5c31\u5269\u4e0b\u6211\u4eec\u7684\u6e38\u620f\u573a\u666f\u63a7\u5236\u5668\u4e86,\u8fd9\u91cc\u57fa\u672c\u5c31\u662f\u5404\u4e2a\u7c7b\u7684\u6574\u5408\u4ee5\u53ca\u7528\u6237\u4ea4\u4e92\u7684\u5b9e\u73b0\uff0c\u5b9e\u73b0\u4e0d\u96be\u3002  public   class   FirstController   :   MonoBehaviour ,   ISceneController   { \n     public   PhysicsActionManager   physicsActionManager ; \n\n     public   GameDirector   gameDirector ; \n     public   GameObject   Bow ; \n     public   ArrowController   arrow ; \n     public   ScoreRecorder   scoreRecorder ; \n\n     public   ArrowFactory   arrowFactory ; \n     public   WindMake   windMake ; \n     public   showSubCamera   showCamera ; \n\n     GUIStyle   gameInfoStyle ; \n     public   bool   shootFinish   =   true ;   // whether arrow hit success \n\n     void   Awake ()   { \n         arrowFactory   =   gameObject . AddComponent ArrowFactory   (); \n         windMake   =   gameObject . AddComponent WindMake   (); \n         physicsActionManager   =   gameObject . AddComponent PhysicsActionManager   (); \n         scoreRecorder   =   ScoreRecorder . getInstance   (); \n         showCamera   =   gameObject . AddComponent showSubCamera   (); \n\n         gameDirector   =   GameDirector . getInstance   (); \n         gameDirector . currentSceneController   =   this ; \n     } \n\n     // Use this for initialization \n     void   Start   ()   { \n         loadResources   (); \n         Cursor . lockState   =   CursorLockMode . Locked ; \n         Cursor . visible   =   false ; \n         gameInfoStyle   =   new   GUIStyle   (); \n         gameInfoStyle . fontSize   =   25 ; \n     } \n\n     void   OnGUI ()   { \n         GUI . Label   ( new   Rect   ( 20 ,   80 ,   200 ,   50 ),   Press space to restart! ,   gameInfoStyle ); \n     } \n\n\n     // Update is called once per frame \n     void   Update   ()   { \n         float   offsetX   =   Input . GetAxis   ( Mouse X ); \n         float   offsetY   =   Input . GetAxis   ( Mouse Y ); \n         moveBow   ( offsetX ,   offsetY ); \n\n         if   ( Input . GetKeyDown ( escape ))   { \n             Cursor . visible   =   true ; \n             Cursor . lockState   =   CursorLockMode . None ; \n         } \n\n         if   ( Input . GetButton   ( Fire1 ))   { \n             Cursor . lockState   =   CursorLockMode . Locked ; \n             Cursor . visible   =   false ; \n             shootArrow   (); \n         } \n\n         if   ( Input . GetKeyDown   ( space ))   { \n             reset   (); \n         } \n\n         if   ( shootFinish     arrow   ==   null )   { \n             arrow   =   arrowFactory . getArrow   (); \n         } \n\n     } \n\n     public   void   moveBow ( float   offsetX ,   float   offsetY )   { \n         float   posy   =   Mathf . Clamp ( Bow . transform . position . y   +   offsetY ,   1 ,   30 ); \n         Bow . transform . position   =   new   Vector3   ( Bow . transform . position . x   +   offsetX ,   posy ,   Bow . transform . position . z ); \n     } \n\n     public   void   shootArrow ()   { \n         if   ( arrow   !=   null )   { \n             GameObject   arrowObj   =   arrow . getObject   (); \n             arrowObj . GetComponent Rigidbody   (). isKinematic   =   false ; \n             Vector3   dir   =   arrowObj . transform . up   *   - 1 ; \n             ArrowFlyAction   arrowAction   =   ArrowFlyAction . GetSSAction   ( 1 ,   dir   *   30 ); \n             ArrowFlyAction   windAction   =   ArrowFlyAction . GetSSAction   ( 0 ,   windMake . getWind ()); \n             physicsActionManager . addAction   ( arrowObj ,   arrowAction ,   physicsActionManager ); \n             physicsActionManager . addAction   ( arrowObj ,   windAction ,   physicsActionManager ); \n             arrowObj . transform . parent   =   null ; \n             arrow   =   null ; \n             shootFinish   =   false ; \n         } \n     } \n\n     public   void   loadResources ()   { \n         Instantiate ( Resources . Load ( Prefabs/Land )); \n         Instantiate ( Resources . Load ( Prefabs/Target )); \n         Bow   =   Instantiate ( Resources . Load ( Prefabs/Bow ))   as   GameObject ;   \n         arrow   =   arrowFactory . getArrow   (); \n     } \n\n     void   reset ()   { \n         arrow   =   null ; \n         shootFinish   =   true ; \n         scoreRecorder . reset   (); \n         arrowFactory . recycleAll   (); \n     }  }    \u5230\u8fd9\u91cc\u8fd9\u5468\u7684\u4f5c\u4e1a\u5c31\u5b8c\u6210\u4e86\uff0c\u96be\u5ea6\u4e0d\u7b97\u592a\u5927\uff0c\u5728\u5b66\u4e60\u4e86\u7269\u7406\u5f15\u64ce\u7684\u4f7f\u7528\u540e\uff0c\u6211\u4eecAction\u7684\u4f7f\u7528\u66f4\u52a0\u7b80\u5355\uff0c\u53ea\u9700\u8981\u52a0\u4e0a\u5bf9\u5e94\u7684\u529b\u5c31\u53ef\u4ee5\u4e86\uff0c\u5e76\u4e0d\u9700\u8981\u4e00\u4e9b\u590d\u6742\u7684\u8bed\u53e5\uff0c\u800c\u4e14\u6709\u4e86\u4e4b\u524d\u51e0\u5468\u5b8c\u6210\u7684\u57fa\u7840\u7684\u6e38\u620f\u67b6\u6784\uff0c\u6211\u4eec\u57fa\u672c\u5c31\u662f\u5b8c\u6210\u8d1f\u8d23\u6e38\u620f\u5bf9\u8c61\u7684\u521b\u5efa\u529f\u80fd\u7684\u7c7b\uff0c\u5b8c\u6210\u5bf9\u8c61\u57fa\u672c\u52a8\u4f5c\u7684\u7c7b\uff0c\u4ee5\u53ca\u6e38\u620f\u573a\u666f\u4e2d\u5bf9\u5e94\u529f\u80fd\u89e3\u8026\u51fa\u6765\u7684\u7c7b\u3002\u53ea\u8981\u6709\u4e86\u8fd9\u4e9b\u57fa\u672c\u7684\u610f\u8bc6\u540e\uff0c\u6211\u4eec\u5bf9\u4e8e\u5199\u6e38\u620f\u7684\u4e0a\u624b\u8fd8\u662f\u5f88\u5feb\u7684\u3002", 
            "title": "FirstController\u7c7b"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb010-\u7b80\u5355\u5de1\u903b\u5175\u5c0f\u6e38\u620f/", 
            "text": "\u5b66\u4e60\u7b14\u8bb010-\u7b80\u5355\u5de1\u903b\u5175\u5c0f\u6e38\u620f\n\n\n\u6e38\u620f\u8981\u6c42\n\n\n\n\n\u6e38\u620f\u89c4\u5219\n\n\n\u521b\u5efa\u4e00\u4e2a\u5730\u56fe\u548c\u82e5\u5e72\u5de1\u903b\u5175(\u4f7f\u7528\u52a8\u753b)\uff1b\n\n\n\u6bcf\u4e2a\u5de1\u903b\u5175\u8d70\u4e00\u4e2a3~5\u4e2a\u8fb9\u7684\u51f8\u591a\u8fb9\u578b\uff0c\u4f4d\u7f6e\u6570\u636e\u662f\u76f8\u5bf9\u5730\u5740\u3002\u5373\u6bcf\u6b21\u786e\u5b9a\u4e0b\u4e00\u4e2a\u76ee\u6807\u4f4d\u7f6e\uff0c\u7528\u81ea\u5df1\u5f53\u524d\u4f4d\u7f6e\u4e3a\u539f\u70b9\u8ba1\u7b97\uff1b\n\n\n\u5de1\u903b\u5175\u78b0\u649e\u5230\u969c\u788d\u7269\uff0c\u5219\u4f1a\u81ea\u52a8\u9009\u4e0b\u4e00\u4e2a\u70b9\u4e3a\u76ee\u6807\uff1b\n\n\n\u5de1\u903b\u5175\u5728\u8bbe\u5b9a\u8303\u56f4\u5185\u611f\u77e5\u5230\u73a9\u5bb6\uff0c\u4f1a\u81ea\u52a8\u8ffd\u51fb\u73a9\u5bb6;\u5931\u53bb\u73a9\u5bb6\u76ee\u6807\u540e\uff0c\u7ee7\u7eed\u5de1\u903b\uff1b\n\n\n\u8ba1\u5206\uff1a\u73a9\u5bb6\u6bcf\u6b21\u7529\u6389\u4e00\u4e2a\u5de1\u903b\u5175\u8ba1\u4e00\u5206\uff0c\u4e0e\u5de1\u903b\u5175\u78b0\u649e\u6e38\u620f\u7ed3\u675f\uff1b\n\n\n\n\n\n\n\u6e38\u620f\u8bbe\u8ba1\u8981\u6c42\n\n\n\u5fc5\u987b\u4f7f\u7528\u8ba2\u9605\u4e0e\u53d1\u5e03\u6a21\u5f0f\u4f20\u6d88\u606f\n\n\n\u5de5\u5382\u6a21\u5f0f\u751f\u4ea7\u5de1\u903b\u5175\n\n\n\n\n\n\n\n\n\u6e38\u620f\u6539\u8fdb\u3001\u6548\u679c\u3001\u6f14\u793a\u89c6\u9891\n\n\n\u6539\u8fdb\u90e8\u5206\u5b9e\u73b0\u4e86\u7528\u6237\u89c6\u89d2\u7684\u53ef\u5207\u6362(\u6309\"space\"\u5207\u6362)\uff0c\u4e14\u4ea4\u4e92\u65b9\u5f0f\u968f\u89c6\u89d2\u53d8\u5316\uff0c\u589e\u5f3a\u4e86\u6e38\u620f\u7684\u4ea4\u4e92\u6027\u3002\n\n\n\n\n\n\u6f14\u793a\u89c6\u9891\n\n\n\u5b8c\u6574\u4ee3\u7801\n\n\ngithub@zhongwq/Unity3D-Learning/Homework6\n\n\n\u6e38\u620fUML\u56fe\n\n\n\n\n\u6e38\u620f\u5b9e\u73b0\n\n\nPlayerController\n\n\nPlayerController\u4e3b\u8981\u5b9e\u73b0\u7684\u662f\u7528\u6237\u63a7\u5236\u73a9\u5bb6\uff0c\u4ee5\u53ca\u8c03\u7528\u53d1\u5e03\u8005\u5728\u4e8b\u4ef6\u89e6\u53d1\u65f6\u53d1\u5e03\u6d88\u606f\n\n\npublic\n \nclass\n \nPlayerController\n \n:\n \nMonoBehaviour\n \n{\n\n\n    \npublic\n \nCamera\n \nsubCamera\n;\n\n    \nprivate\n \nAnimator\n \nanimator\n;\n\n    \nprivate\n \nAnimatorStateInfo\n \nstateInfo\n;\n\n\n    \nprivate\n \nVector3\n \nvelocity\n;\n\n    \nprivate\n \nint\n \nangle\n;\n\n\n    \nprivate\n \nfloat\n \nrotateSpeed\n \n=\n \n15f\n;\n\n    \nprivate\n \nfloat\n \nrotateSpeed_Sub\n \n=\n \n60f\n;\n\n    \nprivate\n \nfloat\n \nrunSpeed\n \n=\n \n3f\n;\n\n\n    \n// Use this for initialization\n\n    \nvoid\n \nStart\n \n()\n \n{\n\n        \nanimator\n \n=\n \nGetComponent\nAnimator\n \n();\n\n        \nangle\n \n=\n \n1\n;\n\n    \n}\n\n\n    \nvoid\n \nOnTriggerEnter\n(\nCollider\n \nother\n)\n \n{\n\n        \n// \u8fdb\u5165\u88ab\u76d1\u63a7\u7684Area\u5219\u53d1\u5e03\u4fe1\u606f\n\n        \nif\n \n(\nother\n.\ngameObject\n.\nCompareTag\n \n(\nArea\n))\n \n{\n\n            \nPublisher\n \npublish\n \n=\n \nPublisher\n.\ngetInstance\n \n();\n\n            \nint\n \nareaIndex\n \n=\n \nother\n.\ngameObject\n.\nname\n[\nother\n.\ngameObject\n.\nname\n.\nLength\n-\n1\n]-\n0\n;\n\n            \npublish\n.\nnotify\n \n(\nActionType\n.\nENTER\n,\n \nareaIndex\n,\n \nthis\n.\ngameObject\n);\n\n        \n}\n\n    \n}\n\n\n    \nvoid\n \nOnCollisionEnter\n(\nCollision\n \ncollision\n)\n \n{\n\n        \n// \u4e0ePatrol\u78b0\u649e\u540e\u53d1\u5e03\u4fe1\u606f\n\n        \nif\n \n(\ncollision\n.\ngameObject\n.\nCompareTag\n \n(\nPatrol\n)\n \n \nanimator\n.\nGetBool\n \n(\nlive\n))\n \n{\n\n            \nanimator\n.\nSetBool\n \n(\nlive\n,\n \nfalse\n);\n\n            \nPublisher\n \npublish\n \n=\n \nPublisher\n.\ngetInstance\n \n();\n\n            \npublish\n.\nnotify\n \n(\nActionType\n.\nDEAD\n,\n \n0\n,\n \nnull\n);\n\n        \n}\n\n    \n}\n\n\n    \n// Update is called once per frame\n\n    \nvoid\n \nFixedUpdate\n \n()\n \n{\n\n        \n// \u5f53\u7528\u6237\u6309\u4e0b\u7a7a\u683c\uff0c\u6539\u53d8\u6e38\u620f\u89c6\u89d2\uff0c\u901a\u8fc7\u6539\u53d8\u5b50\u6444\u50cf\u5934\u7684\u6df1\u5ea6\u5b9e\u73b0\n\n        \nif\n \n(\nInput\n.\nGetKeyDown\n \n(\nspace\n))\n \n{\n\n            \nif\n \n(\nangle\n \n==\n \n1\n)\n \n{\n\n                \nsubCamera\n.\ndepth\n \n=\n \n-\n1\n;\n\n                \nangle\n \n=\n \n3\n;\n\n            \n}\n \nelse\n \n{\n\n                \nangle\n \n=\n \n1\n;\n\n                \nsubCamera\n.\ndepth\n \n=\n \n-\n2\n;\n\n            \n}\n\n        \n}\n\n        \nif\n \n(!\nanimator\n.\nGetBool\n \n(\nlive\n))\n\n            \nreturn\n;\n\n        \nfloat\n \nx\n \n=\n \nInput\n.\nGetAxis\n \n(\nHorizontal\n);\n\n        \nfloat\n \nz\n \n=\n \nInput\n.\nGetAxis\n \n(\nVertical\n);\n\n\n        \nif\n \n(\nx\n \n==\n \n0\n \n \nz\n \n==\n \n0\n)\n \n{\n\n            \nanimator\n.\nSetBool\n \n(\nRun\n,\n \nfalse\n);\n\n            \nreturn\n;\n\n        \n}\n \nelse\n \n{\n\n            \nif\n \n(\nangle\n \n==\n \n1\n)\n \n{\n\n                \n// \u4fef\u89c6\u89c6\u89d2\u7684\u4ea4\u4e92\u65b9\u5f0f\uff08WSAD\u5206\u522b\u4e3a\u4e0a\u4e0b\u5de6\u53f3\uff09\n\n                \nanimator\n.\nSetBool\n \n(\nRun\n,\n \ntrue\n);\n\n                \nvelocity\n \n=\n \nnew\n \nVector3\n \n(\nx\n,\n \n0\n,\n \nz\n);\n\n                \nif\n \n(\nx\n \n!=\n \n0\n \n||\n \nz\n \n!=\n \n0\n)\n \n{\n\n                    \nQuaternion\n \nrotation\n \n=\n \nQuaternion\n.\nLookRotation\n \n(\nvelocity\n);\n\n                    \nif\n \n(\ntransform\n.\nrotation\n \n!=\n \nrotation\n)\n\n                        \ntransform\n.\nrotation\n \n=\n \nQuaternion\n.\nSlerp\n \n(\ntransform\n.\nrotation\n,\n \nrotation\n,\n \nTime\n.\nfixedDeltaTime\n \n*\n \nrotateSpeed\n);\n\n                \n}\n\n\n                \nthis\n.\ntransform\n.\nposition\n \n+=\n \nvelocity\n \n*\n \nTime\n.\nfixedDeltaTime\n \n*\n \nrunSpeed\n;\n\n            \n}\n \nelse\n \n{\n\n                \n// \u7b2c\u4e09\u4eba\u79f0\u89c6\u89d2\u7684\u4ea4\u4e92\u65b9\u5f0f(WS\u524d\u8fdb\u3001\u540e\u9000, AD\u5de6\u53f3\u65cb\u8f6c\u65b9\u5411)\n\n                \nif\n \n(\nz\n \n!=\n \n0\n)\n\n                    \nanimator\n.\nSetBool\n \n(\nRun\n,\n \ntrue\n);\n\n                \ntransform\n.\nTranslate\n(\n0\n,\n \n0\n,\n \nz\n \n*\n \nrunSpeed\n \n*\n \nTime\n.\nfixedDeltaTime\n);\n\n                \ntransform\n.\nRotate\n(\n0\n,\n \nx\n \n*\n \nrotateSpeed_Sub\n \n*\n \nTime\n.\nfixedDeltaTime\n,\n \n0\n);\n\n            \n}\n\n        \n}\n\n        \n// \u907f\u514d\u78b0\u649e\u5e26\u6765\u7684\u5f71\u54cd\n\n        \nif\n \n(\ntransform\n.\nlocalEulerAngles\n.\nx\n \n!=\n \n0\n \n||\n \ntransform\n.\nlocalEulerAngles\n.\nz\n \n!=\n \n0\n)\n \n{\n\n            \ntransform\n.\nlocalEulerAngles\n \n=\n \nnew\n \nVector3\n \n(\n0\n,\n \ntransform\n.\nlocalEulerAngles\n.\ny\n,\n \n0\n);\n\n        \n}\n \n        \nif\n \n(\ntransform\n.\nposition\n.\ny\n \n!=\n \n0\n)\n \n{\n\n            \ntransform\n.\nposition\n \n=\n \nnew\n \nVector3\n \n(\ntransform\n.\nposition\n.\nx\n,\n \n0\n,\n \ntransform\n.\nposition\n.\nz\n);\n\n        \n}\n\n    \n}\n\n\n}\n\n\n\n\n\n\nPatrol\u90e8\u5206\n\n\nPatrolActionManager\n\n\n\u8fd9\u91cc\u4e3b\u8981\u5c31\u662f\u63d0\u4f9b\u7ed9PatrolCrtl\u7684\u52a8\u4f5c\u7ba1\u7406\u5668\uff0c\u65b9\u4fbf\u4e86PatrolCrtl\u5bf9\u4e8ePatrol\u52a8\u4f5c\u7684\u6dfb\u52a0\u3001\u5220\u9664\uff0c\u800c\u6bcf\u6b21\u521b\u5efa\u52a8\u4f5c\u90fd\u4f1a\u8fd4\u56de\u521b\u5efa\u7684\u52a8\u4f5c\u4f5c\u4e3aPatrolCrtl\u7684currentAction\u65b9\u4fbf\u5176\u5bf9\u5176\u8fdb\u884c\u9500\u6bc1,\u65e0\u9700\u518d\u4ea4\u7ed9\u52a8\u4f5c\u7ba1\u7406\u5668\u9500\u6bc1\uff0c\u90a3\u6837\u8fd8\u589e\u52a0\u4e86\u904d\u5386\u7684\u5f00\u9500\u3002\n\u5404Action\u7684\u5b9e\u73b0\u5341\u5206\u7b80\u5355\uff0c\u8fd9\u91cc\u4e0d\u591a\u8d58\u8ff0\uff0c\u5b8c\u6574\u4ee3\u7801\u53ef\u89c1Github\n\n\npublic\n \nclass\n \nPatrolActionManager\n \n:\n \nSSActionManager\n \n{\n\n    \npublic\n \nIdleAction\n \ntoIdle\n(\nGameObject\n \nobj\n,\n \nAnimator\n \nanimator\n,\n \nActionCallback\n \ncallback\n)\n \n{\n\n        \nIdleAction\n \ntmp\n \n=\n \nIdleAction\n.\nGetIdleAction\n \n(\nRandom\n.\nRange\n \n(\n1\n,\n \n2\n),\n \nanimator\n);\n\n        \nthis\n.\naddAction\n \n(\nobj\n,\n \ntmp\n,\n \ncallback\n);\n\n        \nreturn\n \ntmp\n;\n\n    \n}\n\n\n    \npublic\n \nWalkAction\n \ntoLeft\n(\nGameObject\n \nobj\n,\n \nAnimator\n \nanimator\n,\n \nActionCallback\n \ncallback\n)\n \n{\n\n        \nVector3\n \ntarget\n \n=\n \nVector3\n.\nleft\n \n*\n \nRandom\n.\nRange\n(\n2\n,\n \n4\n)\n \n+\n \nobj\n.\ntransform\n.\nposition\n;\n\n        \nWalkAction\n \ntmp\n \n=\n \nWalkAction\n.\nGetWalkAction\n(\ntarget\n,\n \n1.0f\n,\n \nanimator\n);\n\n        \nthis\n.\naddAction\n \n(\nobj\n,\n \ntmp\n,\n \ncallback\n);\n\n        \nreturn\n \ntmp\n;\n\n    \n}\n\n\n    \npublic\n \nWalkAction\n \ntoRight\n(\nGameObject\n \nobj\n,\n \nAnimator\n \nanimator\n,\n \nActionCallback\n \ncallback\n)\n \n{\n\n        \nVector3\n \ntarget\n \n=\n \nVector3\n.\nright\n \n*\n \nRandom\n.\nRange\n(\n2\n,\n \n4\n)\n \n+\n \nobj\n.\ntransform\n.\nposition\n;\n\n        \nWalkAction\n \ntmp\n \n=\n \nWalkAction\n.\nGetWalkAction\n(\ntarget\n,\n \n1.0f\n,\n \nanimator\n);\n\n        \nthis\n.\naddAction\n \n(\nobj\n,\n \ntmp\n,\n \ncallback\n);\n\n        \nreturn\n \ntmp\n;\n\n    \n}\n\n\n    \npublic\n \nWalkAction\n \ntoForward\n(\nGameObject\n \nobj\n,\n \nAnimator\n \nanimator\n,\n \nActionCallback\n \ncallback\n)\n \n{\n\n        \nVector3\n \ntarget\n \n=\n \nVector3\n.\nforward\n \n*\n \nRandom\n.\nRange\n(\n2\n,\n \n4\n)\n \n+\n \nobj\n.\ntransform\n.\nposition\n;\n\n        \nWalkAction\n \ntmp\n \n=\n \nWalkAction\n.\nGetWalkAction\n(\ntarget\n,\n \n1.0f\n,\n \nanimator\n);\n\n        \nthis\n.\naddAction\n \n(\nobj\n,\n \ntmp\n,\n \ncallback\n);\n\n        \nreturn\n \ntmp\n;\n\n    \n}\n\n\n    \npublic\n \nWalkAction\n \ntoBack\n(\nGameObject\n \nobj\n,\n \nAnimator\n \nanimator\n,\n \nActionCallback\n \ncallback\n)\n \n{\n\n        \nVector3\n \ntarget\n \n=\n \nVector3\n.\nback\n \n*\n \nRandom\n.\nRange\n(\n2\n,\n \n4\n)\n \n+\n \nobj\n.\ntransform\n.\nposition\n;\n\n        \nWalkAction\n \ntmp\n \n=\n \nWalkAction\n.\nGetWalkAction\n(\ntarget\n,\n \n1.0f\n,\n \nanimator\n);\n\n        \nthis\n.\naddAction\n \n(\nobj\n,\n \ntmp\n,\n \ncallback\n);\n\n        \nreturn\n \ntmp\n;\n\n    \n}\n\n\n    \npublic\n \nRunAction\n \ngetTarget\n(\nGameObject\n \nplayer\n,\n \nGameObject\n \nobj\n,\n \nAnimator\n \nanimator\n,\n \nActionCallback\n \ncallback\n)\n \n{\n\n        \nRunAction\n \ntmp\n \n=\n \nRunAction\n.\nGetRunAction\n \n(\nplayer\n.\ntransform\n,\n \n2.0f\n,\n \nanimator\n);\n\n        \nthis\n.\naddAction\n \n(\nobj\n,\n \ntmp\n,\n \ncallback\n);\n\n        \nreturn\n \ntmp\n;\n\n    \n}\n\n\n\n\n    \npublic\n \nIdleAction\n \nStop\n(\nGameObject\n \nobj\n,\n \nAnimator\n \nanimator\n,\n \nActionCallback\n \ncallback\n)\n \n{\n\n        \nIdleAction\n \ntmp\n \n=\n \nIdleAction\n.\nGetIdleAction\n \n(-\n1f\n,\n \nanimator\n);\n\n        \nthis\n.\naddAction\n \n(\nobj\n,\n \ntmp\n,\n \ncallback\n);\n\n        \nreturn\n \ntmp\n;\n\n    \n}\n\n\n}\n\n\n\n\n\n\nPatrolCtrl\n\n\n\u8fd9\u4e2a\u7c7b\u4e3b\u8981\u4f5c\u7528\u5c31\u662f\u7ed1\u5728Patrol\u4e0a\uff0c\u63a7\u5236Patrol\u7684\u52a8\u4f5c\uff0c\u5e76\u4f5c\u4e3a\u4e00\u4e2aObserver\u76d1\u542c\u4e8b\u4ef6\uff0c\u6267\u884c\u76f8\u5e94\u52a8\u4f5c\u3002\n\n\npublic\n \nclass\n \nPatrolCtrl\n \n:\n \nMonoBehaviour\n,\n \nActionCallback\n,\n \nObserver\n \n{\n\n    \npublic\n \nenum\n \nActionStatus\n:\n \nint\n \n{\n \nIDLE\n,\n \nTOLEFT\n,\n \nTOFORWARD\n,\n \nTORIGHT\n,\n \nTOBACK\n \n}\n\n\n    \nprivate\n \nAnimator\n \nanimator\n;\n\n    \nprivate\n \nSSAction\n \ncurrentAction\n;\n\n    \nprivate\n \nActionStatus\n \nstatus\n;\n\n    \nprivate\n \nPatrolActionManager\n \npatrolActionManager\n;\n\n\n    \n// Use this for initialization\n\n    \nvoid\n \nStart\n \n()\n \n{\n\n        \nanimator\n \n=\n \nthis\n.\ngameObject\n.\nGetComponent\nAnimator\n \n();\n\n        \npatrolActionManager\n \n=\n \nSingleton\nPatrolActionManager\n.\nInstance\n;\n\n        \nPublisher\n \npublisher\n \n=\n \nPublisher\n.\ngetInstance\n \n();\n\n        \npublisher\n.\nadd\n \n(\nthis\n);\n\n\n        \nstatus\n \n=\n \nActionStatus\n.\nIDLE\n;\n\n\n        \ncurrentAction\n \n=\n \npatrolActionManager\n.\ntoIdle\n \n(\ngameObject\n,\n \nanimator\n,\n \nthis\n);\n\n    \n}\n\n\n    \nvoid\n \nFixedUpdate\n \n()\n \n{\n\n        \nif\n \n(\ntransform\n.\nlocalEulerAngles\n.\nx\n \n!=\n \n0\n \n||\n \ntransform\n.\nlocalEulerAngles\n.\nz\n \n!=\n \n0\n)\n \n{\n\n            \ntransform\n.\nlocalEulerAngles\n \n=\n \nnew\n \nVector3\n(\n0\n,\n \ntransform\n.\nlocalEulerAngles\n.\ny\n,\n \n0\n);\n\n        \n}\n\n        \nif\n \n(\ntransform\n.\nposition\n.\ny\n \n!=\n \n0\n)\n \n{\n\n            \ntransform\n.\nposition\n \n=\n \nnew\n \nVector3\n(\ntransform\n.\nposition\n.\nx\n,\n \n0\n,\n \ntransform\n.\nposition\n.\nz\n);\n\n        \n}\n\n        \ngameObject\n.\nGetComponent\nRigidbody\n().\nvelocity\n \n=\n \nnew\n \nVector3\n(\n0\n,\n \n0\n,\n \n0\n);\n  \n    \n}\n\n\n    \npublic\n \nvoid\n \ninitial\n \n()\n \n{\n\n        \nstatus\n \n=\n \nActionStatus\n.\nIDLE\n;\n\n        \ncurrentAction\n \n=\n \npatrolActionManager\n.\ntoIdle\n \n(\ngameObject\n,\n \nanimator\n,\n \nthis\n);\n\n    \n}\n\n\n    \npublic\n \nvoid\n \nremoveAction\n \n()\n \n{\n\n        \nif\n \n(\ncurrentAction\n)\n\n            \ncurrentAction\n.\ndestroy\n \n=\n \ntrue\n;\n\n    \n}\n\n\n    \n// When action done do next action\n\n    \npublic\n \nvoid\n \nactionDone\n \n(\nSSAction\n \nsource\n)\n \n{\n\n        \nstatus\n \n=\n \nstatus\n \n==\n \nActionStatus\n.\nTOBACK\n \n?\n \nActionStatus\n.\nTOLEFT\n:\n \n(\nActionStatus\n)((\nint\n)\nstatus\n \n+\n \n1\n);\n\n        \nswitch\n \n(\nstatus\n)\n \n{\n\n            \ncase\n \nActionStatus\n.\nTOLEFT\n:\n\n                \ncurrentAction\n \n=\n \npatrolActionManager\n.\ntoLeft\n \n(\ngameObject\n,\n \nanimator\n,\n \nthis\n);\n\n                \nbreak\n;\n\n            \ncase\n \nActionStatus\n.\nTORIGHT\n:\n\n                \ncurrentAction\n \n=\n \npatrolActionManager\n.\ntoRight\n \n(\ngameObject\n,\n \nanimator\n,\n \nthis\n);\n\n                \nbreak\n;\n\n            \ncase\n \nActionStatus\n.\nTOFORWARD\n:\n\n                \ncurrentAction\n \n=\n \npatrolActionManager\n.\ntoForward\n \n(\ngameObject\n,\n \nanimator\n,\n \nthis\n);\n\n                \nbreak\n;\n\n            \ncase\n \nActionStatus\n.\nTOBACK\n:\n\n                \ncurrentAction\n \n=\n \npatrolActionManager\n.\ntoBack\n \n(\ngameObject\n,\n \nanimator\n,\n \nthis\n);\n\n                \nbreak\n;\n\n        \n}\n\n    \n}\n\n\n    \nprivate\n \nvoid\n \nturn\n \n()\n \n{\n\n        \ncurrentAction\n.\ndestroy\n \n=\n \ntrue\n;\n\n        \nswitch\n \n(\nstatus\n)\n \n{\n\n            \ncase\n \nActionStatus\n.\nTOLEFT\n:\n\n                \nstatus\n \n=\n \nActionStatus\n.\nTORIGHT\n;\n\n                \ncurrentAction\n \n=\n \npatrolActionManager\n.\ntoRight\n \n(\ngameObject\n,\n \nanimator\n,\n \nthis\n);\n\n                \nbreak\n;\n\n            \ncase\n \nActionStatus\n.\nTORIGHT\n:\n\n                \nstatus\n \n=\n \nActionStatus\n.\nTOLEFT\n;\n\n                \ncurrentAction\n \n=\n \npatrolActionManager\n.\ntoLeft\n \n(\ngameObject\n,\n \nanimator\n,\n \nthis\n);;\n\n                \nbreak\n;\n\n            \ncase\n \nActionStatus\n.\nTOFORWARD\n:\n\n                \nstatus\n \n=\n \nActionStatus\n.\nTOBACK\n;\n\n                \ncurrentAction\n \n=\n \npatrolActionManager\n.\ntoBack\n \n(\ngameObject\n,\n \nanimator\n,\n \nthis\n);\n\n                \nbreak\n;\n\n            \ncase\n \nActionStatus\n.\nTOBACK\n:\n\n                \nstatus\n \n=\n \nActionStatus\n.\nTOFORWARD\n;\n\n                \ncurrentAction\n \n=\n \npatrolActionManager\n.\ntoForward\n \n(\ngameObject\n,\n \nanimator\n,\n \nthis\n);\n\n                \nbreak\n;\n\n        \n}\n\n    \n}\n\n\n    \nprivate\n \nvoid\n \nOnCollisionEnter\n \n(\nCollision\n \ncollision\n)\n \n{\n\n        \nif\n \n(\ncollision\n.\ngameObject\n.\nCompareTag\n \n(\nWall\n))\n\n            \nturn\n \n();\n\n    \n}\n\n\n    \nprivate\n \nvoid\n \nOnTriggerEnter\n \n(\nCollider\n \nother\n)\n \n{\n\n        \nif\n \n(\nother\n.\ngameObject\n.\nCompareTag\n \n(\nDoor\n))\n\n            \nturn\n \n();\n\n    \n}\n\n\n    \npublic\n \nvoid\n \nnotified\n \n(\nActionType\n \ntype\n,\n \nint\n \nposition\n,\n \nGameObject\n \nactor\n)\n \n{\n\n        \nif\n \n(\ntype\n \n==\n \nActionType\n.\nENTER\n)\n \n{\n\n            \nif\n \n(\nposition\n \n==\n \nthis\n.\ngameObject\n.\nname\n \n[\nthis\n.\ngameObject\n.\nname\n.\nLength\n \n-\n \n1\n]\n \n-\n \n0\n)\n \n{\n\n                \ncurrentAction\n.\ndestroy\n \n=\n \ntrue\n;\n\n                \ncurrentAction\n \n=\n \npatrolActionManager\n.\ngetTarget\n \n(\nactor\n,\n \ngameObject\n,\n \nanimator\n,\n \nthis\n);\n\n            \n}\n\n        \n}\n \nelse\n \n{\n\n            \ncurrentAction\n \n=\n \npatrolActionManager\n.\nStop\n \n(\ngameObject\n,\n \nanimator\n,\n \nthis\n);\n\n        \n}\n\n    \n}\n\n\n}\n\n\n\n\n\n\n\u8ba2\u9605\u4e0e\u53d1\u5e03\u8005\u90e8\u5206\n\n\n\u8ba2\u9605\u8005\u548c\u53d1\u5e03\u8005\u7684\u5b9e\u73b0\u65b9\u5f0f\u5982\u4e0b\uff0c\u4f5c\u4e3a\u8ba2\u9605\u8005\u7684\u7c7b\u53ea\u9700\u8981\u7ee7\u627fObserver\u5e76\u5b9e\u73b0\u5176\u4e2d\u7684\u63a5\u53e3\u5373\u53ef\u4f5c\u4e3a\u8ba2\u9605\u8005\u53d1\u6325\u4f5c\u7528\u3002\n\n\n\u8ba2\u9605\u8005\u548c\u53d1\u5e03\u8005\u8fd9\u79cd\u6a21\u5f0f\u7684\u4e3b\u8981\u4f5c\u7528\u6211\u4e2a\u4eba\u89c9\u5f97\u662f\u65b9\u4fbf\u5b9e\u73b0\u7ec4\u4ef6\u7684\u5206\u79bb\uff0c\u5e76\u5b9e\u73b0\u5206\u79bb\u540e\u7ec4\u4ef6\u7684\u8026\u5408\uff0c\u907f\u514d\u4e86\u591a\u4e2a\u529f\u80fd\u5199\u5728\u4e00\u4e2a\u7c7b\u4e2d\uff0c\u6291\u6216\u662f\u9700\u8981\u624b\u52a8\u7ed1\u5b9a\u591a\u4e2a\u7c7b\u7684\u60c5\u51b5\uff0c\u4f7f\u5f97\u6211\u4eec\u7a0b\u5e8f\u4ee3\u7801\u66f4\u52a0\u7b80\u6d01\uff0c\u7a0b\u5e8f\u7ed3\u6784\u66f4\u52a0\u6e05\u6670\u6613\u4e8e\u7406\u89e3\n\n\nObserver\n\n\npublic\n \ninterface\n \nObserver\n \n{\n\n    \nvoid\n \nnotified\n \n(\nActionType\n \ntype\n,\n \nint\n \nposition\n,\n \nGameObject\n \nactor\n);\n\n\n}\n\n\n\n\n\n\nPublisher\n\n\npublic\n \nenum\n \nActionType\n \n{\n \nENTER\n,\n \nEXIT\n,\n \nDEAD\n \n}\n\n\n\npublic\n \nclass\n \nPublisher\n \n{\n\n    \nprivate\n \ndelegate\n \nvoid\n \nActionUpdate\n(\nActionType\n \ntype\n,\n \nint\n \nposition\n,\n \nGameObject\n \nactor\n);\n\n    \nprivate\n \nActionUpdate\n \nupdateList\n;\n\n\n    \nprivate\n \nstatic\n \nPublisher\n \n_instance\n;\n\n    \npublic\n \nstatic\n \nPublisher\n \ngetInstance\n()\n \n{\n\n        \nif\n \n(\n_instance\n \n==\n \nnull\n)\n\n            \n_instance\n \n=\n \nnew\n \nPublisher\n();\n\n        \nreturn\n \n_instance\n;\n\n    \n}\n\n\n    \npublic\n \nvoid\n \nnotify\n(\nActionType\n \ntype\n,\n \nint\n \nposition\n,\n \nGameObject\n \nactor\n)\n\n    \n{\n\n        \nif\n \n(\nupdateList\n \n!=\n \nnull\n)\n \n            \nupdateList\n(\ntype\n,\n \nposition\n,\n \nactor\n);\n\n    \n}\n\n\n    \npublic\n \nvoid\n \nadd\n(\nObserver\n \nobserver\n)\n\n    \n{\n\n        \nupdateList\n \n+=\n \nobserver\n.\nnotified\n;\n\n    \n}\n\n\n    \npublic\n \nvoid\n \ndelete\n(\nObserver\n \nobserver\n)\n\n    \n{\n\n        \nupdateList\n \n-=\n \nobserver\n.\nnotified\n;\n\n    \n}\n\n\n}\n\n\n\n\n\n\n\u4f7f\u7528\u53d1\u5e03\u8005\u529f\u80fd\u7684\u4ee3\u7801\n\n\nvoid\n \nOnTriggerEnter\n(\nCollider\n \nother\n)\n \n{\n\n    \n// \u8fdb\u5165\u88ab\u76d1\u63a7\u7684Area\u5219\u53d1\u5e03\u4fe1\u606f\n\n    \nif\n \n(\nother\n.\ngameObject\n.\nCompareTag\n \n(\nArea\n))\n \n{\n\n        \nPublisher\n \npublish\n \n=\n \nPublisher\n.\ngetInstance\n \n();\n\n        \nint\n \nareaIndex\n \n=\n \nother\n.\ngameObject\n.\nname\n[\nother\n.\ngameObject\n.\nname\n.\nLength\n-\n1\n]-\n0\n;\n\n        \npublish\n.\nnotify\n \n(\nActionType\n.\nENTER\n,\n \nareaIndex\n,\n \nthis\n.\ngameObject\n);\n\n    \n}\n\n\n}\n\n\n\nvoid\n \nOnTriggerExit\n(\nCollider\n \nother\n)\n \n{\n\n    \n// \u9003\u79bb\u65f6\u53d1\u5e03\u4fe1\u606f\n\n    \nif\n \n(\nother\n.\ngameObject\n.\nCompareTag\n \n(\nArea\n))\n \n{\n\n        \nPublisher\n \npublish\n \n=\n \nPublisher\n.\ngetInstance\n \n();\n\n        \npublish\n.\nnotify\n \n(\nActionType\n.\nEXIT\n,\n \n-\n1\n,\n \nthis\n.\ngameObject\n);\n\n    \n}\n\n\n}\n\n\n\nvoid\n \nOnCollisionEnter\n(\nCollision\n \ncollision\n)\n \n{\n\n    \n// \u4e0ePatrol\u78b0\u649e\u540e\u53d1\u5e03\u4fe1\u606f\n\n    \nif\n \n(\ncollision\n.\ngameObject\n.\nCompareTag\n \n(\nPatrol\n)\n \n \nanimator\n.\nGetBool\n \n(\nlive\n))\n \n{\n\n        \nanimator\n.\nSetBool\n \n(\nlive\n,\n \nfalse\n);\n\n        \nPublisher\n \npublish\n \n=\n \nPublisher\n.\ngetInstance\n \n();\n\n        \npublish\n.\nnotify\n \n(\nActionType\n.\nDEAD\n,\n \n0\n,\n \nnull\n);\n\n    \n}\n\n\n}\n\n\n\n\n\n\n\u4f7f\u7528\u8ba2\u9605\u8005\u529f\u80fd\u7684\u4ee3\u7801\n\n\n// PatrolCtrl.cs\n\n\npublic\n \nvoid\n \nnotified\n \n(\nActionType\n \ntype\n,\n \nint\n \nposition\n,\n \nGameObject\n \nactor\n)\n \n{\n\n    \nif\n \n(\ntype\n \n==\n \nActionType\n.\nENTER\n)\n \n{\n\n        \nif\n \n(\nposition\n \n==\n \nthis\n.\ngameObject\n.\nname\n \n[\nthis\n.\ngameObject\n.\nname\n.\nLength\n \n-\n \n1\n]\n \n-\n \n0\n)\n \n{\n\n            \ncurrentAction\n.\ndestroy\n \n=\n \ntrue\n;\n\n            \ncurrentAction\n \n=\n \npatrolActionManager\n.\ngetTarget\n \n(\nactor\n,\n \ngameObject\n,\n \nanimator\n,\n \nthis\n);\n\n        \n}\n\n    \n}\n \nelse\n \nif\n \n(\ntype\n \n==\n \nActionType\n.\nDEAD\n)\n \n{\n\n        \ncurrentAction\n \n=\n \npatrolActionManager\n.\nStop\n \n(\ngameObject\n,\n \nanimator\n,\n \nthis\n);\n\n    \n}\n\n\n}\n\n\n// FirstController.cs\n\n\npublic\n \nvoid\n \nnotified\n \n(\nActionType\n \ntype\n,\n \nint\n \nposition\n,\n \nGameObject\n \nactor\n)\n \n{\n\n    \nif\n \n(\ntype\n \n==\n \nActionType\n.\nENTER\n)\n \n{\n\n        \nscoreRecorder\n.\naddScore\n \n();\n\n    \n}\n \nelse\n \nif\n \n(\ntype\n \n==\n \nActionType\n.\nDEAD\n)\n \n{\n\n        \ngameStatus\n \n=\n \n1\n;\n\n        \nfactory\n.\nfreeAllObj\n \n();\n\n    \n}\n\n\n}\n\n\n// ScoreRecorder\n\n\npublic\n \nvoid\n \nnotified\n \n(\nActionType\n \ntype\n,\n \nint\n \nposition\n,\n \nGameObject\n \nactor\n)\n \n{\n\n    \nif\n \n(\ntype\n \n==\n \nActionType\n.\nEXIT\n)\n \n{\n\n        \naddScore\n \n();\n\n    \n}\n\n\n}\n\n\n\n\n\n\nScoreRecorder\n\n\n\u8fd9\u6b21\u7684\u8ba1\u5206\u5458\u65e0\u987b\u518d\u5728FirstController\u4e2d\u63a7\u5236\uff0c\u5176\u4f5c\u4e3a\u4e00\u4e2a\u89c2\u5bdf\u8005\u53ef\u4ee5\u76d1\u542c\u5f97\u5206\u4e8b\u4ef6\uff0c\u4ece\u800c\u81ea\u5df1\u6539\u53d8\u5f97\u5206\n\n\npublic\n \nclass\n \nScoreRecorder\n:\n \nObserver\n \n{\n\n    \npublic\n \nint\n \nscore\n \n=\n \n0\n;\n\n\n    \nprivate\n \nint\n \nstatus\n \n=\n \n0\n;\n \n// \u4f7f\u8fdb\u51fa\u914d\u5bf9\uff0c\u907f\u514dReset\u65f6\u52a0\u591a\u4e00\u5206\n\n    \nText\n \ngameInfo\n;\n\n\n    \nprivate\n \nstatic\n \nScoreRecorder\n \ninstance\n;\n\n    \npublic\n \nstatic\n \nScoreRecorder\n \ngetInstance\n()\n\n    \n{\n\n        \nif\n \n(\ninstance\n \n==\n \nnull\n)\n\n        \n{\n\n            \ninstance\n \n=\n \nnew\n \nScoreRecorder\n();\n\n        \n}\n\n        \nreturn\n \ninstance\n;\n\n    \n}\n\n\n    \nprivate\n \nScoreRecorder\n()\n \n{\n\n        \ngameInfo\n \n=\n \n(\nGameObject\n.\nInstantiate\n \n(\nResources\n.\nLoad\n \n(\nPrefabs/ScoreInfo\n))\n \nas\n \nGameObject\n).\ntransform\n.\nFind\n \n(\nText\n).\nGetComponent\nText\n \n();\n\n        \ngameInfo\n.\ntext\n \n=\n \n \n+\n \nscore\n;\n\n        \nstatus\n \n=\n \n0\n;\n\n        \nPublisher\n \npublish\n \n=\n \nPublisher\n.\ngetInstance\n \n();\n\n        \npublish\n.\nadd\n \n(\nthis\n);\n\n    \n}\n\n\n    \npublic\n \nvoid\n \naddScore\n()\n \n{\n\n        \nscore\n \n+=\n \n1\n;\n\n        \ngameInfo\n.\ntext\n \n=\n \n \n+\n \nscore\n;\n\n    \n}\n\n\n\n    \npublic\n \nint\n \ngetScore\n()\n \n{\n\n        \nreturn\n \nscore\n;\n\n    \n}\n\n\n    \npublic\n \nvoid\n \nreset\n()\n \n{\n\n        \nscore\n \n=\n \n0\n;\n\n        \nstatus\n \n=\n \n0\n;\n\n        \ngameInfo\n.\ntext\n \n=\n \n \n+\n \nscore\n;\n\n    \n}\n\n\n    \npublic\n \nvoid\n \nnotified\n \n(\nActionType\n \ntype\n,\n \nint\n \nposition\n,\n \nGameObject\n \nactor\n)\n \n{\n\n        \nif\n \n(\ntype\n \n==\n \nActionType\n.\nENTER\n)\n \n{\n\n            \nstatus\n \n=\n \n1\n;\n\n        \n}\n \nelse\n \nif\n \n(\ntype\n \n==\n \nActionType\n.\nEXIT\n \n \nstatus\n \n==\n \n1\n)\n \n{\n\n            \naddScore\n \n();\n\n        \n}\n\n    \n}\n\n\n}\n\n\n\n\n\n\n\u5230\u8fd9\u91cc\uff0c\u8fd9\u5468\u7684\u4f5c\u4e1a\u5c31\u57fa\u672c\u5b8c\u6210\u4e86\n\n\n\u603b\u7ed3\n\n\n\u901a\u8fc7\u8fd9\u6b21\u4f5c\u4e1a\uff0c\u6211\u4e86\u89e3\u5230\u4e86\u8ba2\u9605\u8005\u548c\u53d1\u5e03\u8005\u6a21\u5f0f\u7684\u4f7f\u7528\uff0c\u5b66\u4f1a\u4e86\u5229\u7528\u8ba2\u9605\u8005\u548c\u53d1\u5e03\u8005\u6a21\u5f0f\u5bf9\u6e38\u620f\u7684\u5404\u4e2a\u90e8\u5206\u8fdb\u884c\"\u89e3\u8026\"\u3002", 
            "title": "\u5b66\u4e60\u7b14\u8bb010-\u7b80\u5355\u5de1\u903b\u5175\u5c0f\u6e38\u620f"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb010-\u7b80\u5355\u5de1\u903b\u5175\u5c0f\u6e38\u620f/#10-", 
            "text": "", 
            "title": "\u5b66\u4e60\u7b14\u8bb010-\u7b80\u5355\u5de1\u903b\u5175\u5c0f\u6e38\u620f"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb010-\u7b80\u5355\u5de1\u903b\u5175\u5c0f\u6e38\u620f/#_1", 
            "text": "\u6e38\u620f\u89c4\u5219  \u521b\u5efa\u4e00\u4e2a\u5730\u56fe\u548c\u82e5\u5e72\u5de1\u903b\u5175(\u4f7f\u7528\u52a8\u753b)\uff1b  \u6bcf\u4e2a\u5de1\u903b\u5175\u8d70\u4e00\u4e2a3~5\u4e2a\u8fb9\u7684\u51f8\u591a\u8fb9\u578b\uff0c\u4f4d\u7f6e\u6570\u636e\u662f\u76f8\u5bf9\u5730\u5740\u3002\u5373\u6bcf\u6b21\u786e\u5b9a\u4e0b\u4e00\u4e2a\u76ee\u6807\u4f4d\u7f6e\uff0c\u7528\u81ea\u5df1\u5f53\u524d\u4f4d\u7f6e\u4e3a\u539f\u70b9\u8ba1\u7b97\uff1b  \u5de1\u903b\u5175\u78b0\u649e\u5230\u969c\u788d\u7269\uff0c\u5219\u4f1a\u81ea\u52a8\u9009\u4e0b\u4e00\u4e2a\u70b9\u4e3a\u76ee\u6807\uff1b  \u5de1\u903b\u5175\u5728\u8bbe\u5b9a\u8303\u56f4\u5185\u611f\u77e5\u5230\u73a9\u5bb6\uff0c\u4f1a\u81ea\u52a8\u8ffd\u51fb\u73a9\u5bb6;\u5931\u53bb\u73a9\u5bb6\u76ee\u6807\u540e\uff0c\u7ee7\u7eed\u5de1\u903b\uff1b  \u8ba1\u5206\uff1a\u73a9\u5bb6\u6bcf\u6b21\u7529\u6389\u4e00\u4e2a\u5de1\u903b\u5175\u8ba1\u4e00\u5206\uff0c\u4e0e\u5de1\u903b\u5175\u78b0\u649e\u6e38\u620f\u7ed3\u675f\uff1b    \u6e38\u620f\u8bbe\u8ba1\u8981\u6c42  \u5fc5\u987b\u4f7f\u7528\u8ba2\u9605\u4e0e\u53d1\u5e03\u6a21\u5f0f\u4f20\u6d88\u606f  \u5de5\u5382\u6a21\u5f0f\u751f\u4ea7\u5de1\u903b\u5175", 
            "title": "\u6e38\u620f\u8981\u6c42"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb010-\u7b80\u5355\u5de1\u903b\u5175\u5c0f\u6e38\u620f/#_2", 
            "text": "\u6539\u8fdb\u90e8\u5206\u5b9e\u73b0\u4e86\u7528\u6237\u89c6\u89d2\u7684\u53ef\u5207\u6362(\u6309\"space\"\u5207\u6362)\uff0c\u4e14\u4ea4\u4e92\u65b9\u5f0f\u968f\u89c6\u89d2\u53d8\u5316\uff0c\u589e\u5f3a\u4e86\u6e38\u620f\u7684\u4ea4\u4e92\u6027\u3002   \u6f14\u793a\u89c6\u9891", 
            "title": "\u6e38\u620f\u6539\u8fdb\u3001\u6548\u679c\u3001\u6f14\u793a\u89c6\u9891"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb010-\u7b80\u5355\u5de1\u903b\u5175\u5c0f\u6e38\u620f/#_3", 
            "text": "github@zhongwq/Unity3D-Learning/Homework6", 
            "title": "\u5b8c\u6574\u4ee3\u7801"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb010-\u7b80\u5355\u5de1\u903b\u5175\u5c0f\u6e38\u620f/#uml", 
            "text": "", 
            "title": "\u6e38\u620fUML\u56fe"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb010-\u7b80\u5355\u5de1\u903b\u5175\u5c0f\u6e38\u620f/#_4", 
            "text": "", 
            "title": "\u6e38\u620f\u5b9e\u73b0"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb010-\u7b80\u5355\u5de1\u903b\u5175\u5c0f\u6e38\u620f/#playercontroller", 
            "text": "PlayerController\u4e3b\u8981\u5b9e\u73b0\u7684\u662f\u7528\u6237\u63a7\u5236\u73a9\u5bb6\uff0c\u4ee5\u53ca\u8c03\u7528\u53d1\u5e03\u8005\u5728\u4e8b\u4ef6\u89e6\u53d1\u65f6\u53d1\u5e03\u6d88\u606f  public   class   PlayerController   :   MonoBehaviour   { \n\n     public   Camera   subCamera ; \n     private   Animator   animator ; \n     private   AnimatorStateInfo   stateInfo ; \n\n     private   Vector3   velocity ; \n     private   int   angle ; \n\n     private   float   rotateSpeed   =   15f ; \n     private   float   rotateSpeed_Sub   =   60f ; \n     private   float   runSpeed   =   3f ; \n\n     // Use this for initialization \n     void   Start   ()   { \n         animator   =   GetComponent Animator   (); \n         angle   =   1 ; \n     } \n\n     void   OnTriggerEnter ( Collider   other )   { \n         // \u8fdb\u5165\u88ab\u76d1\u63a7\u7684Area\u5219\u53d1\u5e03\u4fe1\u606f \n         if   ( other . gameObject . CompareTag   ( Area ))   { \n             Publisher   publish   =   Publisher . getInstance   (); \n             int   areaIndex   =   other . gameObject . name [ other . gameObject . name . Length - 1 ]- 0 ; \n             publish . notify   ( ActionType . ENTER ,   areaIndex ,   this . gameObject ); \n         } \n     } \n\n     void   OnCollisionEnter ( Collision   collision )   { \n         // \u4e0ePatrol\u78b0\u649e\u540e\u53d1\u5e03\u4fe1\u606f \n         if   ( collision . gameObject . CompareTag   ( Patrol )     animator . GetBool   ( live ))   { \n             animator . SetBool   ( live ,   false ); \n             Publisher   publish   =   Publisher . getInstance   (); \n             publish . notify   ( ActionType . DEAD ,   0 ,   null ); \n         } \n     } \n\n     // Update is called once per frame \n     void   FixedUpdate   ()   { \n         // \u5f53\u7528\u6237\u6309\u4e0b\u7a7a\u683c\uff0c\u6539\u53d8\u6e38\u620f\u89c6\u89d2\uff0c\u901a\u8fc7\u6539\u53d8\u5b50\u6444\u50cf\u5934\u7684\u6df1\u5ea6\u5b9e\u73b0 \n         if   ( Input . GetKeyDown   ( space ))   { \n             if   ( angle   ==   1 )   { \n                 subCamera . depth   =   - 1 ; \n                 angle   =   3 ; \n             }   else   { \n                 angle   =   1 ; \n                 subCamera . depth   =   - 2 ; \n             } \n         } \n         if   (! animator . GetBool   ( live )) \n             return ; \n         float   x   =   Input . GetAxis   ( Horizontal ); \n         float   z   =   Input . GetAxis   ( Vertical ); \n\n         if   ( x   ==   0     z   ==   0 )   { \n             animator . SetBool   ( Run ,   false ); \n             return ; \n         }   else   { \n             if   ( angle   ==   1 )   { \n                 // \u4fef\u89c6\u89c6\u89d2\u7684\u4ea4\u4e92\u65b9\u5f0f\uff08WSAD\u5206\u522b\u4e3a\u4e0a\u4e0b\u5de6\u53f3\uff09 \n                 animator . SetBool   ( Run ,   true ); \n                 velocity   =   new   Vector3   ( x ,   0 ,   z ); \n                 if   ( x   !=   0   ||   z   !=   0 )   { \n                     Quaternion   rotation   =   Quaternion . LookRotation   ( velocity ); \n                     if   ( transform . rotation   !=   rotation ) \n                         transform . rotation   =   Quaternion . Slerp   ( transform . rotation ,   rotation ,   Time . fixedDeltaTime   *   rotateSpeed ); \n                 } \n\n                 this . transform . position   +=   velocity   *   Time . fixedDeltaTime   *   runSpeed ; \n             }   else   { \n                 // \u7b2c\u4e09\u4eba\u79f0\u89c6\u89d2\u7684\u4ea4\u4e92\u65b9\u5f0f(WS\u524d\u8fdb\u3001\u540e\u9000, AD\u5de6\u53f3\u65cb\u8f6c\u65b9\u5411) \n                 if   ( z   !=   0 ) \n                     animator . SetBool   ( Run ,   true ); \n                 transform . Translate ( 0 ,   0 ,   z   *   runSpeed   *   Time . fixedDeltaTime ); \n                 transform . Rotate ( 0 ,   x   *   rotateSpeed_Sub   *   Time . fixedDeltaTime ,   0 ); \n             } \n         } \n         // \u907f\u514d\u78b0\u649e\u5e26\u6765\u7684\u5f71\u54cd \n         if   ( transform . localEulerAngles . x   !=   0   ||   transform . localEulerAngles . z   !=   0 )   { \n             transform . localEulerAngles   =   new   Vector3   ( 0 ,   transform . localEulerAngles . y ,   0 ); \n         }  \n         if   ( transform . position . y   !=   0 )   { \n             transform . position   =   new   Vector3   ( transform . position . x ,   0 ,   transform . position . z ); \n         } \n     }  }", 
            "title": "PlayerController"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb010-\u7b80\u5355\u5de1\u903b\u5175\u5c0f\u6e38\u620f/#patrol", 
            "text": "", 
            "title": "Patrol\u90e8\u5206"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb010-\u7b80\u5355\u5de1\u903b\u5175\u5c0f\u6e38\u620f/#patrolactionmanager", 
            "text": "\u8fd9\u91cc\u4e3b\u8981\u5c31\u662f\u63d0\u4f9b\u7ed9PatrolCrtl\u7684\u52a8\u4f5c\u7ba1\u7406\u5668\uff0c\u65b9\u4fbf\u4e86PatrolCrtl\u5bf9\u4e8ePatrol\u52a8\u4f5c\u7684\u6dfb\u52a0\u3001\u5220\u9664\uff0c\u800c\u6bcf\u6b21\u521b\u5efa\u52a8\u4f5c\u90fd\u4f1a\u8fd4\u56de\u521b\u5efa\u7684\u52a8\u4f5c\u4f5c\u4e3aPatrolCrtl\u7684currentAction\u65b9\u4fbf\u5176\u5bf9\u5176\u8fdb\u884c\u9500\u6bc1,\u65e0\u9700\u518d\u4ea4\u7ed9\u52a8\u4f5c\u7ba1\u7406\u5668\u9500\u6bc1\uff0c\u90a3\u6837\u8fd8\u589e\u52a0\u4e86\u904d\u5386\u7684\u5f00\u9500\u3002\n\u5404Action\u7684\u5b9e\u73b0\u5341\u5206\u7b80\u5355\uff0c\u8fd9\u91cc\u4e0d\u591a\u8d58\u8ff0\uff0c\u5b8c\u6574\u4ee3\u7801\u53ef\u89c1Github  public   class   PatrolActionManager   :   SSActionManager   { \n     public   IdleAction   toIdle ( GameObject   obj ,   Animator   animator ,   ActionCallback   callback )   { \n         IdleAction   tmp   =   IdleAction . GetIdleAction   ( Random . Range   ( 1 ,   2 ),   animator ); \n         this . addAction   ( obj ,   tmp ,   callback ); \n         return   tmp ; \n     } \n\n     public   WalkAction   toLeft ( GameObject   obj ,   Animator   animator ,   ActionCallback   callback )   { \n         Vector3   target   =   Vector3 . left   *   Random . Range ( 2 ,   4 )   +   obj . transform . position ; \n         WalkAction   tmp   =   WalkAction . GetWalkAction ( target ,   1.0f ,   animator ); \n         this . addAction   ( obj ,   tmp ,   callback ); \n         return   tmp ; \n     } \n\n     public   WalkAction   toRight ( GameObject   obj ,   Animator   animator ,   ActionCallback   callback )   { \n         Vector3   target   =   Vector3 . right   *   Random . Range ( 2 ,   4 )   +   obj . transform . position ; \n         WalkAction   tmp   =   WalkAction . GetWalkAction ( target ,   1.0f ,   animator ); \n         this . addAction   ( obj ,   tmp ,   callback ); \n         return   tmp ; \n     } \n\n     public   WalkAction   toForward ( GameObject   obj ,   Animator   animator ,   ActionCallback   callback )   { \n         Vector3   target   =   Vector3 . forward   *   Random . Range ( 2 ,   4 )   +   obj . transform . position ; \n         WalkAction   tmp   =   WalkAction . GetWalkAction ( target ,   1.0f ,   animator ); \n         this . addAction   ( obj ,   tmp ,   callback ); \n         return   tmp ; \n     } \n\n     public   WalkAction   toBack ( GameObject   obj ,   Animator   animator ,   ActionCallback   callback )   { \n         Vector3   target   =   Vector3 . back   *   Random . Range ( 2 ,   4 )   +   obj . transform . position ; \n         WalkAction   tmp   =   WalkAction . GetWalkAction ( target ,   1.0f ,   animator ); \n         this . addAction   ( obj ,   tmp ,   callback ); \n         return   tmp ; \n     } \n\n     public   RunAction   getTarget ( GameObject   player ,   GameObject   obj ,   Animator   animator ,   ActionCallback   callback )   { \n         RunAction   tmp   =   RunAction . GetRunAction   ( player . transform ,   2.0f ,   animator ); \n         this . addAction   ( obj ,   tmp ,   callback ); \n         return   tmp ; \n     } \n\n\n\n     public   IdleAction   Stop ( GameObject   obj ,   Animator   animator ,   ActionCallback   callback )   { \n         IdleAction   tmp   =   IdleAction . GetIdleAction   (- 1f ,   animator ); \n         this . addAction   ( obj ,   tmp ,   callback ); \n         return   tmp ; \n     }  }", 
            "title": "PatrolActionManager"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb010-\u7b80\u5355\u5de1\u903b\u5175\u5c0f\u6e38\u620f/#patrolctrl", 
            "text": "\u8fd9\u4e2a\u7c7b\u4e3b\u8981\u4f5c\u7528\u5c31\u662f\u7ed1\u5728Patrol\u4e0a\uff0c\u63a7\u5236Patrol\u7684\u52a8\u4f5c\uff0c\u5e76\u4f5c\u4e3a\u4e00\u4e2aObserver\u76d1\u542c\u4e8b\u4ef6\uff0c\u6267\u884c\u76f8\u5e94\u52a8\u4f5c\u3002  public   class   PatrolCtrl   :   MonoBehaviour ,   ActionCallback ,   Observer   { \n     public   enum   ActionStatus :   int   {   IDLE ,   TOLEFT ,   TOFORWARD ,   TORIGHT ,   TOBACK   } \n\n     private   Animator   animator ; \n     private   SSAction   currentAction ; \n     private   ActionStatus   status ; \n     private   PatrolActionManager   patrolActionManager ; \n\n     // Use this for initialization \n     void   Start   ()   { \n         animator   =   this . gameObject . GetComponent Animator   (); \n         patrolActionManager   =   Singleton PatrolActionManager . Instance ; \n         Publisher   publisher   =   Publisher . getInstance   (); \n         publisher . add   ( this ); \n\n         status   =   ActionStatus . IDLE ; \n\n         currentAction   =   patrolActionManager . toIdle   ( gameObject ,   animator ,   this ); \n     } \n\n     void   FixedUpdate   ()   { \n         if   ( transform . localEulerAngles . x   !=   0   ||   transform . localEulerAngles . z   !=   0 )   { \n             transform . localEulerAngles   =   new   Vector3 ( 0 ,   transform . localEulerAngles . y ,   0 ); \n         } \n         if   ( transform . position . y   !=   0 )   { \n             transform . position   =   new   Vector3 ( transform . position . x ,   0 ,   transform . position . z ); \n         } \n         gameObject . GetComponent Rigidbody (). velocity   =   new   Vector3 ( 0 ,   0 ,   0 );   \n     } \n\n     public   void   initial   ()   { \n         status   =   ActionStatus . IDLE ; \n         currentAction   =   patrolActionManager . toIdle   ( gameObject ,   animator ,   this ); \n     } \n\n     public   void   removeAction   ()   { \n         if   ( currentAction ) \n             currentAction . destroy   =   true ; \n     } \n\n     // When action done do next action \n     public   void   actionDone   ( SSAction   source )   { \n         status   =   status   ==   ActionStatus . TOBACK   ?   ActionStatus . TOLEFT :   ( ActionStatus )(( int ) status   +   1 ); \n         switch   ( status )   { \n             case   ActionStatus . TOLEFT : \n                 currentAction   =   patrolActionManager . toLeft   ( gameObject ,   animator ,   this ); \n                 break ; \n             case   ActionStatus . TORIGHT : \n                 currentAction   =   patrolActionManager . toRight   ( gameObject ,   animator ,   this ); \n                 break ; \n             case   ActionStatus . TOFORWARD : \n                 currentAction   =   patrolActionManager . toForward   ( gameObject ,   animator ,   this ); \n                 break ; \n             case   ActionStatus . TOBACK : \n                 currentAction   =   patrolActionManager . toBack   ( gameObject ,   animator ,   this ); \n                 break ; \n         } \n     } \n\n     private   void   turn   ()   { \n         currentAction . destroy   =   true ; \n         switch   ( status )   { \n             case   ActionStatus . TOLEFT : \n                 status   =   ActionStatus . TORIGHT ; \n                 currentAction   =   patrolActionManager . toRight   ( gameObject ,   animator ,   this ); \n                 break ; \n             case   ActionStatus . TORIGHT : \n                 status   =   ActionStatus . TOLEFT ; \n                 currentAction   =   patrolActionManager . toLeft   ( gameObject ,   animator ,   this );; \n                 break ; \n             case   ActionStatus . TOFORWARD : \n                 status   =   ActionStatus . TOBACK ; \n                 currentAction   =   patrolActionManager . toBack   ( gameObject ,   animator ,   this ); \n                 break ; \n             case   ActionStatus . TOBACK : \n                 status   =   ActionStatus . TOFORWARD ; \n                 currentAction   =   patrolActionManager . toForward   ( gameObject ,   animator ,   this ); \n                 break ; \n         } \n     } \n\n     private   void   OnCollisionEnter   ( Collision   collision )   { \n         if   ( collision . gameObject . CompareTag   ( Wall )) \n             turn   (); \n     } \n\n     private   void   OnTriggerEnter   ( Collider   other )   { \n         if   ( other . gameObject . CompareTag   ( Door )) \n             turn   (); \n     } \n\n     public   void   notified   ( ActionType   type ,   int   position ,   GameObject   actor )   { \n         if   ( type   ==   ActionType . ENTER )   { \n             if   ( position   ==   this . gameObject . name   [ this . gameObject . name . Length   -   1 ]   -   0 )   { \n                 currentAction . destroy   =   true ; \n                 currentAction   =   patrolActionManager . getTarget   ( actor ,   gameObject ,   animator ,   this ); \n             } \n         }   else   { \n             currentAction   =   patrolActionManager . Stop   ( gameObject ,   animator ,   this ); \n         } \n     }  }", 
            "title": "PatrolCtrl"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb010-\u7b80\u5355\u5de1\u903b\u5175\u5c0f\u6e38\u620f/#_5", 
            "text": "\u8ba2\u9605\u8005\u548c\u53d1\u5e03\u8005\u7684\u5b9e\u73b0\u65b9\u5f0f\u5982\u4e0b\uff0c\u4f5c\u4e3a\u8ba2\u9605\u8005\u7684\u7c7b\u53ea\u9700\u8981\u7ee7\u627fObserver\u5e76\u5b9e\u73b0\u5176\u4e2d\u7684\u63a5\u53e3\u5373\u53ef\u4f5c\u4e3a\u8ba2\u9605\u8005\u53d1\u6325\u4f5c\u7528\u3002  \u8ba2\u9605\u8005\u548c\u53d1\u5e03\u8005\u8fd9\u79cd\u6a21\u5f0f\u7684\u4e3b\u8981\u4f5c\u7528\u6211\u4e2a\u4eba\u89c9\u5f97\u662f\u65b9\u4fbf\u5b9e\u73b0\u7ec4\u4ef6\u7684\u5206\u79bb\uff0c\u5e76\u5b9e\u73b0\u5206\u79bb\u540e\u7ec4\u4ef6\u7684\u8026\u5408\uff0c\u907f\u514d\u4e86\u591a\u4e2a\u529f\u80fd\u5199\u5728\u4e00\u4e2a\u7c7b\u4e2d\uff0c\u6291\u6216\u662f\u9700\u8981\u624b\u52a8\u7ed1\u5b9a\u591a\u4e2a\u7c7b\u7684\u60c5\u51b5\uff0c\u4f7f\u5f97\u6211\u4eec\u7a0b\u5e8f\u4ee3\u7801\u66f4\u52a0\u7b80\u6d01\uff0c\u7a0b\u5e8f\u7ed3\u6784\u66f4\u52a0\u6e05\u6670\u6613\u4e8e\u7406\u89e3", 
            "title": "\u8ba2\u9605\u4e0e\u53d1\u5e03\u8005\u90e8\u5206"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb010-\u7b80\u5355\u5de1\u903b\u5175\u5c0f\u6e38\u620f/#observer", 
            "text": "public   interface   Observer   { \n     void   notified   ( ActionType   type ,   int   position ,   GameObject   actor );  }", 
            "title": "Observer"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb010-\u7b80\u5355\u5de1\u903b\u5175\u5c0f\u6e38\u620f/#publisher", 
            "text": "public   enum   ActionType   {   ENTER ,   EXIT ,   DEAD   }  public   class   Publisher   { \n     private   delegate   void   ActionUpdate ( ActionType   type ,   int   position ,   GameObject   actor ); \n     private   ActionUpdate   updateList ; \n\n     private   static   Publisher   _instance ; \n     public   static   Publisher   getInstance ()   { \n         if   ( _instance   ==   null ) \n             _instance   =   new   Publisher (); \n         return   _instance ; \n     } \n\n     public   void   notify ( ActionType   type ,   int   position ,   GameObject   actor ) \n     { \n         if   ( updateList   !=   null )  \n             updateList ( type ,   position ,   actor ); \n     } \n\n     public   void   add ( Observer   observer ) \n     { \n         updateList   +=   observer . notified ; \n     } \n\n     public   void   delete ( Observer   observer ) \n     { \n         updateList   -=   observer . notified ; \n     }  }", 
            "title": "Publisher"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb010-\u7b80\u5355\u5de1\u903b\u5175\u5c0f\u6e38\u620f/#_6", 
            "text": "void   OnTriggerEnter ( Collider   other )   { \n     // \u8fdb\u5165\u88ab\u76d1\u63a7\u7684Area\u5219\u53d1\u5e03\u4fe1\u606f \n     if   ( other . gameObject . CompareTag   ( Area ))   { \n         Publisher   publish   =   Publisher . getInstance   (); \n         int   areaIndex   =   other . gameObject . name [ other . gameObject . name . Length - 1 ]- 0 ; \n         publish . notify   ( ActionType . ENTER ,   areaIndex ,   this . gameObject ); \n     }  }  void   OnTriggerExit ( Collider   other )   { \n     // \u9003\u79bb\u65f6\u53d1\u5e03\u4fe1\u606f \n     if   ( other . gameObject . CompareTag   ( Area ))   { \n         Publisher   publish   =   Publisher . getInstance   (); \n         publish . notify   ( ActionType . EXIT ,   - 1 ,   this . gameObject ); \n     }  }  void   OnCollisionEnter ( Collision   collision )   { \n     // \u4e0ePatrol\u78b0\u649e\u540e\u53d1\u5e03\u4fe1\u606f \n     if   ( collision . gameObject . CompareTag   ( Patrol )     animator . GetBool   ( live ))   { \n         animator . SetBool   ( live ,   false ); \n         Publisher   publish   =   Publisher . getInstance   (); \n         publish . notify   ( ActionType . DEAD ,   0 ,   null ); \n     }  }", 
            "title": "\u4f7f\u7528\u53d1\u5e03\u8005\u529f\u80fd\u7684\u4ee3\u7801"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb010-\u7b80\u5355\u5de1\u903b\u5175\u5c0f\u6e38\u620f/#_7", 
            "text": "// PatrolCtrl.cs  public   void   notified   ( ActionType   type ,   int   position ,   GameObject   actor )   { \n     if   ( type   ==   ActionType . ENTER )   { \n         if   ( position   ==   this . gameObject . name   [ this . gameObject . name . Length   -   1 ]   -   0 )   { \n             currentAction . destroy   =   true ; \n             currentAction   =   patrolActionManager . getTarget   ( actor ,   gameObject ,   animator ,   this ); \n         } \n     }   else   if   ( type   ==   ActionType . DEAD )   { \n         currentAction   =   patrolActionManager . Stop   ( gameObject ,   animator ,   this ); \n     }  }  // FirstController.cs  public   void   notified   ( ActionType   type ,   int   position ,   GameObject   actor )   { \n     if   ( type   ==   ActionType . ENTER )   { \n         scoreRecorder . addScore   (); \n     }   else   if   ( type   ==   ActionType . DEAD )   { \n         gameStatus   =   1 ; \n         factory . freeAllObj   (); \n     }  }  // ScoreRecorder  public   void   notified   ( ActionType   type ,   int   position ,   GameObject   actor )   { \n     if   ( type   ==   ActionType . EXIT )   { \n         addScore   (); \n     }  }", 
            "title": "\u4f7f\u7528\u8ba2\u9605\u8005\u529f\u80fd\u7684\u4ee3\u7801"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb010-\u7b80\u5355\u5de1\u903b\u5175\u5c0f\u6e38\u620f/#scorerecorder", 
            "text": "\u8fd9\u6b21\u7684\u8ba1\u5206\u5458\u65e0\u987b\u518d\u5728FirstController\u4e2d\u63a7\u5236\uff0c\u5176\u4f5c\u4e3a\u4e00\u4e2a\u89c2\u5bdf\u8005\u53ef\u4ee5\u76d1\u542c\u5f97\u5206\u4e8b\u4ef6\uff0c\u4ece\u800c\u81ea\u5df1\u6539\u53d8\u5f97\u5206  public   class   ScoreRecorder :   Observer   { \n     public   int   score   =   0 ; \n\n     private   int   status   =   0 ;   // \u4f7f\u8fdb\u51fa\u914d\u5bf9\uff0c\u907f\u514dReset\u65f6\u52a0\u591a\u4e00\u5206 \n     Text   gameInfo ; \n\n     private   static   ScoreRecorder   instance ; \n     public   static   ScoreRecorder   getInstance () \n     { \n         if   ( instance   ==   null ) \n         { \n             instance   =   new   ScoreRecorder (); \n         } \n         return   instance ; \n     } \n\n     private   ScoreRecorder ()   { \n         gameInfo   =   ( GameObject . Instantiate   ( Resources . Load   ( Prefabs/ScoreInfo ))   as   GameObject ). transform . Find   ( Text ). GetComponent Text   (); \n         gameInfo . text   =     +   score ; \n         status   =   0 ; \n         Publisher   publish   =   Publisher . getInstance   (); \n         publish . add   ( this ); \n     } \n\n     public   void   addScore ()   { \n         score   +=   1 ; \n         gameInfo . text   =     +   score ; \n     } \n\n\n     public   int   getScore ()   { \n         return   score ; \n     } \n\n     public   void   reset ()   { \n         score   =   0 ; \n         status   =   0 ; \n         gameInfo . text   =     +   score ; \n     } \n\n     public   void   notified   ( ActionType   type ,   int   position ,   GameObject   actor )   { \n         if   ( type   ==   ActionType . ENTER )   { \n             status   =   1 ; \n         }   else   if   ( type   ==   ActionType . EXIT     status   ==   1 )   { \n             addScore   (); \n         } \n     }  }   \u5230\u8fd9\u91cc\uff0c\u8fd9\u5468\u7684\u4f5c\u4e1a\u5c31\u57fa\u672c\u5b8c\u6210\u4e86", 
            "title": "ScoreRecorder"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb010-\u7b80\u5355\u5de1\u903b\u5175\u5c0f\u6e38\u620f/#_8", 
            "text": "\u901a\u8fc7\u8fd9\u6b21\u4f5c\u4e1a\uff0c\u6211\u4e86\u89e3\u5230\u4e86\u8ba2\u9605\u8005\u548c\u53d1\u5e03\u8005\u6a21\u5f0f\u7684\u4f7f\u7528\uff0c\u5b66\u4f1a\u4e86\u5229\u7528\u8ba2\u9605\u8005\u548c\u53d1\u5e03\u8005\u6a21\u5f0f\u5bf9\u6e38\u620f\u7684\u5404\u4e2a\u90e8\u5206\u8fdb\u884c\"\u89e3\u8026\"\u3002", 
            "title": "\u603b\u7ed3"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb011-\u7c92\u5b50\u5149\u73af\u5236\u4f5c/", 
            "text": "\u5b66\u4e60\u7b14\u8bb011-\u7c92\u5b50\u5149\u73af\u5236\u4f5c\n\n\n\u8981\u6c42\n\n\n\u53c2\u8003 http://i-remember.fr/en \u8fd9\u7c7b\u7f51\u7ad9\uff0c\u4f7f\u7528\u7c92\u5b50\u6d41\u7f16\u7a0b\u63a7\u5236\u5236\u4f5c\u4e00\u4e9b\u6548\u679c\uff0c \u5982\u201c\u7c92\u5b50\u5149\u73af\u201d\n\n\n\u5b9e\u73b0\u6548\u679c\n\n\n\u6f14\u793a\u89c6\u9891\n\n\n\n\n\u5b9e\u73b0\u8fc7\u7a0b\n\n\n\u8bbe\u8ba1\u601d\u8def\n\n\n\u4ed4\u7ec6\u89c2\u5bdfI Remember\u7684\u7c92\u5b50\u5149\u73af\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u5176\u5b9e\u9645\u4e0a\u53ef\u4ee5\u5206\u6210\u8f83\u5bc6\u96c6\u7684\u4e00\u90e8\u5206\u4ee5\u53ca\u8f83\u4e3a\u7a00\u758f\u7684\u4e00\u90e8\u5206\uff0c\u800c\u5bc6\u96c6\u7684\u7a84\u73af\u662f\u6709\u4e00\u4e2a\u5bf9\u79f0\u7684\u7f3a\u53e3\u7684\u3002\u800c\u5176\u5149\u73af\u4f1a\u6839\u636e\u4e0d\u540c\u60c5\u51b5\u6536\u7f29\u3002\n\n\n\u6240\u4ee5\u6211\u4eec\u5728\u5904\u7406\u7684\u65f6\u5019\uff0c\u6211\u4eec\u5c06\u6211\u4eec\u7684Particle\u6570\u7ec4\u5206\u6210\u524d\u548c\u540e\u4e24\u90e8\u5206\u6765\u8fdb\u884c\u5904\u7406\u3002\n\n\nif\n(\ni\n \n \nparticleNum\n \n*\n \n1\n \n/\n \n2\n)\n \n{\n \n//\u5c06\u524d\u534a\u90e8\u5206\u7528\u4e8e\u8f83\u5bbd\u7684\u90a3\u4e2a\u73af \n\n    \n...\n\n\n}\n \nelse\n \n{\n \n//\u540e\u534a\u90e8\u5206\u7528\u4e8e\u7a84\u73af\n\n    \n...\n\n\n}\n\n\n\n\n\n\n\u6211\u4eec\u53ea\u9700\u63a7\u5236\u4e24\u90e8\u5206\u5206\u5e03\u7684\u534a\u5f84\u65e2\u53ef\u4ee5\u5b9e\u73b0\u5176\u5206\u5e03\u7a00\u758f\u4ee5\u53ca\u5bc6\u96c6\u3002\n\n\n\u90a3\u4e48\uff0c\u7a84\u73af\u7684\u8f83\u7a00\u758f\u7684\u7f3a\u53e3\u600e\u4e48\u505a\u5462\uff0c\u5176\u5b9e\u4e5f\u4e0d\u96be\uff0c\u53ea\u7528\u505a\u597dangle\u7684\u5206\u5e03\u5c31\u53ef\u4ee5\u4e86\uff0c\u4ee3\u7801\u5982\u4e0b\u3002\n\n\nif\n(\ni\n \n \nparticleNum\n \n*\n \n1\n \n/\n \n2\n)\n \n{\n \n//\u5c06\u524d\u534a\u90e8\u5206\u7528\u4e8e\u8f83\u5bbd\u7684\u90a3\u4e2a\u73af \n\n    \nmaxR\n \n=\n \noutMaxR\n;\n\n    \nminR\n \n=\n \noutMinR\n;\n\n    \nrandomAngle\n \n=\n \nRandom\n.\nRange\n(\n0.0f\n,\n \n360.0f\n);\n\n\n}\n \nelse\n \n{\n \n//\u540e\u534a\u90e8\u5206\u7528\u4e8e\u7a84\u73af,\u6839\u636eI Remember,\u7a84\u73af\u5e26\u7f3a\u53e3\uff0c\u56e0\u6b64\u6211\u4eec\u8bbe\u7f6e\u4e00\u534a\u54110\u5ea6\u96c6\u4e2d\u3001\u4e00\u534a\u5411180\u5ea6\u96c6\u4e2d\uff0c\u4f7f\u5f9790\u5ea6\u548c-90\u5ea6\u5f62\u6210\u4e24\u4e2a\u5bf9\u79f0\u7f3a\u53e3\n\n    \nmaxR\n \n=\n \ninMaxR\n;\n\n    \nminR\n \n=\n \ninMinR\n;\n\n    \nfloat\n \nminAngle\n \n=\n \nRandom\n.\nRange\n(-\n90f\n,\n \n0.0f\n);\n\n    \nfloat\n \nmaxAngle\n \n=\n \nRandom\n.\nRange\n(\n0.0f\n,\n \n90f\n);\n\n    \nfloat\n \nangle\n \n=\n \nRandom\n.\nRange\n(\nminAngle\n,\n \nmaxAngle\n);\n\n\n    \nrandomAngle\n \n=\n \ni\n \n%\n \n2\n \n==\n \n0\n \n?\n \nangle\n \n:\n \nangle\n \n-\n \n180\n;\n \n//\u5229\u7528\u5bf9\u79f0\u6765\u8bbe\u7f6e\u53e6\u4e00\u534a\u7c92\u5b50\n\n\n}\n\n\n\n\n\n\n\u4ee5\u4e0a\u65f6\u4e00\u4e9b\u57fa\u672c\u7684\u601d\u8def\u4e0b\u9762\u6211\u4eec\u8bf4\u8bf4\u53e6\u5916\u4e00\u4e9b\u5173\u952e\u7684\u90e8\u5206\n\n\n\u8bbe\u7f6e\u7c92\u5b50\u7684\u5404\u5c5e\u6027\n\n\n\n\n\u7c92\u5b50\u8f6c\u52a8\n\n\n\u8fd9\u90e8\u5206\u5c31\u662f\u901a\u8fc7\u7a84\u73af\uff0c\u5bbd\u73af\u8c03\u8282\u8f6c\u52a8(angle)\u53d8\u5316\u7684\u5e45\u5ea6\n\n\n// \u7a84\u73af\u8f6c\u52a8\u901f\u5ea6\u66f4\u5feb\n\n\nif\n \n(\ni\n \n \nparticleNum\n \n*\n \n1\n \n/\n \n2\n)\n\n    \nspeed\n \n=\n \n0.1f\n;\n\n\nelse\n\n    \nspeed\n \n=\n \n0.05f\n;\n\n\nposArray\n[\ni\n].\nangle\n \n-=\n  \nspeed\n;\n\n\nposArray\n[\ni\n].\nangle\n \n=\n \nposArray\n[\ni\n].\nangle\n \n%\n \n360\n;\n\n\n...\n \n\nparticleArray\n[\ni\n].\nposition\n \n=\n \nnew\n \nVector3\n(\nposArray\n[\ni\n].\ncur_r\n \n*\n \nMathf\n.\nCos\n(\nrad\n),\n \nposArray\n[\ni\n].\ncur_r\n \n*\n \nMathf\n.\nSin\n(\nrad\n),\n \n0f\n);\n\n\n\n\n\n\n\u7c92\u5b50\u7684\u7f29\u653e\n\n\n\u5f53\u7528\u6237\u70b9\u51fbChange\u6309\u94ae\u540e\uff0c\u6211\u4eec\u6839\u636eflag\u6765\u8bbe\u7f6e\u7c92\u5b50\u7684\u534a\u5f84\u6765\u63a7\u5236\u7c92\u5b50\u7684\"\u6536\u7f29\"\u3002\n\n\nif\n(\nflag\n \n==\n \n0\n)\n \n{\n \n//\u7c92\u5b50\u5411\u4e2d\u95f4\u6536\u7f29 \n\n    \nif\n \n(\nposArray\n[\ni\n].\ncur_r\n \n \nposArray\n[\ni\n].\ncombine_r\n \n+\n \n0.05f\n)\n \n{\n\n    \n//\u4e24\u5c42\u73af\u7684\u6536\u7f29\u901f\u5ea6\u4e0d\u540c\n\n    \nif\n(\ni\n \n \nparticleNum\n \n*\n \n1\n \n/\n \n2\n)\n\n        \nposArray\n[\ni\n].\ncur_r\n \n-=\n  \n2.0f\n \n*\n \nTime\n.\ndeltaTime\n;\n\n    \nelse\n\n        \nposArray\n[\ni\n].\ncur_r\n \n-=\n \nTime\n.\ndeltaTime\n;\n\n\n}\n \nelse\n \nif\n(\nposArray\n[\ni\n].\ncur_r\n \n \nposArray\n[\ni\n].\ncombine_r\n \n-\n \n0.05f\n)\n \n{\n\n    \nif\n \n(\ni\n \n \nparticleNum\n \n*\n \n1\n \n/\n \n2\n)\n\n        \nposArray\n[\ni\n].\ncur_r\n \n+=\n \n2.0f\n \n*\n \nTime\n.\ndeltaTime\n;\n\n    \nelse\n\n        \nposArray\n[\ni\n].\ncur_r\n \n+=\n \nTime\n.\ndeltaTime\n;\n\n    \n}\n\n\n}\n \nelse\n \nif\n(\nflag\n \n==\n \n1\n)\n \n{\n \n//\u7c92\u5b50\u8303\u56f4\u6269\u5927 \n\n    \nif\n \n(\nposArray\n[\ni\n].\ncur_r\n \n \nposArray\n[\ni\n].\nr\n \n-\n \n0.05f\n)\n \n{\n\n        \nif\n \n(\ni\n \n \nparticleNum\n \n*\n \n1\n \n/\n \n2\n)\n\n            \nposArray\n[\ni\n].\ncur_r\n \n+=\n \n2.0f\n \n*\n \nTime\n.\ndeltaTime\n;\n\n        \nelse\n\n            \nposArray\n[\ni\n].\ncur_r\n \n+=\n \nTime\n.\ndeltaTime\n;\n\n    \n}\n \nelse\n \nif\n \n(\nposArray\n[\ni\n].\ncur_r\n \n \nposArray\n[\ni\n].\nr\n \n+\n \n0.05f\n)\n \n{\n\n        \nif\n \n(\ni\n \n \nparticleNum\n \n*\n \n1\n \n/\n \n2\n)\n\n            \nposArray\n[\ni\n].\ncur_r\n \n-=\n \n2.0f\n*\n \nTime\n.\ndeltaTime\n;\n\n        \nelse\n\n            \nposArray\n[\ni\n].\ncur_r\n \n-=\n \nTime\n.\ndeltaTime\n;\n\n        \n}\n\n\n}\n\n\n\n\n\n\n\u5b8c\u6574\u4ee3\u7801\n\n\npublic\n \nclass\n \nRingOfParticle\n \n:\n \nMonoBehaviour\n \n{\n\n    \npublic\n \nclass\n \nparticlePos\n \n{\n\n        \npublic\n \nfloat\n \nr\n \n=\n \n0.0f\n;\n \n//\u521d\u59cb\u5316\u534a\u5f84\n\n        \npublic\n \nfloat\n \ncombine_r\n \n=\n \n0.0f\n;\n \n//\u96c6\u5408\u540e\u7684\u534a\u5f84\n\n        \npublic\n \nfloat\n \ncur_r\n \n=\n \n0.0f\n;\n \n//\u8bb0\u5f55\u7c92\u5b50\u5f53\u524d\u65f6\u523b\u534a\u5f84\n\n        \npublic\n \nfloat\n \nangle\n \n=\n \n0.0f\n;\n\n\n        \npublic\n \nparticlePos\n(\nfloat\n \nradiu\n,\n \nfloat\n \nangle\n,\n \nfloat\n \ncombine\n)\n \n{\n\n            \nr\n \n=\n \nradiu\n;\n\n            \nthis\n.\nangle\n \n=\n \nangle\n;\n\n            \ncombine_r\n \n=\n \ncombine\n;\n\n            \ncur_r\n \n=\n \nradiu\n;\n\n        \n}\n\n    \n}\n\n\n    \npublic\n \nParticleSystem\n \nparticleSystem\n;\n\n    \npublic\n \nint\n \nparticleNum\n \n=\n \n10000\n;\n\n    \npublic\n \nfloat\n \noutMinR\n \n=\n \n5.0f\n;\n\n    \npublic\n \nfloat\n \noutMaxR\n \n=\n \n10.0f\n;\n\n    \npublic\n \nfloat\n \ninMinR\n \n=\n \n6.0f\n;\n\n    \npublic\n \nfloat\n \ninMaxR\n \n=\n \n9.0f\n;\n\n\n    \npublic\n \nfloat\n \nspeed\n \n=\n \n0.1f\n;\n\n\n    \npublic\n \nint\n \nflag\n;\n\n\n\n    \nprivate\n \nParticleSystem\n.\nParticle\n[]\n \nparticleArray\n;\n\n    \nprivate\n \nparticlePos\n[]\n \nposArray\n;\n\n\n    \nvoid\n \nOnGUI\n()\n \n{\n\n        \nif\n \n(\nGUI\n.\nButton\n(\nnew\n \nRect\n(\n0\n,\n \n15\n,\n \n100\n,\n \n30\n),\n \nChange\n))\n \n{\n\n            \nflag\n \n=\n \n(\nflag\n \n==\n \n-\n1\n)?\n \n0\n:\n \n1\n \n-\n \nflag\n;\n\n        \n}\n\n    \n}\n\n\n    \n// Use this for initialization\n\n    \nvoid\n \nStart\n \n()\n \n{\n\n        \nflag\n \n=\n \n-\n1\n;\n\n        \nposArray\n \n=\n \nnew\n \nparticlePos\n[\nparticleNum\n];\n\n        \nparticleArray\n \n=\n \nnew\n \nParticleSystem\n.\nParticle\n[\nparticleNum\n];\n\n        \nparticleSystem\n.\nmaxParticles\n \n=\n \nparticleNum\n;\n\n        \nparticleSystem\n.\nEmit\n(\nparticleNum\n);\n\n        \nparticleSystem\n.\nGetParticles\n(\nparticleArray\n);\n\n\n        \nfor\n \n(\nint\n \ni\n \n=\n \n0\n;\n \ni\n \n \nparticleNum\n;\n \ni\n++)\n \n{\n   \n            \nfloat\n \nrandomAngle\n;\n \n// \u8bbe\u7f6e\u7c92\u5b50\u7684\u968f\u673a\u89d2\u5ea6\n\n            \nfloat\n \nmaxR\n,\n \nminR\n;\n \n// \u6700\u5927\u6700\u5c0f\u534a\u5f84\u4f9b\u968f\u673a\n\n\n            \nif\n(\ni\n \n \nparticleNum\n \n*\n \n1\n \n/\n \n2\n)\n \n{\n \n//\u5c06\u524d\u534a\u90e8\u5206\u7528\u4e8e\u8f83\u5bbd\u7684\u90a3\u4e2a\u73af \n\n                \nmaxR\n \n=\n \noutMaxR\n;\n\n                \nminR\n \n=\n \noutMinR\n;\n\n                \nrandomAngle\n \n=\n \nRandom\n.\nRange\n(\n0.0f\n,\n \n360.0f\n);\n\n            \n}\n \nelse\n \n{\n \n//\u540e\u534a\u90e8\u5206\u7528\u4e8e\u7a84\u73af,\u6839\u636eI Remember,\u7a84\u73af\u5e26\u7f3a\u53e3\uff0c\u56e0\u6b64\u6211\u4eec\u8bbe\u7f6e\u4e00\u534a\u54110\u5ea6\u96c6\u4e2d\u3001\u4e00\u534a\u5411180\u5ea6\u96c6\u4e2d\uff0c\u4f7f\u5f9790\u5ea6\u548c-90\u5ea6\u5f62\u6210\u4e24\u4e2a\u5bf9\u79f0\u7f3a\u53e3\n\n                \nmaxR\n \n=\n \ninMaxR\n;\n\n                \nminR\n \n=\n \ninMinR\n;\n\n                \nfloat\n \nminAngle\n \n=\n \nRandom\n.\nRange\n(-\n90f\n,\n \n0.0f\n);\n\n                \nfloat\n \nmaxAngle\n \n=\n \nRandom\n.\nRange\n(\n0.0f\n,\n \n90f\n);\n\n                \nfloat\n \nangle\n \n=\n \nRandom\n.\nRange\n(\nminAngle\n,\n \nmaxAngle\n);\n\n\n                \nrandomAngle\n \n=\n \ni\n \n%\n \n2\n \n==\n \n0\n \n?\n \nangle\n \n:\n \nangle\n \n-\n \n180\n;\n \n//\u5229\u7528\u5bf9\u79f0\u6765\u8bbe\u7f6e\u53e6\u4e00\u534a\u7c92\u5b50\n\n            \n}\n\n\n            \nfloat\n \nmidRadius\n \n=\n \n(\nmaxR\n \n+\n \nminR\n)\n \n/\n \n2\n;\n\n            \nfloat\n \nmin\n \n=\n \nRandom\n.\nRange\n(\nminR\n,\n \nmidRadius\n);\n\n            \nfloat\n \nmax\n \n=\n \nRandom\n.\nRange\n(\nmidRadius\n,\n \nmaxR\n);\n\n            \nfloat\n \nrandomRadius\n \n=\n \nRandom\n.\nRange\n(\nmin\n,\n \nmax\n);\n\n            \nfloat\n \ncombineRadius\n;\n\n\n            \n// \u5e73\u5747\u534a\u5f84\u4ee5\u5916\u7684\u7c92\u5b50\u96c6\u5408\u534a\u5f84\u8c03\u5c0f\uff0c\u4f7f\u7f29\u5c0f\u65f6\u79fb\u52a8\u7684\u8ddd\u79bb\u5c11\u4e00\u4e9b\n\n            \nif\n \n(\nrandomRadius\n \n \nmidRadius\n)\n\n                \ncombineRadius\n \n=\n \nrandomRadius\n \n-\n \n(\nrandomRadius\n \n-\n \nmidRadius\n)\n \n/\n \n2\n;\n\n            \nelse\n\n                \ncombineRadius\n \n=\n \nrandomRadius\n \n-\n \n(\nrandomRadius\n \n-\n \nmidRadius\n)\n \n*\n \n3\n \n/\n \n4\n;\n\n\n            \n// \u8bbe\u7f6e\u7c92\u5b50\u7684\u5c5e\u6027\n\n            \nposArray\n[\ni\n]\n \n=\n \nnew\n \nparticlePos\n(\nrandomRadius\n,\n \nrandomAngle\n,\n \ncombineRadius\n);\n\n            \nparticleArray\n[\ni\n].\nposition\n \n=\n \nnew\n \nVector3\n(\nrandomRadius\n \n*\n \nMathf\n.\nCos\n(\nrandomAngle\n),\n \nrandomRadius\n \n*\n \nMathf\n.\nSin\n(\nrandomAngle\n),\n \n0.0f\n);\n\n        \n}\n\n        \nparticleSystem\n.\nSetParticles\n(\nparticleArray\n,\n \nparticleNum\n);\n\n    \n}\n\n\n    \n// Update is called once per frame\n\n    \nvoid\n \nUpdate\n \n()\n \n{\n\n        \nfor\n \n(\nint\n \ni\n \n=\n \n0\n;\n \ni\n \n \nparticleNum\n;\n \ni\n++)\n\n        \n{\n\n            \n// \u5c0f\u5708\u8f6c\u52a8\u901f\u5ea6\u66f4\u5feb\n\n            \nif\n \n(\ni\n \n \nparticleNum\n \n*\n \n1\n \n/\n \n2\n)\n\n                \nspeed\n \n=\n \n0.1f\n;\n\n            \nelse\n\n                \nspeed\n \n=\n \n0.05f\n;\n\n            \nposArray\n[\ni\n].\nangle\n \n-=\n  \nspeed\n;\n\n            \nposArray\n[\ni\n].\nangle\n \n=\n \nposArray\n[\ni\n].\nangle\n \n%\n \n360\n;\n\n            \nfloat\n \nrad\n \n=\n \nposArray\n[\ni\n].\nangle\n \n/\n \n180\n \n*\n \nMathf\n.\nPI\n;\n\n\n            \n// \u6839\u636eflag, \u5224\u65ad\u7c92\u5b50\u7684\u52a8\u6001\uff0c\u6539\u53d8\u7c92\u5b50\u7684\u73b0\u5728\u7684\u534a\u5f84\n\n            \nif\n(\nflag\n \n==\n \n0\n)\n \n{\n \n//\u7c92\u5b50\u5411\u4e2d\u95f4\u6536\u7f29 \n\n                \nif\n \n(\nposArray\n[\ni\n].\ncur_r\n \n \nposArray\n[\ni\n].\ncombine_r\n \n+\n \n0.05f\n)\n \n{\n\n                    \n//\u4e24\u5c42\u73af\u7684\u6536\u7f29\u901f\u5ea6\u4e0d\u540c\n\n                    \nif\n(\ni\n \n \nparticleNum\n \n*\n \n1\n \n/\n \n2\n)\n\n                        \nposArray\n[\ni\n].\ncur_r\n \n-=\n  \n2.0f\n \n*\n \nTime\n.\ndeltaTime\n;\n\n                    \nelse\n\n                        \nposArray\n[\ni\n].\ncur_r\n \n-=\n \nTime\n.\ndeltaTime\n;\n\n                \n}\n \nelse\n \nif\n(\nposArray\n[\ni\n].\ncur_r\n \n \nposArray\n[\ni\n].\ncombine_r\n \n-\n \n0.05f\n)\n \n{\n\n                    \nif\n \n(\ni\n \n \nparticleNum\n \n*\n \n1\n \n/\n \n2\n)\n\n                        \nposArray\n[\ni\n].\ncur_r\n \n+=\n \n2.0f\n \n*\n \nTime\n.\ndeltaTime\n;\n\n                    \nelse\n\n                        \nposArray\n[\ni\n].\ncur_r\n \n+=\n \nTime\n.\ndeltaTime\n;\n\n                \n}\n\n            \n}\n \nelse\n \nif\n(\nflag\n \n==\n \n1\n)\n \n{\n \n//\u7c92\u5b50\u8303\u56f4\u6269\u5927 \n\n                \nif\n \n(\nposArray\n[\ni\n].\ncur_r\n \n \nposArray\n[\ni\n].\nr\n \n-\n \n0.05f\n)\n \n{\n\n                    \nif\n \n(\ni\n \n \nparticleNum\n \n*\n \n1\n \n/\n \n2\n)\n\n                        \nposArray\n[\ni\n].\ncur_r\n \n+=\n \n2.0f\n \n*\n \nTime\n.\ndeltaTime\n;\n\n                    \nelse\n\n                        \nposArray\n[\ni\n].\ncur_r\n \n+=\n \nTime\n.\ndeltaTime\n;\n\n                \n}\n \nelse\n \nif\n \n(\nposArray\n[\ni\n].\ncur_r\n \n \nposArray\n[\ni\n].\nr\n \n+\n \n0.05f\n)\n \n{\n\n                    \nif\n \n(\ni\n \n \nparticleNum\n \n*\n \n1\n \n/\n \n2\n)\n\n                        \nposArray\n[\ni\n].\ncur_r\n \n-=\n \n2.0f\n*\n \nTime\n.\ndeltaTime\n;\n\n                    \nelse\n\n                        \nposArray\n[\ni\n].\ncur_r\n \n-=\n \nTime\n.\ndeltaTime\n;\n\n                \n}\n\n            \n}\n\n\n            \n// \u901a\u8fc7curR\u548c\u65b0\u7684\u89d2\u5ea6\u8bbe\u7f6e\u7c92\u5b50\u7684\u4f4d\u7f6e\n\n            \nparticleArray\n[\ni\n].\nposition\n \n=\n \nnew\n \nVector3\n(\nposArray\n[\ni\n].\ncur_r\n \n*\n \nMathf\n.\nCos\n(\nrad\n),\n \nposArray\n[\ni\n].\ncur_r\n \n*\n \nMathf\n.\nSin\n(\nrad\n),\n \n0f\n);\n\n        \n}\n\n        \nparticleSystem\n.\nSetParticles\n(\nparticleArray\n,\n \nparticleNum\n);\n\n    \n}\n\n\n}", 
            "title": "\u5b66\u4e60\u7b14\u8bb011-\u7c92\u5b50\u5149\u73af\u5236\u4f5c"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb011-\u7c92\u5b50\u5149\u73af\u5236\u4f5c/#11-", 
            "text": "", 
            "title": "\u5b66\u4e60\u7b14\u8bb011-\u7c92\u5b50\u5149\u73af\u5236\u4f5c"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb011-\u7c92\u5b50\u5149\u73af\u5236\u4f5c/#_1", 
            "text": "\u53c2\u8003 http://i-remember.fr/en \u8fd9\u7c7b\u7f51\u7ad9\uff0c\u4f7f\u7528\u7c92\u5b50\u6d41\u7f16\u7a0b\u63a7\u5236\u5236\u4f5c\u4e00\u4e9b\u6548\u679c\uff0c \u5982\u201c\u7c92\u5b50\u5149\u73af\u201d", 
            "title": "\u8981\u6c42"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb011-\u7c92\u5b50\u5149\u73af\u5236\u4f5c/#_2", 
            "text": "\u6f14\u793a\u89c6\u9891", 
            "title": "\u5b9e\u73b0\u6548\u679c"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb011-\u7c92\u5b50\u5149\u73af\u5236\u4f5c/#_3", 
            "text": "", 
            "title": "\u5b9e\u73b0\u8fc7\u7a0b"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb011-\u7c92\u5b50\u5149\u73af\u5236\u4f5c/#_4", 
            "text": "\u4ed4\u7ec6\u89c2\u5bdfI Remember\u7684\u7c92\u5b50\u5149\u73af\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u5176\u5b9e\u9645\u4e0a\u53ef\u4ee5\u5206\u6210\u8f83\u5bc6\u96c6\u7684\u4e00\u90e8\u5206\u4ee5\u53ca\u8f83\u4e3a\u7a00\u758f\u7684\u4e00\u90e8\u5206\uff0c\u800c\u5bc6\u96c6\u7684\u7a84\u73af\u662f\u6709\u4e00\u4e2a\u5bf9\u79f0\u7684\u7f3a\u53e3\u7684\u3002\u800c\u5176\u5149\u73af\u4f1a\u6839\u636e\u4e0d\u540c\u60c5\u51b5\u6536\u7f29\u3002  \u6240\u4ee5\u6211\u4eec\u5728\u5904\u7406\u7684\u65f6\u5019\uff0c\u6211\u4eec\u5c06\u6211\u4eec\u7684Particle\u6570\u7ec4\u5206\u6210\u524d\u548c\u540e\u4e24\u90e8\u5206\u6765\u8fdb\u884c\u5904\u7406\u3002  if ( i     particleNum   *   1   /   2 )   {   //\u5c06\u524d\u534a\u90e8\u5206\u7528\u4e8e\u8f83\u5bbd\u7684\u90a3\u4e2a\u73af  \n     ...  }   else   {   //\u540e\u534a\u90e8\u5206\u7528\u4e8e\u7a84\u73af \n     ...  }   \u6211\u4eec\u53ea\u9700\u63a7\u5236\u4e24\u90e8\u5206\u5206\u5e03\u7684\u534a\u5f84\u65e2\u53ef\u4ee5\u5b9e\u73b0\u5176\u5206\u5e03\u7a00\u758f\u4ee5\u53ca\u5bc6\u96c6\u3002  \u90a3\u4e48\uff0c\u7a84\u73af\u7684\u8f83\u7a00\u758f\u7684\u7f3a\u53e3\u600e\u4e48\u505a\u5462\uff0c\u5176\u5b9e\u4e5f\u4e0d\u96be\uff0c\u53ea\u7528\u505a\u597dangle\u7684\u5206\u5e03\u5c31\u53ef\u4ee5\u4e86\uff0c\u4ee3\u7801\u5982\u4e0b\u3002  if ( i     particleNum   *   1   /   2 )   {   //\u5c06\u524d\u534a\u90e8\u5206\u7528\u4e8e\u8f83\u5bbd\u7684\u90a3\u4e2a\u73af  \n     maxR   =   outMaxR ; \n     minR   =   outMinR ; \n     randomAngle   =   Random . Range ( 0.0f ,   360.0f );  }   else   {   //\u540e\u534a\u90e8\u5206\u7528\u4e8e\u7a84\u73af,\u6839\u636eI Remember,\u7a84\u73af\u5e26\u7f3a\u53e3\uff0c\u56e0\u6b64\u6211\u4eec\u8bbe\u7f6e\u4e00\u534a\u54110\u5ea6\u96c6\u4e2d\u3001\u4e00\u534a\u5411180\u5ea6\u96c6\u4e2d\uff0c\u4f7f\u5f9790\u5ea6\u548c-90\u5ea6\u5f62\u6210\u4e24\u4e2a\u5bf9\u79f0\u7f3a\u53e3 \n     maxR   =   inMaxR ; \n     minR   =   inMinR ; \n     float   minAngle   =   Random . Range (- 90f ,   0.0f ); \n     float   maxAngle   =   Random . Range ( 0.0f ,   90f ); \n     float   angle   =   Random . Range ( minAngle ,   maxAngle ); \n\n     randomAngle   =   i   %   2   ==   0   ?   angle   :   angle   -   180 ;   //\u5229\u7528\u5bf9\u79f0\u6765\u8bbe\u7f6e\u53e6\u4e00\u534a\u7c92\u5b50  }   \u4ee5\u4e0a\u65f6\u4e00\u4e9b\u57fa\u672c\u7684\u601d\u8def\u4e0b\u9762\u6211\u4eec\u8bf4\u8bf4\u53e6\u5916\u4e00\u4e9b\u5173\u952e\u7684\u90e8\u5206", 
            "title": "\u8bbe\u8ba1\u601d\u8def"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb011-\u7c92\u5b50\u5149\u73af\u5236\u4f5c/#_5", 
            "text": "", 
            "title": "\u8bbe\u7f6e\u7c92\u5b50\u7684\u5404\u5c5e\u6027"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb011-\u7c92\u5b50\u5149\u73af\u5236\u4f5c/#_6", 
            "text": "\u8fd9\u90e8\u5206\u5c31\u662f\u901a\u8fc7\u7a84\u73af\uff0c\u5bbd\u73af\u8c03\u8282\u8f6c\u52a8(angle)\u53d8\u5316\u7684\u5e45\u5ea6  // \u7a84\u73af\u8f6c\u52a8\u901f\u5ea6\u66f4\u5feb  if   ( i     particleNum   *   1   /   2 ) \n     speed   =   0.1f ;  else \n     speed   =   0.05f ;  posArray [ i ]. angle   -=    speed ;  posArray [ i ]. angle   =   posArray [ i ]. angle   %   360 ;  ...   particleArray [ i ]. position   =   new   Vector3 ( posArray [ i ]. cur_r   *   Mathf . Cos ( rad ),   posArray [ i ]. cur_r   *   Mathf . Sin ( rad ),   0f );", 
            "title": "\u7c92\u5b50\u8f6c\u52a8"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb011-\u7c92\u5b50\u5149\u73af\u5236\u4f5c/#_7", 
            "text": "\u5f53\u7528\u6237\u70b9\u51fbChange\u6309\u94ae\u540e\uff0c\u6211\u4eec\u6839\u636eflag\u6765\u8bbe\u7f6e\u7c92\u5b50\u7684\u534a\u5f84\u6765\u63a7\u5236\u7c92\u5b50\u7684\"\u6536\u7f29\"\u3002  if ( flag   ==   0 )   {   //\u7c92\u5b50\u5411\u4e2d\u95f4\u6536\u7f29  \n     if   ( posArray [ i ]. cur_r     posArray [ i ]. combine_r   +   0.05f )   { \n     //\u4e24\u5c42\u73af\u7684\u6536\u7f29\u901f\u5ea6\u4e0d\u540c \n     if ( i     particleNum   *   1   /   2 ) \n         posArray [ i ]. cur_r   -=    2.0f   *   Time . deltaTime ; \n     else \n         posArray [ i ]. cur_r   -=   Time . deltaTime ;  }   else   if ( posArray [ i ]. cur_r     posArray [ i ]. combine_r   -   0.05f )   { \n     if   ( i     particleNum   *   1   /   2 ) \n         posArray [ i ]. cur_r   +=   2.0f   *   Time . deltaTime ; \n     else \n         posArray [ i ]. cur_r   +=   Time . deltaTime ; \n     }  }   else   if ( flag   ==   1 )   {   //\u7c92\u5b50\u8303\u56f4\u6269\u5927  \n     if   ( posArray [ i ]. cur_r     posArray [ i ]. r   -   0.05f )   { \n         if   ( i     particleNum   *   1   /   2 ) \n             posArray [ i ]. cur_r   +=   2.0f   *   Time . deltaTime ; \n         else \n             posArray [ i ]. cur_r   +=   Time . deltaTime ; \n     }   else   if   ( posArray [ i ]. cur_r     posArray [ i ]. r   +   0.05f )   { \n         if   ( i     particleNum   *   1   /   2 ) \n             posArray [ i ]. cur_r   -=   2.0f *   Time . deltaTime ; \n         else \n             posArray [ i ]. cur_r   -=   Time . deltaTime ; \n         }  }", 
            "title": "\u7c92\u5b50\u7684\u7f29\u653e"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb011-\u7c92\u5b50\u5149\u73af\u5236\u4f5c/#_8", 
            "text": "public   class   RingOfParticle   :   MonoBehaviour   { \n     public   class   particlePos   { \n         public   float   r   =   0.0f ;   //\u521d\u59cb\u5316\u534a\u5f84 \n         public   float   combine_r   =   0.0f ;   //\u96c6\u5408\u540e\u7684\u534a\u5f84 \n         public   float   cur_r   =   0.0f ;   //\u8bb0\u5f55\u7c92\u5b50\u5f53\u524d\u65f6\u523b\u534a\u5f84 \n         public   float   angle   =   0.0f ; \n\n         public   particlePos ( float   radiu ,   float   angle ,   float   combine )   { \n             r   =   radiu ; \n             this . angle   =   angle ; \n             combine_r   =   combine ; \n             cur_r   =   radiu ; \n         } \n     } \n\n     public   ParticleSystem   particleSystem ; \n     public   int   particleNum   =   10000 ; \n     public   float   outMinR   =   5.0f ; \n     public   float   outMaxR   =   10.0f ; \n     public   float   inMinR   =   6.0f ; \n     public   float   inMaxR   =   9.0f ; \n\n     public   float   speed   =   0.1f ; \n\n     public   int   flag ; \n\n\n     private   ParticleSystem . Particle []   particleArray ; \n     private   particlePos []   posArray ; \n\n     void   OnGUI ()   { \n         if   ( GUI . Button ( new   Rect ( 0 ,   15 ,   100 ,   30 ),   Change ))   { \n             flag   =   ( flag   ==   - 1 )?   0 :   1   -   flag ; \n         } \n     } \n\n     // Use this for initialization \n     void   Start   ()   { \n         flag   =   - 1 ; \n         posArray   =   new   particlePos [ particleNum ]; \n         particleArray   =   new   ParticleSystem . Particle [ particleNum ]; \n         particleSystem . maxParticles   =   particleNum ; \n         particleSystem . Emit ( particleNum ); \n         particleSystem . GetParticles ( particleArray ); \n\n         for   ( int   i   =   0 ;   i     particleNum ;   i ++)   {    \n             float   randomAngle ;   // \u8bbe\u7f6e\u7c92\u5b50\u7684\u968f\u673a\u89d2\u5ea6 \n             float   maxR ,   minR ;   // \u6700\u5927\u6700\u5c0f\u534a\u5f84\u4f9b\u968f\u673a \n\n             if ( i     particleNum   *   1   /   2 )   {   //\u5c06\u524d\u534a\u90e8\u5206\u7528\u4e8e\u8f83\u5bbd\u7684\u90a3\u4e2a\u73af  \n                 maxR   =   outMaxR ; \n                 minR   =   outMinR ; \n                 randomAngle   =   Random . Range ( 0.0f ,   360.0f ); \n             }   else   {   //\u540e\u534a\u90e8\u5206\u7528\u4e8e\u7a84\u73af,\u6839\u636eI Remember,\u7a84\u73af\u5e26\u7f3a\u53e3\uff0c\u56e0\u6b64\u6211\u4eec\u8bbe\u7f6e\u4e00\u534a\u54110\u5ea6\u96c6\u4e2d\u3001\u4e00\u534a\u5411180\u5ea6\u96c6\u4e2d\uff0c\u4f7f\u5f9790\u5ea6\u548c-90\u5ea6\u5f62\u6210\u4e24\u4e2a\u5bf9\u79f0\u7f3a\u53e3 \n                 maxR   =   inMaxR ; \n                 minR   =   inMinR ; \n                 float   minAngle   =   Random . Range (- 90f ,   0.0f ); \n                 float   maxAngle   =   Random . Range ( 0.0f ,   90f ); \n                 float   angle   =   Random . Range ( minAngle ,   maxAngle ); \n\n                 randomAngle   =   i   %   2   ==   0   ?   angle   :   angle   -   180 ;   //\u5229\u7528\u5bf9\u79f0\u6765\u8bbe\u7f6e\u53e6\u4e00\u534a\u7c92\u5b50 \n             } \n\n             float   midRadius   =   ( maxR   +   minR )   /   2 ; \n             float   min   =   Random . Range ( minR ,   midRadius ); \n             float   max   =   Random . Range ( midRadius ,   maxR ); \n             float   randomRadius   =   Random . Range ( min ,   max ); \n             float   combineRadius ; \n\n             // \u5e73\u5747\u534a\u5f84\u4ee5\u5916\u7684\u7c92\u5b50\u96c6\u5408\u534a\u5f84\u8c03\u5c0f\uff0c\u4f7f\u7f29\u5c0f\u65f6\u79fb\u52a8\u7684\u8ddd\u79bb\u5c11\u4e00\u4e9b \n             if   ( randomRadius     midRadius ) \n                 combineRadius   =   randomRadius   -   ( randomRadius   -   midRadius )   /   2 ; \n             else \n                 combineRadius   =   randomRadius   -   ( randomRadius   -   midRadius )   *   3   /   4 ; \n\n             // \u8bbe\u7f6e\u7c92\u5b50\u7684\u5c5e\u6027 \n             posArray [ i ]   =   new   particlePos ( randomRadius ,   randomAngle ,   combineRadius ); \n             particleArray [ i ]. position   =   new   Vector3 ( randomRadius   *   Mathf . Cos ( randomAngle ),   randomRadius   *   Mathf . Sin ( randomAngle ),   0.0f ); \n         } \n         particleSystem . SetParticles ( particleArray ,   particleNum ); \n     } \n\n     // Update is called once per frame \n     void   Update   ()   { \n         for   ( int   i   =   0 ;   i     particleNum ;   i ++) \n         { \n             // \u5c0f\u5708\u8f6c\u52a8\u901f\u5ea6\u66f4\u5feb \n             if   ( i     particleNum   *   1   /   2 ) \n                 speed   =   0.1f ; \n             else \n                 speed   =   0.05f ; \n             posArray [ i ]. angle   -=    speed ; \n             posArray [ i ]. angle   =   posArray [ i ]. angle   %   360 ; \n             float   rad   =   posArray [ i ]. angle   /   180   *   Mathf . PI ; \n\n             // \u6839\u636eflag, \u5224\u65ad\u7c92\u5b50\u7684\u52a8\u6001\uff0c\u6539\u53d8\u7c92\u5b50\u7684\u73b0\u5728\u7684\u534a\u5f84 \n             if ( flag   ==   0 )   {   //\u7c92\u5b50\u5411\u4e2d\u95f4\u6536\u7f29  \n                 if   ( posArray [ i ]. cur_r     posArray [ i ]. combine_r   +   0.05f )   { \n                     //\u4e24\u5c42\u73af\u7684\u6536\u7f29\u901f\u5ea6\u4e0d\u540c \n                     if ( i     particleNum   *   1   /   2 ) \n                         posArray [ i ]. cur_r   -=    2.0f   *   Time . deltaTime ; \n                     else \n                         posArray [ i ]. cur_r   -=   Time . deltaTime ; \n                 }   else   if ( posArray [ i ]. cur_r     posArray [ i ]. combine_r   -   0.05f )   { \n                     if   ( i     particleNum   *   1   /   2 ) \n                         posArray [ i ]. cur_r   +=   2.0f   *   Time . deltaTime ; \n                     else \n                         posArray [ i ]. cur_r   +=   Time . deltaTime ; \n                 } \n             }   else   if ( flag   ==   1 )   {   //\u7c92\u5b50\u8303\u56f4\u6269\u5927  \n                 if   ( posArray [ i ]. cur_r     posArray [ i ]. r   -   0.05f )   { \n                     if   ( i     particleNum   *   1   /   2 ) \n                         posArray [ i ]. cur_r   +=   2.0f   *   Time . deltaTime ; \n                     else \n                         posArray [ i ]. cur_r   +=   Time . deltaTime ; \n                 }   else   if   ( posArray [ i ]. cur_r     posArray [ i ]. r   +   0.05f )   { \n                     if   ( i     particleNum   *   1   /   2 ) \n                         posArray [ i ]. cur_r   -=   2.0f *   Time . deltaTime ; \n                     else \n                         posArray [ i ]. cur_r   -=   Time . deltaTime ; \n                 } \n             } \n\n             // \u901a\u8fc7curR\u548c\u65b0\u7684\u89d2\u5ea6\u8bbe\u7f6e\u7c92\u5b50\u7684\u4f4d\u7f6e \n             particleArray [ i ]. position   =   new   Vector3 ( posArray [ i ]. cur_r   *   Mathf . Cos ( rad ),   posArray [ i ]. cur_r   *   Mathf . Sin ( rad ),   0f ); \n         } \n         particleSystem . SetParticles ( particleArray ,   particleNum ); \n     }  }", 
            "title": "\u5b8c\u6574\u4ee3\u7801"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb012-\u53ef\u5c55\u5f00\u516c\u544a\u7248/", 
            "text": "\u5b66\u4e60\u7b14\u8bb012-\u53ef\u5c55\u5f00\u516c\u544a\u7248\n\n\n\u4f5c\u4e1a\u7d20\u6750\n\n\n\u516c\u544a\u7248\n\n\nSampleUI\n\u4e2d\u7684\u90e8\u5206\u8d34\u56fe\n\n\n\u5b8c\u6210\u6548\u679c\n\n\n\n\n\u5b9e\u73b0\u8fc7\u7a0b\n\n\n\u5728\u8fd9\u6b21\u7684\u4f5c\u4e1a\u4e2d\uff0c\u6211\u7528\u5230\u4e86\u8bfe\u4e0a\u63d0\u4f9b\u7684SampleUI\u7684\u8d44\u6e90\u5305\u91cc\u7684\u90e8\u5206\u8d34\u56fe\n\n\n\u9996\u5148\uff0c\u6211\u4eec\u8fdb\u884c\u6211\u4eec\u57fa\u672c\u7684UI\u6784\u5efa,\u6211\u4eec\u5148\u521b\u5efa\u4e00\u4e2aScrollView, \u7ed9Canvas\u52a0\u5165\u6211\u4eec\u7684Background(Image)\uff0c\u800c\u56fe\u4e2d\u6548\u679c\u7684\u5b9e\u73b0\u6211\u8fd8\u7528\u4e86\u4e00\u4e2aMenuImage(Image),\u76f4\u63a5\u628aSF Window\u4f5c\u4e3aScrollView\u7684Image\u662f\u8fbe\u4e0d\u5230\u4e0a\u9762\u7684\u6548\u679c\u7684\uff0c\u6240\u4ee5\u6211\u901a\u8fc7\u589e\u52a0\u4e00\u4e2aImage,\u628aScrollView\u5305\u5728\u91cc\u9762\u4ee5\u5b9e\u73b0\u4ee5\u4e0a\u6548\u679c\uff0c\u5b8c\u6210\u4e86\u8fd9\u4e2a\u4ee5\u540e\uff0c\u6211\u4eec\u4e5f\u7ed9\u6211\u4eec\u7684Scrollbar\u52a0\u4e0a\u76f8\u5e94\u7684\u8d34\u56fe\uff0c\u8fd9\u65f6\u5019\u6574\u4e2a\u6548\u679c\u5982\u4e0b\n\n\n\u5230\u8fd9\u4e00\u6b65\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u7ed9ScrollView\u7684Content\u52a0\u4e0a\u76f8\u5e94\u7684\u5185\u5bb9\u4e86\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u7ed9Content\u52a0\u4e00\u4e2aVerticalLayoutGroup\u5b9e\u73b0\u6211\u4eecContent\u7684\u81ea\u52a8\u5e03\u5c40\uff0c\u8fd9\u6837\u6211\u4eec\u53ea\u9700\u8981\u628aGameObject\u6dfb\u52a0\u5230Content\u91cc\uff0c\u5b83\u5c31\u4f1a\u81ea\u52a8\u5e2e\u6211\u4eec\u5b8c\u6210\u5e03\u5c40\uff0c\u65e0\u9700\u518d\u81ea\u5df1\u53bb\u8c03\u8282\n\u6211\u4eec\u52a0\u5165\u6211\u4eec\u7684Button\u548cText, \u7ed3\u679c\u5982\u4e0b\n\n\n\n\n\u90a3\u4e48\u6211\u4eec\u5982\u4f55\u5b9e\u73b0\u6211\u4eecText\u7684\u5c55\u5f00\u5462\uff0c\u5728\u8fd9\u91cc\uff0c\u56e0\u4e3a\u6211\u4eec\u4f7f\u7528\u4e86VerticalLayoutGroup,\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u8c03\u8282Text\u7684Size(Height)\u5b8c\u6210Text\u7684\u6536\u7f29\uff0c\u7406\u89e3\u4e86\u8fd9\u4e00\u70b9\u5c31\u597d\u529e\u4e86\uff0c\u6211\u8fd9\u91cc\u7528\u7684\u662f\u6211\u4eec\u4e4b\u524d\u5b66\u8fc7\u7684\u52a8\u753b\u3002\u901a\u8fc7\u52a8\u753b\u8c03\u8282Text\u7684Size\uff0c\u6211\u4eec\u5373\u53ef\u5b8c\u6210\u6536\u7f29\u5c55\u5f00\u7684\u52a8\u753b\uff0c\u8fd9\u91cc\u52a8\u753b\u7684\u5236\u4f5c\u5341\u5206\u7b80\u5355\uff0c\u4e0d\u591a\u8d58\u8ff0\n\n\n\u90a3\u4e48\u6211\u4eec\u5982\u4f55\u4f7f\u7528\u8fd9\u4e2a\u52a8\u753b\u5462\uff0c\u5176\u5b9e\u4e5f\u5341\u5206\u7b80\u5355\u3002\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u521b\u5efaAnimator\u7136\u540e\u7ed9\u6211\u4eec\u7684Button\u52a0\u5165\u76f8\u5e94\u7684\u4e8b\u4ef6\u5904\u7406\u89e3\u51b3\uff0c\u5177\u4f53\u5982\u4e0b:\n\n\n\u9996\u5148\uff0c\u6211\u4eec\u521b\u5efa\u4e00\u4e2aAnimator\u5982\u4e0b:\n\n\n\n\n\n\u6e38\u620f\u4e00\u5f00\u59cb\u8fd0\u884c\u65f6\uff0cText\u5904\u4e8eIdle\u72b6\u6001(\u8be5\u72b6\u6001\u65e0\u52a8\u4f5c), State\u4e3afalse(\u5373Text\u5904\u4e8e\u6536\u7f29\u72b6\u6001)\n\u90a3\u4e48\u5f53\u6211\u4eec\u7b2c\u4e00\u6b21\u6309Button\u4f7f\u5176\u5c55\u5f00\u65f6\uff0c\u6211\u4eecSetTrigger(\"ToggleIn\"),Text\u8fdb\u5165ToggleOut\u72b6\u6001\uff0c\u90a3\u4e48\u4e4b\u540e\u6211\u4eec\u53ea\u9700\u7ef4\u62a4State\u7684\u503c\uff0c\u7136\u540e\u7ecf\u8fc7\u5224\u65ad\u89e6\u53d1ToggleIn\u548cToggleOut\u4f7fText\u5b8c\u6210\u76f8\u5173\u64cd\u4f5c\n\n\nToggle.cs\u7684\u4ee3\u7801\u5982\u4e0b\u8f83\u7b80\u5355\n\n\npublic\n \nclass\n \nToggle\n \n:\n \nMonoBehaviour\n \n{\n\n    \nprivate\n \nButton\n \nyourButton\n;\n  \n    \npublic\n \nText\n \ntext\n;\n  \n    \nprivate\n \nAnimator\n \nanimator\n;\n\n\n    \n// Use this for initialization  \n\n    \nvoid\n \nStart\n()\n \n{\n  \n        \nButton\n \nbtn\n \n=\n \nthis\n.\ngameObject\n.\nGetComponent\nButton\n();\n  \n        \nanimator\n \n=\n \ntext\n.\nGetComponent\nAnimator\n \n();\n\n        \nbtn\n.\nonClick\n.\nAddListener\n(\nClickBtn\n);\n  \n    \n}\n  \n\n    \nvoid\n \nClickBtn\n()\n \n{\n  \n        \nif\n \n(\nanimator\n.\nGetBool\n \n(\nState\n))\n \n{\n\n            \nanimator\n.\nSetTrigger\n \n(\nToggleIn\n);\n\n            \nanimator\n.\nSetBool\n \n(\nState\n,\n \nfalse\n);\n\n        \n}\n \nelse\n \n{\n\n            \nanimator\n.\nSetTrigger\n \n(\nToggleOut\n);\n\n            \nanimator\n.\nSetBool\n \n(\nState\n,\n \ntrue\n);\n\n        \n}\n\n    \n}\n\n\n}\n\n\n\n\n\n\n\u901a\u8fc7\u7ed9Button\u6302\u8f7d\u4ee5\u4e0a\u4ee3\u7801\uff0c\u62d6\u5165Text, \u6211\u4eec\u5c31\u5b9e\u73b0\u4e86\u6211\u4eec\u7684\u53ef\u5c55\u5f00\u516c\u544a\u7248\uff0c\u4e2a\u4eba\u89c9\u5f97\u7528\u8fd9\u79cd\u7ed9UI\u52a0\u4e0a\u52a8\u753b\u7684\u65b9\u6cd5\u8fd8\u662f\u5341\u5206\u7b80\u5355\u7684\u3002", 
            "title": "\u5b66\u4e60\u7b14\u8bb012-\u53ef\u5c55\u5f00\u516c\u544a\u7248"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb012-\u53ef\u5c55\u5f00\u516c\u544a\u7248/#12-", 
            "text": "", 
            "title": "\u5b66\u4e60\u7b14\u8bb012-\u53ef\u5c55\u5f00\u516c\u544a\u7248"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb012-\u53ef\u5c55\u5f00\u516c\u544a\u7248/#_1", 
            "text": "\u516c\u544a\u7248  SampleUI \u4e2d\u7684\u90e8\u5206\u8d34\u56fe", 
            "title": "\u4f5c\u4e1a\u7d20\u6750"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb012-\u53ef\u5c55\u5f00\u516c\u544a\u7248/#_2", 
            "text": "", 
            "title": "\u5b8c\u6210\u6548\u679c"
        }, 
        {
            "location": "/unity3D-learning/\u5b66\u4e60\u7b14\u8bb012-\u53ef\u5c55\u5f00\u516c\u544a\u7248/#_3", 
            "text": "\u5728\u8fd9\u6b21\u7684\u4f5c\u4e1a\u4e2d\uff0c\u6211\u7528\u5230\u4e86\u8bfe\u4e0a\u63d0\u4f9b\u7684SampleUI\u7684\u8d44\u6e90\u5305\u91cc\u7684\u90e8\u5206\u8d34\u56fe  \u9996\u5148\uff0c\u6211\u4eec\u8fdb\u884c\u6211\u4eec\u57fa\u672c\u7684UI\u6784\u5efa,\u6211\u4eec\u5148\u521b\u5efa\u4e00\u4e2aScrollView, \u7ed9Canvas\u52a0\u5165\u6211\u4eec\u7684Background(Image)\uff0c\u800c\u56fe\u4e2d\u6548\u679c\u7684\u5b9e\u73b0\u6211\u8fd8\u7528\u4e86\u4e00\u4e2aMenuImage(Image),\u76f4\u63a5\u628aSF Window\u4f5c\u4e3aScrollView\u7684Image\u662f\u8fbe\u4e0d\u5230\u4e0a\u9762\u7684\u6548\u679c\u7684\uff0c\u6240\u4ee5\u6211\u901a\u8fc7\u589e\u52a0\u4e00\u4e2aImage,\u628aScrollView\u5305\u5728\u91cc\u9762\u4ee5\u5b9e\u73b0\u4ee5\u4e0a\u6548\u679c\uff0c\u5b8c\u6210\u4e86\u8fd9\u4e2a\u4ee5\u540e\uff0c\u6211\u4eec\u4e5f\u7ed9\u6211\u4eec\u7684Scrollbar\u52a0\u4e0a\u76f8\u5e94\u7684\u8d34\u56fe\uff0c\u8fd9\u65f6\u5019\u6574\u4e2a\u6548\u679c\u5982\u4e0b \n\u5230\u8fd9\u4e00\u6b65\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u7ed9ScrollView\u7684Content\u52a0\u4e0a\u76f8\u5e94\u7684\u5185\u5bb9\u4e86\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u7ed9Content\u52a0\u4e00\u4e2aVerticalLayoutGroup\u5b9e\u73b0\u6211\u4eecContent\u7684\u81ea\u52a8\u5e03\u5c40\uff0c\u8fd9\u6837\u6211\u4eec\u53ea\u9700\u8981\u628aGameObject\u6dfb\u52a0\u5230Content\u91cc\uff0c\u5b83\u5c31\u4f1a\u81ea\u52a8\u5e2e\u6211\u4eec\u5b8c\u6210\u5e03\u5c40\uff0c\u65e0\u9700\u518d\u81ea\u5df1\u53bb\u8c03\u8282\n\u6211\u4eec\u52a0\u5165\u6211\u4eec\u7684Button\u548cText, \u7ed3\u679c\u5982\u4e0b  \n\u90a3\u4e48\u6211\u4eec\u5982\u4f55\u5b9e\u73b0\u6211\u4eecText\u7684\u5c55\u5f00\u5462\uff0c\u5728\u8fd9\u91cc\uff0c\u56e0\u4e3a\u6211\u4eec\u4f7f\u7528\u4e86VerticalLayoutGroup,\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u8c03\u8282Text\u7684Size(Height)\u5b8c\u6210Text\u7684\u6536\u7f29\uff0c\u7406\u89e3\u4e86\u8fd9\u4e00\u70b9\u5c31\u597d\u529e\u4e86\uff0c\u6211\u8fd9\u91cc\u7528\u7684\u662f\u6211\u4eec\u4e4b\u524d\u5b66\u8fc7\u7684\u52a8\u753b\u3002\u901a\u8fc7\u52a8\u753b\u8c03\u8282Text\u7684Size\uff0c\u6211\u4eec\u5373\u53ef\u5b8c\u6210\u6536\u7f29\u5c55\u5f00\u7684\u52a8\u753b\uff0c\u8fd9\u91cc\u52a8\u753b\u7684\u5236\u4f5c\u5341\u5206\u7b80\u5355\uff0c\u4e0d\u591a\u8d58\u8ff0 \n\u90a3\u4e48\u6211\u4eec\u5982\u4f55\u4f7f\u7528\u8fd9\u4e2a\u52a8\u753b\u5462\uff0c\u5176\u5b9e\u4e5f\u5341\u5206\u7b80\u5355\u3002\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u521b\u5efaAnimator\u7136\u540e\u7ed9\u6211\u4eec\u7684Button\u52a0\u5165\u76f8\u5e94\u7684\u4e8b\u4ef6\u5904\u7406\u89e3\u51b3\uff0c\u5177\u4f53\u5982\u4e0b:  \u9996\u5148\uff0c\u6211\u4eec\u521b\u5efa\u4e00\u4e2aAnimator\u5982\u4e0b:   \u6e38\u620f\u4e00\u5f00\u59cb\u8fd0\u884c\u65f6\uff0cText\u5904\u4e8eIdle\u72b6\u6001(\u8be5\u72b6\u6001\u65e0\u52a8\u4f5c), State\u4e3afalse(\u5373Text\u5904\u4e8e\u6536\u7f29\u72b6\u6001)\n\u90a3\u4e48\u5f53\u6211\u4eec\u7b2c\u4e00\u6b21\u6309Button\u4f7f\u5176\u5c55\u5f00\u65f6\uff0c\u6211\u4eecSetTrigger(\"ToggleIn\"),Text\u8fdb\u5165ToggleOut\u72b6\u6001\uff0c\u90a3\u4e48\u4e4b\u540e\u6211\u4eec\u53ea\u9700\u7ef4\u62a4State\u7684\u503c\uff0c\u7136\u540e\u7ecf\u8fc7\u5224\u65ad\u89e6\u53d1ToggleIn\u548cToggleOut\u4f7fText\u5b8c\u6210\u76f8\u5173\u64cd\u4f5c  Toggle.cs\u7684\u4ee3\u7801\u5982\u4e0b\u8f83\u7b80\u5355  public   class   Toggle   :   MonoBehaviour   { \n     private   Button   yourButton ;   \n     public   Text   text ;   \n     private   Animator   animator ; \n\n     // Use this for initialization   \n     void   Start ()   {   \n         Button   btn   =   this . gameObject . GetComponent Button ();   \n         animator   =   text . GetComponent Animator   (); \n         btn . onClick . AddListener ( ClickBtn );   \n     }   \n\n     void   ClickBtn ()   {   \n         if   ( animator . GetBool   ( State ))   { \n             animator . SetTrigger   ( ToggleIn ); \n             animator . SetBool   ( State ,   false ); \n         }   else   { \n             animator . SetTrigger   ( ToggleOut ); \n             animator . SetBool   ( State ,   true ); \n         } \n     }  }   \u901a\u8fc7\u7ed9Button\u6302\u8f7d\u4ee5\u4e0a\u4ee3\u7801\uff0c\u62d6\u5165Text, \u6211\u4eec\u5c31\u5b9e\u73b0\u4e86\u6211\u4eec\u7684\u53ef\u5c55\u5f00\u516c\u544a\u7248\uff0c\u4e2a\u4eba\u89c9\u5f97\u7528\u8fd9\u79cd\u7ed9UI\u52a0\u4e0a\u52a8\u753b\u7684\u65b9\u6cd5\u8fd8\u662f\u5341\u5206\u7b80\u5355\u7684\u3002", 
            "title": "\u5b9e\u73b0\u8fc7\u7a0b"
        }
    ]
}